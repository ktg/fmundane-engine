{
  "id" : "layer1",

  "start": {
    "actions": [["fanoff"]],
    "event": "ready?"
  },

  "events": [{
    "onstart": ["saygreet"],
    "id": "ready?",
    "name": "ready?",
    "subscription" : "/speech",
    "type": "speech",
    "rules": [{
        "rule": {
          "operator": "contains",
          "operand": ["yes"]
        },
        "actions": [
          ["sayturningonfan","fanhot"]
        ],
        "next": "asknames"
      },
      {
        "rule": {
          "operator": "contains",
          "operand": ["no"]
        },
        "actions": [
          ["sayaskagain"]
        ],
        "next": "ready?"
      }
    ]
  },
  {
    "onstart": ["asknames"],
    "id": "asknames",
    "name": "ask names",
    "subscription" : "/speech",
    "type": "speech",
    "rules": [{
        "rule": {
          "operator": "any"
        },
        "actions": [
          ["sayhello"]
        ],
        "next": "facescan"
      }
    ]
  },
  {
    "onstart": ["askfacescan"],
    "id": "facescan",
    "name": "wizard next",
    "subscription" : "/press",
    "type": "button",
    "data": ["next"],
    "rules": [{
        "rule": {
          "operator": "equals",
          "operand": "next"
        },
        "actions": [
          ["facecameraon"]
        ],
        "next": "wizard2"
      }
    ]
  },
  {
    "onstart": ["saygreat"],
    "id": "wizard2",
    "name": "wizard yes/no",
    "subscription" : "/press",
    "type": "button",
    "data": ["yes","no"],
    "rules": [{
        "rule": {
          "operator": "equals",
          "operand": "yes"
        },
        "actions": [
          ["facecamerascan"],
          ["saygreat"],
          ["sayscanningnow"],
          ["facecameraoff"]
        ],
        "next": "aircheck (gesture)"
      },
      {
        "rule": {
          "operator": "equals",
          "operand": "no"
        },
        "actions": [
          ["saynoworries"],
          ["facecameraoff"]
        ],
        "next": "lights1"
      }
    ]
  },
  {
    "onstart": ["saystarted"],
    "id": "aircheck (gesture)",
    "name": "aircheck (gesture)",
    "subscription" : "/gesture",
    "type": "gesture",
    "rules": [{
        "rule": {
          "operator": "equals",
          "operand": ["thumbsup"]
      } ,
        "actions": [
          ["airmonitoron"]
        ],
        "next": "fin"
      }
    ]
  },
  {
    "onstart": ["saystarted"],
    "id": "lights1",
    "name": "select light colour",
    "subscription" : "/press",
    "type": "button",
    "data": ["red", "blue", "green", "rainbow"],
    "rules": [{
        "rule": {
          "operator": "equals",
          "operand": "red"
        },
        "actions": [
          ["redlights"]
        ],
        "next": "fin"
      },
      {
        "rule": {
          "operator": "equals",
          "operand": "blue"
        },
        "actions": [
          ["bluelights"]
        ],
        "next": "fin"
      },
      {
        "rule": {
          "operator": "equals",
          "operand": "green"
        },
        "actions": [
          ["greenlights"]
        ],
        "next": "fin"
      },
      {
        "rule": {
          "operator": "equals",
          "operand": "rainbow"
        },
        "actions": [
          ["rainbowlights"]
        ],
        "next": "fin"
      }
    ]
  },
  {
    "onstart": ["saystarted"],
    "id": "fin",
    "name": "finished!",
    "subscription" : "/press",
    "type": "button",
    "data": ["done!"],
    "rules": [{
        "rule": {
          "operator": "equals",
          "operand": "done"
        },
        "actions": []
      }
    ]
  }
]}
