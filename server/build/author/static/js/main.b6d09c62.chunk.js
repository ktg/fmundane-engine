(this["webpackJsonpfmundane-author"]=this["webpackJsonpfmundane-author"]||[]).push([[0],{105:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n.n(a),r=n(28),o=n.n(r),i=(n(79),n(80),n(1)),s=n(6),l=n(4),u=n(7),d=n.n(u),f=n(15),j=n(9),b=n(5),x=n(3),y=n(23),O=Object(y.b)({name:"creator",initialState:{selectedNode:null,selectedLink:null,viewAdd:!1,name:"",rule:"",onstart:{},actions:"",type:"button"},reducers:{setEditNode:function(t,e){var n=e.payload,a=n.name,c=n.rule,r=n.onstart,o=n.actions,i=n.type;t.selectedNode=a,t.name=a,t.rule=c,t.onstart=r,t.actions=o,t.type=i},setEditLink:function(t,e){t.selectedLink=e.payload},setViewAddNode:function(t,e){t.viewAdd=e.payload},setName:function(t,e){t.name=e.payload},setRule:function(t,e){t.rule=e.payload},setOnstart:function(t,e){t.onstart=e.payload},setActions:function(t,e){t.actions=e.payload},setType:function(t,e){t.type=e.payload}}}),m=O.actions,p=m.setEditNode,h=m.setViewAddNode,v=m.setName,g=m.setRule,N=m.setOnstart,k=(m.setActions,m.setEditLink),w=m.setType,C=function(t){return function(e,n){e(h(t))}},A=function(t){return t.creator.selectedLink},L=function(t){return t.creator.viewAdd},S=function(t){return t.creator.name},I=function(t){return t.creator.rule},E=function(t){return t.creator.onstart},T=function(t){return t.creator.actions},B=function(t){return t.creator.type},P=O.reducer,_=n(11),F=n.n(_),D={e1:{name:"e1",id:"e1",onstart:{speech:[{words:"something to say",delay:1e3,voice:"Daniel",background:""},{words:"and something after a second.",voice:"Daniel",background:""}]},type:"button",subscription:"/press"}},R=function(t){return Object.keys(t).reduce((function(e,n,a){var c=t[n];return 0==a&&(e.root={id:c.id,event:c.id}),Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},c.id,(c.rules||[]).reduce((function(t,e,n){return e.next&&""!=e.next.trim()?[].concat(Object(x.a)(t),[{id:"".concat(e.next,"_").concat(a,"_").concat(n),event:e.next||"",op:e.rule.operand,actions:e.actions}]):t}),[])))}),{})},z=function(){return{parent:null,child:null,lut:R(D),nodesById:D,nodes:Object.keys(D)}},J=Object(y.b)({name:"layer",initialState:{layers:{layer1:z()},authored:[],layerid:"layer1"},reducers:{addNode:function(t,e){t.layers[t.layerid].nodes=[].concat(Object(x.a)(t.layers[t.layerid].nodes),[e.payload.id]),t.layers[t.layerid].nodesById=Object(i.a)(Object(i.a)({},t.layers[t.layerid].nodesById),{},Object(b.a)({},e.payload.id,e.payload))},setLayer:function(t,e){t.layerid=e.payload},addLayer:function(t,e){t.layers=Object(i.a)(Object(i.a)({},t.layers),{},Object(b.a)({},function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;-1!=t.indexOf("layer".concat(++e)););return"layer".concat(e)}(Object.keys(t.layers)),z()))},createLink:function(t,e){var n=e.payload,a=n.rule,c=n.actions,r=n.from,o=n.to,s=r.id,l=(c||"").split("|").map((function(t){return t.split(",")}));t.layers[t.layerid].lut=Object(i.a)(Object(i.a)({},t.layers[t.layerid].lut),{},Object(b.a)({},s,[].concat(Object(x.a)(t.layers[t.layerid].lut[s]||[]),[{id:"".concat(o,"_").concat(Date.now()),event:o,op:a,actions:l}])))},loadNodes:function(t,e){t.layers={};var n,a=Object(j.a)(e.payload.reverse());try{for(a.s();!(n=a.n()).done;){var c=n.value,r=c.nodes,o=c.layer;t.layers[o]=t.layers[o]||{},t.layers[o].nodes=Object.keys(r),t.layers[o].nodesById=r,t.layers[o].lut=R(t.layers[o].nodesById),t.layers[o].parent=null,t.layers[o].child=null,t.layerid=o}}catch(i){a.e(i)}finally{a.f()}},updateLink:function(t,e){var n=e.payload,a=n.from,c=n.to,r=n.actions,o=n.rules;t.layers[t.layerid].lut=Object.keys(t.layers[t.layerid].lut).reduce((function(e,n){return n===a?Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,t.layers[t.layerid].lut[n].map((function(t){return t.event===c?Object(i.a)(Object(i.a)({},t),{},{actions:r,op:o}):t})))):Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,t.layers[t.layerid].lut[n]))}),{})},updateNode:function(t,e){var n=e.payload,a=n.node,c=n.name,r=n.onstart,o=n.type,s=n.subscription,l=void 0===s?"/press":s;console.log("in updare node with onstart",r),t.layers[t.layerid].nodesById=Object.keys(t.layers[t.layerid].nodesById).reduce((function(e,n){return n==a?Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},c,Object(i.a)(Object(i.a)({},t.layers[t.layerid].nodesById[n]),{},{name:c,type:o,subscription:l,id:c.replace(/\s/g,"_"),onstart:r}))):Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,t.layers[t.layerid].nodesById[n]))}),{}),t.layers[t.layerid].nodes=t.layers[t.layerid].nodes.reduce((function(t,e){return[].concat(Object(x.a)(t),e==a?[c]:[e])}),[]),t.layers[t.layerid].lut=Object.keys(t.layers[t.layerid].lut).reduce((function(e,n){return"root"===n?Object(i.a)(Object(i.a)({},e),{},{root:{id:t.layers[t.layerid].lut.root.id==a?c:t.layers[t.layerid].lut.root.id,event:t.layers[t.layerid].lut.root.event==a?c:t.layers[t.layerid].lut.root.event}}):n==a?Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},c,t.layers[t.layerid].lut[a].map((function(t){return t.event===a?Object(i.a)(Object(i.a)({},t),{},{event:c,id:c}):t})))):Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,t.layers[t.layerid].lut[n].map((function(t){return t.event===a?Object(i.a)(Object(i.a)({},t),{},{event:c,id:c}):t}))))}),{})},setChild:function(t,e){t.layers[t.layerid].child=e.payload},setParent:function(t,e){t.layers[t.layerid].parent=e.payload},setAuthored:function(t,e){t.authored=e.payload},setLookup:function(t,e){t.layers[t.layerid].lut=e.payload},generateLookuptable:function(t){t.layers[t.layerid].lut=R(t.layers[t.layerid].nodesById)},updateParent:function(t,e){t.layers[t.layerid].lut=Object.keys(t.layers[t.layerid].lut).reduce((function(n,a){return a!=t.layers[t.layerid].parent?Object(i.a)(Object(i.a)({},n),{},Object(b.a)({},a,t.layers[t.layerid].lut[a])):Object(i.a)(Object(i.a)({},n),{},Object(b.a)({},a,[].concat(Object(x.a)(t.layers[t.layerid].lut[a]||[]),[{event:e.payload.next,id:e.payload.next,op:e.payload.op,actions:e.payload.actions}])))}),{}),t.layers[t.layerid].lut=Object(i.a)(Object(i.a)({},t.layers[t.layerid].lut),{},Object(b.a)({},e.payload.next,t.layers[t.layerid].lut[e.payload.next]||[]))}}}),U=J.actions,M=U.addNode,q=U.loadNodes,H=U.addLayer,V=U.setLayer,K=U.setParent,W=U.setChild,X=U.updateParent,G=U.setLookup,Q=U.setAuthored,Y=(U.generateLookuptable,U.setEditNode,U.updateNode),Z=U.updateLink,$=U.createLink,tt=function(t,e,n){return function(a,c){a(X({op:t,actions:e,next:n})),a(C(!1))}},et=function(t){return t.layer.layers[t.layer.layerid].nodes},nt=function(t){return t.layer.layers[t.layer.layerid].nodesById},at=function(t){return t.layer.layers[t.layer.layerid].nodesById[t.layer.layers[t.layer.layerid].parent]||{}},ct=function(t){return t.layer.layers[t.layer.layerid].child},rt=function(t){return t.layer.layers[t.layer.layerid].lut},ot=function(t){return t.layer.authored},it=function(t){return Object.keys(t.layer.layers||{}).sort()},st=function(t){return t.layer.layerid},lt=J.reducer,ut=n(0);function dt(t){t.onClose;var e=Object(l.b)(),n=Object(l.c)(et),c=Object(a.useState)(n[0]),r=Object(s.a)(c,2),o=r[0],i=r[1],u=Object(a.useState)(""),d=Object(s.a)(u,2),f=d[0],j=d[1],b=Object(a.useState)(""),x=Object(s.a)(b,2),y=x[0],O=x[1],m=Object(l.c)(at),p=function(t){i(t.target.value)};return Object(ut.jsxs)("div",{className:"flex flex-col",children:[Object(ut.jsxs)("div",{className:"flex flex-row shadow p-2 mt-4",children:[Object(ut.jsx)("div",{className:"flex  flex-col",children:function(){var t=n.map((function(t){return Object(ut.jsx)("option",{value:t,children:t},t)}));return Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start p-4",children:[Object(ut.jsx)("label",{children:"node"}),Object(ut.jsx)("select",{value:o,onChange:p,children:t})]})}()}),Object(ut.jsx)("div",{className:"flex  flex-col",children:Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start p-4",children:[Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"RULE"}),Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start",children:[Object(ut.jsx)("input",{type:"text",placeholder:"rule list",value:f,onChange:function(t){!function(){j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}(t.target.value)}}),Object(ut.jsx)("label",{className:"text-xs mt-1 justify-start",children:"button name"})]})]})}),Object(ut.jsx)("div",{className:"flex  flex-col ",children:Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start p-4",children:[Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"ACTION"}),Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start",children:[Object(ut.jsx)("input",{type:"text",placeholder:"action list",value:y,onChange:function(t){!function(t){O(t)}(t.target.value)}}),Object(ut.jsx)("label",{className:"text-xs mt-1 justify-start",children:"format: a1,a2,a3|a5,a6 "})]})]})})]}),Object(ut.jsxs)("div",{children:[" ",Object(ut.jsx)("button",{onClick:function(){e($({from:m,to:o,rule:f,actions:y}))},className:"p-2 mt-4 bg-blue-500 text-white",children:"create link"})]})]})}var ft=function(t){return t.map((function(t){var e=""==(t.rate||"").trim()?"180":t.rate;return Object(i.a)(Object(i.a)({},t),{},{rate:e})}))};function jt(t){var e=t.lines,n=void 0===e?[]:e,c=t.speechChanged,r=["Emily","Daniel","Tom","Fiona","Moira","Bruce","Junior","Karen","Lee","Serena"];n=n.length<=0?[{words:"",delay:0,voice:"Daniel",background:"",rate:"180"}]:n;var o=Object(a.useState)(n),l=Object(s.a)(o,2),u=l[0],j=l[1],b=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.post("/author/audiotest").set("Content-Type","application/json").send({lines:ft(u)});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(f.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.post("/author/audiotest").set("Content-Type","application/json").send({lines:ft([u[e]])});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(t,e){var n=r.map((function(t){return Object(ut.jsx)("option",{value:t,children:t},t)}));return Object(ut.jsx)("select",{value:t.voice||"Kate",onChange:function(t){return function(t,e){var n=u.map((function(n,a){return a==t?Object(i.a)(Object(i.a)({},n),{},{voice:e}):n}),[]);j(n),c(ft(n))}(e,t.target.value)},style:{width:120},children:n},e)};return Object(ut.jsx)("div",{children:Object(ut.jsxs)("div",{className:"flex  flex-col shadow p-2 mt-4",children:[Object(ut.jsx)("div",{onClick:function(){j([].concat(Object(x.a)(u),[{words:"",delay:0,voice:"Daniel",background:"",rate:"180"}]))},className:"font-bold text-xs flex justify-start",children:"LINES (+)"}),u.map((function(t,e){return Object(ut.jsxs)("div",{className:"flex flex-row text-sm items-center justify-start mt-4",children:[Object(ut.jsxs)("div",{className:"flex flex-col justify-start",children:[Object(ut.jsx)("input",{style:{minWidth:300},className:"mr-4",type:"text",value:t.words,onChange:function(t){!function(t,e){var n=u.map((function(n,a){return a==t?Object(i.a)(Object(i.a)({},n),{},{words:e}):n}),[]);j(n),c(ft(n))}(e,t.target.value)}}),Object(ut.jsx)("label",{className:"flex justify-start",children:"what to say"})]}),Object(ut.jsxs)("div",{className:"flex flex-col justify-start",children:[Object(ut.jsx)("input",{type:"text",style:{width:80},value:t.delay,onChange:function(t){!function(t,e){var n=u.map((function(n,a){try{return a==t?Object(i.a)(Object(i.a)({},n),{},{delay:e}):n}catch(c){return n}}),[]);j(n),c(ft(n))}(e,t.target.value)}}),Object(ut.jsx)("label",{className:"flex justify-start",children:"pause (ms)"})]}),Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsxs)("div",{className:"pl-2",children:[Object(ut.jsx)("input",{type:"text",style:{width:80},value:t.rate,onChange:function(t){!function(t,e){var n=u.map((function(n,a){try{return a==t?Object(i.a)(Object(i.a)({},n),{},{rate:e}):n}catch(c){return n}}),[]);j(n),c(ft(n))}(e,t.target.value)}}),Object(ut.jsx)("label",{className:"flex justify-start",children:"words/min"})]})}),Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsxs)("div",{className:"pl-2",children:[O(t,e),Object(ut.jsx)("label",{className:"flex justify-start",children:"voice"})]})}),Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsxs)("div",{className:"pl-2",children:[Object(ut.jsx)("input",{type:"text",style:{width:120},value:t.background,onChange:function(t){!function(t,e){var n=u.map((function(n,a){try{return a==t?Object(i.a)(Object(i.a)({},n),{},{background:e}):n}catch(c){return n}}),[]);j(n),c(ft(n))}(e,t.target.value)}}),Object(ut.jsx)("label",{className:"flex justify-start",children:"sound effect"})]})}),Object(ut.jsx)("div",{onClick:function(){return y(e)},className:"flex flex-col justify-start pb-4",children:Object(ut.jsx)("div",{className:"flex items-center justify-center ml-4 mr-4 text-black w-6 h-6",children:"\u25b6"})}),Object(ut.jsx)("div",{onClick:function(){return function(t){var e=u.reduce((function(e,n,a){return a==t?e:[].concat(Object(x.a)(e),[n])}),[]);j(e),c(ft(e))}(e)},className:"flex flex-col justify-start pb-4",children:Object(ut.jsx)("div",{children:"\ud83d\uddd1"})})]},e)})),Object(ut.jsxs)("div",{className:"p-8",children:[" ",Object(ut.jsx)("button",{onClick:b,className:"rounded-full h-10 w-10 bg-pink-500 text-white",children:"\u25b6"})]})]})})}var bt=function(t){return t.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{params:JSON.parse(t.params)})}))};function xt(t){var e=t.action,n=void 0===e?[]:e,c=t.actionChanged;n=n.length<=0?[]:n.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{params:t.params?JSON.stringify(t.params):"{}"})}));var r=Object(a.useState)(n),o=Object(s.a)(r,2),l=o[0],u=o[1],j=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.post("/author/actiontest").set("Content-Type","application/json").send({actions:bt(l)});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(f.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.post("/author/actiontest").set("Content-Type","application/json").send({actions:bt([l[e]])});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(ut.jsx)("div",{children:Object(ut.jsxs)("div",{className:"flex  flex-col shadow p-2 mt-4",children:[Object(ut.jsx)("div",{onClick:function(){u([].concat(Object(x.a)(l),[{action:"",delay:0,params:"{}"}]))},className:"font-bold text-xs flex justify-start",children:"ACTIONS (name,delay,params) (+)"}),l.map((function(t,e){return Object(ut.jsxs)("div",{className:"flex flex-row text-sm items-center justify-start mt-1",children:[Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsx)("input",{style:{width:120},className:"mr-4",type:"text",value:t.action,onChange:function(t){!function(t,e){var n=l.map((function(n,a){return a==t?Object(i.a)(Object(i.a)({},n),{},{action:e}):n}),[]);u(n),c(bt(n))}(e,t.target.value)}})}),Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsx)("input",{type:"text",style:{width:80},value:t.delay,onChange:function(t){!function(t,e){var n=l.map((function(n,a){return a==t?Object(i.a)(Object(i.a)({},n),{},{delay:e}):n}),[]);u(n),c(bt(n))}(e,t.target.value)}})}),Object(ut.jsx)("div",{className:"flex flex-col justify-start",children:Object(ut.jsx)("div",{className:"pl-2",children:Object(ut.jsx)("input",{type:"text",style:{width:400},value:t.params,onChange:function(t){!function(t,e){var n=l.map((function(n,a){try{return a==t?Object(i.a)(Object(i.a)({},n),{},{params:e}):n}catch(c){return n}}),[]);u(n),c(bt(n))}(e,t.target.value)}})})}),Object(ut.jsx)("div",{onClick:function(){return b(e)},className:"flex flex-col justify-start pb-4",children:Object(ut.jsx)("div",{className:"flex items-center justify-center ml-4 mr-4 text-black w-6 h-6",children:"\u25b6"})}),Object(ut.jsx)("div",{onClick:function(){return function(t){var e=l.reduce((function(e,n,a){return a==t?e:[].concat(Object(x.a)(e),[n])}),[]);u(e),c(bt(e))}(e)},className:"flex flex-col justify-start pb-4",children:Object(ut.jsx)("div",{children:"\ud83d\uddd1"})})]},e)})),Object(ut.jsxs)("div",{className:"p-2",children:[" ",Object(ut.jsx)("button",{onClick:j,className:"rounded-full h-6 w-6 text-xs bg-pink-500 text-white",children:"\u25b6"})]})]})})}function yt(t){var e=t.actions,n=void 0===e?[[]]:e,a=t.actionChanged,c=function(t,e){a(n.reduce((function(n,a,c){return[].concat(Object(x.a)(n),c===t?[e]:[a])}),[]))},r=n.map((function(t,e){return Object(ut.jsx)(xt,{action:t||[],actionChanged:function(t){return c(e,t)}},e)}));return Object(ut.jsx)("div",{children:r})}var Ot=function(t){var e=t.onClose,n=Object(l.b)(),c=Object(a.useState)("new"),r=Object(s.a)(c,2),o=r[0],u=r[1],d=Object(a.useState)(!0),f=Object(s.a)(d,2),j=f[0],b=f[1],x=Object(l.c)(at),y=x.id,O=x.type,m=Object(l.c)(S),p=Object(l.c)(I),k=Object(l.c)(E),C=Object(l.c)(T),A=Object(l.c)(B);console.log("onstart is",k);var L=Object(a.useState)({name:m,rule:p,onstart:k,actions:C,type:A}),P=Object(s.a)(L,2),_=P[0],F=P[1],D=function(){var t={name:_.name.replace(/\s/g,""),id:_.name.replace(/\s/g,"_"),onstart:_.onstart,type:_.type,subscription:"button"==_.type||""==_.type.trim()?"/press":"/".concat(_.type)};n(function(t,e,n){return function(a,c){var r=c().layer.layerid,o=c().layer.layers[r].nodes,s=function(){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=0;-1!=t.indexOf(e);)e="".concat(e,"_").concat(++n);return e}(t.name,o),l=Object(i.a)(Object(i.a)({},t),{},{type:t.type||"button",name:"".concat(s),id:"".concat(s.replace(" ","_"))});a(M(l)),a(tt(e,n,l.name))}}(t,_.rule,[[]])),q()},R=function(t){F(Object(i.a)(Object(i.a)({},_),{},{onstart:Object(i.a)(Object(i.a)({},_.onstart),{},{speech:t})})),n(N(Object(i.a)(Object(i.a)({},_.onstart),{},{speech:t})))},z=function(t){F(Object(i.a)(Object(i.a)({},_),{},{onstart:Object(i.a)(Object(i.a)({},_.onstart),{},{actions:t})})),n(N(Object(i.a)(Object(i.a)({},_.onstart),{},{actions:t})))},J=function(t){var e="speech"==t?"/speech":"/press";F(Object(i.a)(Object(i.a)({},_),{},{type:t,subscription:e}))},U=function(){console.log("UPdating node",Object(i.a)({node:m},_)),n(Y(Object(i.a)({node:m},_))),n(h(!1)),q()},q=function(){n(v("")),n(g("")),n(N({})),n(w("")),F({name:"",rule:"",onstart:{},actions:"",type:"button"})},H=function(){if(y){var t="button"===O?"the name of the button pressed to trigger ".concat(y,"->this node"):"the keyword(s) that are spoken to trigger ".concat(y,"->this node");return Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start",children:[Object(ut.jsx)("label",{children:"rule"}),Object(ut.jsx)("input",{type:"text",value:_.rule,onChange:function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";F(Object(i.a)(Object(i.a)({},_),{},{rule:t}))}(t.target.value)},className:"p-1 mt-2"}),Object(ut.jsx)("label",{className:"text-xs mt-1",children:t})]})}};return Object(ut.jsxs)("div",{className:"flex flex-col",children:[Object(ut.jsx)("div",{className:"flex justify-end items-center text-xl",children:Object(ut.jsx)("div",{onClick:e,className:"flex justify-center items-center  rounded-full  text-xs bg-pink-500 text-white h-6 w-6 shadow",children:"x"})}),Object(ut.jsxs)("div",{className:"flex flex-row ",children:[Object(ut.jsx)("div",{onClick:function(){u("new")},className:"font-bold p-4 ".concat("new"==o?"text-blue-500":"text-gray-500"),children:"new node"}),Object(ut.jsx)("div",{onClick:function(){u("current")},className:"font-bold p-4 ".concat("current"==o?"text-blue-500":"text-gray-500"),children:"existing node"})]}),Object(ut.jsxs)("div",{className:"flex flex-row ",children:[Object(ut.jsx)("div",{onClick:function(){J("button")},className:"text-xs font-bold p-4 ".concat("button"==_.type?"text-blue-500":"text-gray-500"),children:"button"}),Object(ut.jsx)("div",{onClick:function(){J("speech")},className:"text-xs font-bold p-4 ".concat("speech"==_.type?"text-blue-500":"text-gray-500"),children:"speech"})]}),"new"==o&&Object(ut.jsxs)("div",{className:"flex justify-start flex-col",children:[Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start",children:[Object(ut.jsx)("label",{children:"node name"}),Object(ut.jsx)("input",{type:"text",value:_.name,onChange:function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";F(Object(i.a)(Object(i.a)({},_),{},{name:t}))}(t.target.value)},className:"p-1 mt-2"}),Object(ut.jsx)("label",{className:"text-xs mt-1",children:"a unique name for this node"})]}),y&&H(),Object(ut.jsxs)("div",{className:"bg-gray-100 mt-4",children:[Object(ut.jsxs)("div",{className:"flex items-start flex-col p-4",children:[Object(ut.jsx)("div",{children:"on start"}),Object(ut.jsx)("div",{className:"text-xs text-gray-500",children:"(the speech and actions that run when this node is triggered)"})]}),Object(ut.jsxs)("div",{className:"flex flex-row ",children:[Object(ut.jsx)("div",{onClick:function(){b(!0)},className:"text-xs font-bold p-4 ".concat(j?"text-blue-500":"text-gray-500"),children:"speech"}),Object(ut.jsx)("div",{onClick:function(){b(!1)},className:"text-xs font-bold p-4 ".concat(j?"text-gray-500":"text-blue-500"),children:"actions"})]}),j&&(console.log("in rendr sppech with",_),Object(ut.jsxs)("div",{className:"flex  flex-col shadow p-2 mt-4",children:[Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"SPEECH (when this node starts)"}),Object(ut.jsx)("div",{className:"flex flex-col mt-2 items-start",children:Object(ut.jsx)(jt,{lines:_.onstart.speech,speechChanged:R})})]})),!j&&Object(ut.jsx)("div",{children:Object(ut.jsx)(yt,{actions:_.onstart.actions,actionChanged:z})})]}),Object(ut.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[y&&Object(ut.jsxs)("div",{children:[" ",Object(ut.jsx)("button",{onClick:D,className:"p-2 mt-4 bg-blue-500 text-white",children:"Create node!"})]}),!y&&Object(ut.jsxs)("div",{children:[" ",Object(ut.jsx)("button",{onClick:U,className:"p-2 mt-4 bg-blue-500 text-white",children:"Update node"})]}),Object(ut.jsxs)("div",{children:[" ",Object(ut.jsx)("button",{onClick:e,className:"ml-4 p-2 mt-4 bg-blue-500 text-white",children:"Close"})]})]})]}),"current"==o&&Object(ut.jsx)(dt,{})]})};function mt(t){var e=t.onClose,n=Object(l.b)(),c=Object(l.c)(A)||{},r=c.from,o=void 0===r?{}:r,i=c.to,u=void 0===i?{}:i,d=Object(a.useState)(u.actions),f=Object(s.a)(d,2),j=f[0],b=f[1],x=Object(a.useState)(u.op||""),y=Object(s.a)(x,2),O=y[0],m=y[1],p=function(t){console.log("seen action changed!",t),b(t)};return Object(ut.jsxs)("div",{className:"flex flex-col shadow p-2 mt-4",children:[Object(ut.jsx)("div",{className:"flex justify-end items-center text-xl",children:Object(ut.jsx)("div",{onClick:e,className:"flex justify-center items-center  rounded-full  text-xs bg-pink-500 text-white h-6 w-6 shadow",children:"x"})}),Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"rules"}),Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"rules to trigger move from ".concat(o.name," to ").concat(u.name)}),Object(ut.jsxs)("div",{className:"flex flex-col mt-2 items-start",children:[Object(ut.jsx)("input",{type:"text",placeholder:"action list",value:O,onChange:function(t){var e;e=t.target.value,m(e)}}),Object(ut.jsx)("label",{className:"text-xs mt-1 justify-start",children:"format: a,b,c"})]})]}),Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"actions"}),Object(ut.jsx)("div",{className:"font-bold text-xs flex justify-start",children:"actions executed on move from ".concat(o.name," to ").concat(u.name)}),Object(ut.jsx)(yt,{actions:j,actionChanged:p})]}),Object(ut.jsx)("button",{onClick:function(){n(Z({from:o.name,to:u.name,actions:j,rules:O})),n(k())},className:"p-2 mt-4 bg-blue-500 text-white",children:"Update link"})]})}var pt=n(48),ht=n(108),vt=n(31),gt=n(47),Nt=n(49),kt=function(t,e){var n=c.a.useRef();return c.a.useEffect((function(){return t(Nt.a(n.current)),function(){}}),e),n},wt=192,Ct=108,At=18,Lt=800,St=function t(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[])},It=function(t,e,n,a){return"M ".concat(t," ").concat(e," C ").concat((t+n)/2," ").concat(e,", ").concat((t+n)/2," ").concat(a,", ").concat(n," ").concat(a)},Et=function(t,e,n,a){return"M ".concat(t," ").concat(e," C ").concat(1.5*(t+n)," ").concat(e,", ").concat(1.5*(t+n)," ").concat(a,", ").concat(n," ").concat(a)},Tt={},Bt=[],Pt=function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=e[n.event]||[],r=(a[n.event].name||"").split("."),o=Object(s.a)(r,1),i=o[0],l=void 0===i?["x"]:i,u=a[n.event],d=u.onstart,f=void 0===d?"":d,j=u.type,b=void 0===j?"button":j;return Tt[n.event]=!0,{event:n,onstart:f,type:b,name:l,children:c.reduce((function(c,r){return Tt[r.event]?(Bt=[].concat(Object(x.a)(Bt),[{from:n,to:r}]),c):[].concat(Object(x.a)(c),[t(e,r,a)])}),[])}},_t=function(t){return t.map((function(t){return Object(x.a)(new Set(t.map((function(t){return t.action}))))}))},Ft=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length<=0?[]:St([{from:{name:e.data.event.event,x:e.x,y:e.y+Ct},to:(e.children||[]).map((function(t){return{name:t.data.event.event,x:t.x,y:t.y+At,op:t.data.event.op,actions:t.data.event.actions}}))}].concat(Object(x.a)((e.children||[]).map((function(e){return t(e)})))))};function Dt(t){var e=t.lookuptable,n=t.nodes,c=t.parent,r=t.child,o=t.toggleAddNew,s=t.closeEditAction,l=t.setParentToAddTo,u=t.setLookuptable,d=t.addNew,f=t.editNode,y=t.editLink,O=(t.editRules,t.setParent),m=t.setChild,p=function(t,e){o(!1),m(e.data.event)},h=function(t,e){f(e.data)},v=function(t,e){y(e)};Object(a.useEffect)((function(){d||(O(),m())}),[d]),Object(a.useEffect)((function(){if(r&&r&&c){var t=Object(i.a)({},e);t[c]=t[c]||[];var n=Object.keys(t).reduce((function(e,n){if("root"===n)return Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,t[n]));var a=t[n]||[];return n==c?Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,[].concat(Object(x.a)(a),[r]))):-1!==a.map((function(t){return t.event})).indexOf(r.event)?Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,Object(x.a)(a.filter((function(t){return t.event!==r.event}))))):Object(i.a)(Object(i.a)({},e),{},Object(b.a)({},n,a))}),{});u(n)}}),[r,c]);var g=kt((function(t){var e=t.select("g#dragbox");t.call(vt.a().on("zoom",(function(t){e.attr("transform",t.transform)})))}),[]),N=function t(e,n){return!n[e]||n[e].length<=0?[]:[].concat(Object(x.a)(n[e]),Object(x.a)(n[e].reduce((function(e,a){return[].concat(Object(x.a)(e),Object(x.a)(t(a.event,n)))}),[])))},k=function(t){return!t||t.length<=0||t.length<=0||t[0].length<=0},w=kt((function(t){console.log("converting! toi hierarchy!");var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("in convert toi hierarchy!"),Tt={},Bt=[],Pt(t,t.root,e)}(e,n);console.log("done!");var s,u=pt.b(a,(function(t){return t.children})),d={},f=ht.a().nodeSize([210,286])(u),y=Object(j.a)(f.descendants());try{for(y.s();!(s=y.n()).done;){var m=s.value;d[m.data.event.event]={x:m.x,y:m.y}}}catch(T){y.e(T)}finally{y.f()}Bt=Bt.map((function(t){return{from:{name:t.from.event,x:d[t.from.event].x,y:d[t.from.event].y+Ct},to:{name:t.to.event,x:d[t.to.event].x,y:d[t.to.event].y+At,op:t.to.op,actions:t.to.actions}}}));var g=[].concat(Object(x.a)(Ft(f).reduce((function(t,e){var n=e.from,a=void 0===n?{}:n,c=e.to,r=void 0===c?[]:c,o=Array.isArray(r)?r:[r];return[].concat(Object(x.a)(t),Object(x.a)(o.map((function(t){return{from:a,to:t}}))))}),[])),Object(x.a)(Bt)),C=g.reduce((function(t,e){return Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},"".concat(e.from.name,"_").concat(e.to.name),{from:e.from.name,to:e.to.name,op:e.to.op,actions:e.to.actions,x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y}))}),{}),A=[],L=function(t){return t.from.x===t.to.x&&t.from.y>t.to.y},S=Object.keys(e).reduce((function(t,n){if("root"===n)return t;var a=e[n];return Object(i.a)(Object(i.a)({},t),a.reduce((function(t,e){return Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},e.event,n))}),{}))}),{});if(r){var I=[].concat(Object(x.a)(N(r.event,e).map((function(t){return t.event}))),[S[r.event],r.event]);A=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.each((function(t){-1==e.indexOf(t.data.name)&&n.push(t.data.name)})),n}(f,I)}t.selectAll("g#slide").data(f.descendants(),(function(t){return t.data.event.id})).join((function(t){var e=t.append("g").attr("id","slide").attr("transform",(function(t,e){return"translate(".concat(t.x,",").concat(t.y+20,")")}));e.append("circle").attr("id",(function(t){return t.data.name})).attr("cx",96).attr("cy",54).attr("r",54).style("stroke","black").style("stroke-width","1.87px").style("fill","white").on("dblclick",(function(t,e){return h(0,e)})),e.append("text").attr("x",96).attr("y",59).style("text-anchor","middle").text((function(t){return t.data.name})).on("dblclick",(function(t,e){return h(0,e)}))}),(function(t){t.transition().duration(Lt).attr("transform",(function(t,e){return"translate(".concat(t.x,",").concat(t.y+20,")")})),t.select("circle").on("dblclick",(function(t,e){return h(0,e)})),t.select("text").on("dblclick",(function(t,e){return h(0,e)}))}),(function(t){return t.call((function(t){return t.remove().transition().duration(Lt).delay((function(t,e){return 100*e})).attr("transform",(function(t,e){return"translate(".concat(50*e,",50)")})).style("opacity",0).remove()}))})),t.selectAll("path#link").data(g,(function(t){return"".concat(t.from.name).concat(t.to.name).concat(t.to.actions.join(","))})).join((function(t){t.append("path").attr("id","link").attr("d",(function(t){return L(t)?Et(t.from.x+96,t.from.y+At,t.to.x+96,t.to.y):It(t.from.x+96,t.from.y+At+8,t.to.x+96,t.to.y-8)})).style("stroke","#000").style("opacity",1).style("stroke-width",2.5).style("fill","none").transition().duration(Lt).style("opacity",1)}),(function(t){return t}),(function(t){return t.call((function(t){return t.remove()}))})).transition().duration(Lt).attrTween("d",(function(t){var e=(w.current.last||{})["".concat(t.from.name,"_").concat(t.to.name)],n=e?It(e.x1+96,e.y1+At+8,e.x2+96,e.y2-8):It(t.from.x+96,t.from.y+At+8,t.to.x+96,t.to.y-8),a=L(t)?Et(t.from.x+96,t.from.y+At,t.to.x+96,t.to.y):It(t.from.x+96,t.from.y+At+8,t.to.x+96,t.to.y-8);return Object(gt.a)(n,a)})).on("end",(function(){w.current.last=C})),t.selectAll("g#link").data(g,(function(t){return"".concat(t.from.name).concat(t.to.name).concat(t.to.actions.join(",")).concat(t.to.op)})).join((function(t){var e=t.append("g").attr("id","link").attr("transform",(function(t){return"translate(".concat(t.from.x+96-(t.from.x-t.to.x)/2,", ").concat(t.to.y+(t.from.y+At-t.to.y)/2,")")}));e.append("circle").attr("id","link").style("opacity",0).style("fill","rgb(243, 244, 246)").style("stroke","none").attr("cx",0).attr("cy",-70).attr("r",10).transition().duration(Lt).style("opacity",1),e.append("text").attr("id","rule").style("text-anchor","middle").style("font-weight","bold").style("font-size","10px").attr("x",0).attr("y",-70).text((function(t){return t.to.op})).on("click",(function(t,e){return v(0,e)})),e.append("circle").attr("id","label").style("fill","rgb(243, 244, 246)").style("opacity",(function(t){return t.to.actions&&t.to.actions.length>0?1:0})).style("stroke","none").attr("cx",(function(t){return L(t)?144:0})).attr("cy",0).attr("r",20).on("click",(function(t,e){return v(0,e)})),e.append("text").attr("id","action").style("font-size","10px").style("text-anchor","middle").attr("x",(function(t){return L(t)?144:0})).attr("y",0).text((function(t){return k(t.to.actions)?"+":_t(t.to.actions)})).on("click",(function(t,e){return v(0,e)}))}),(function(t){t.transition().duration(Lt).attr("transform",(function(t){return"translate(".concat(t.from.x+96-(t.from.x-t.to.x)/2,", ").concat(t.to.y+(t.from.y+At-t.to.y)/2,")")})),t.select("circle#label").style("opacity",(function(t){return t.to.actions&&t.to.actions.length>0?1:0})).on("click",(function(t,e){return v(0,e)})),t.select("text#action").text((function(t){return k(t.to.actions)?"+":_t(t.to.actions)})).on("click",(function(t,e){return v(0,e)})),t.select("text#rule").on("click",(function(t,e){return v(0,e)}))}),(function(t){return t.call((function(t){return t.remove()}))}));var E=function(t,e){var n;r&&-1==A.indexOf(e.data.event.event)||(n=e,o(!r),O(n.data.event.event),l(n.data.event.event))};t.selectAll("g#target").data(f.descendants(),(function(t){return"".concat(t.data.name).concat(r&&t.data.name==r?"_":"")})).join((function(t){var e=t.append("g").attr("id","target").attr("transform",(function(t){return"translate(".concat(t.x-96,", ").concat(t.y,")")}));e.append("circle").attr("id","bigtotarget").attr("cx",wt).attr("cy",21).attr("r",8).style("fill","#fff").style("stroke","#762bae").attr("stroke-width",2.5).on("click",p),e.append("circle").attr("id","smalltotarget").attr("cx",wt).attr("cy",21).attr("r",3).style("fill","#ae2b4d").style("stroke","#6F67CC").attr("stroke-width",2.5).on("click",p),e.append("circle").attr("id","bigfromtarget").attr("cx",wt).attr("cy",126).attr("r",8).style("fill",(function(t){return c&&c==t.data.name?"#ae2b4d":"white"})).style("stroke","black").attr("stroke-width",2.5).on("click",E),e.append("circle").attr("id","smallfromtarget").attr("cx",wt).attr("cy",126).style("opacity",r?1:0).attr("r",3).style("fill",(function(t){return c&&c==t.data.name?"#ae2b4d":"white"})).style("stroke","#cc6767").attr("stroke-width",2.5).on("click",E),e.append("text").attr("id","smalltotarget").attr("x",wt).attr("y",131).text("+").style("text-anchor","middle").style("fill","black").on("click",E)}),(function(t){t.transition().duration(Lt).attr("transform",(function(t){return"translate(".concat(t.x-96,", ").concat(t.y,")")})),t.selectAll("circle#bigtotarget").style("fill",(function(t){return r&&r==t.data.name?"red":"white"})).style("stroke",(function(t){return r&&r==t.data.name?"white":"#762bae"})).on("click",p),t.selectAll("circle#smalltotarget").style("fill",(function(t){return r&&r==t.data.name?"red":"#ae2b4d"})).style("stroke",(function(t){return r&&r==t.data.name?"white":"#6F67CC"})).on("click",p),t.selectAll("circle#bigfromtarget").style("stroke",r?"#ae2b4d":"black").style("fill",(function(t){return c&&c==t.data.name?"#ae2b4d":"white"})).on("click",E).transition().duration(Lt).attr("r",(function(t){return-1==A.indexOf(t.data.name)?8:12})),t.selectAll("circle#smallfromtarget").style("opacity",r?1:0).style("fill",(function(t){return c&&c==t.data.name?"#ae2b4d":"white"})).on("click",E).transition().duration(Lt).attr("r",(function(t){return-1==A.indexOf(t.data.name)?3:5})).attr("class",(function(t){return-1==A.indexOf(t.data.name)?"":"pulse"})),t.selectAll("text#smalltotarget").style("opacity",r?0:1).on("click",E)}),(function(t){return t.call((function(t){return t.remove()}))}))}),[r,c,e,n]);return Object(ut.jsx)("div",{children:Object(ut.jsx)("main",{children:Object(ut.jsx)("div",{className:"flex justify-center items-center flex-col",children:Object(ut.jsx)("svg",{onClick:function(){return m(),O(),o(!1),void s()},ref:g,width:"100vw",height:"100vh",children:Object(ut.jsx)("g",{id:"dragbox",children:Object(ut.jsx)("g",{onClick:function(t){t.stopPropagation()},ref:w})})})})})})}var Rt=function(){var t=Object(l.b)(),e=Object(l.c)(nt),n=Object(l.c)(rt),c=Object(l.c)(L),r=Object(l.c)(at).id,o=Object(l.c)(ct),u=Object(l.c)(ot),j=Object(l.c)(it),y=Object(l.c)(st),O=function(e){t(function(t){return function(){var e=Object(f.a)(d.a.mark((function e(n,a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a().layer.layers,r=Object.keys(c).reduce((function(t,e){var n=c[e].lut,r=c[e].nodesById,o=Object.keys(n).reduce((function(t,e){return"root"===e?t:Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},e,n[e]))}),{}),s=Object.keys(o).reduce((function(t,e){var n=r[e].type;return"button"===n?[].concat(Object(x.a)(t),[Object(i.a)(Object(i.a)({id:e},r[e]),{},{subscription:"/press",data:o[e].map((function(t){return t.op})),rules:o[e].map((function(t){return{rule:{operator:"equals",operand:t.op},actions:t.actions,next:t.event}}))})]):"speech"===n?[].concat(Object(x.a)(t),[Object(i.a)(Object(i.a)({id:e},r[e]),{},{subscription:"/speech",rules:o[e].map((function(t){return t.op?{rule:{operator:"contains",operand:Array.isArray(t.op)?t.op:t.op.split(","),default:t.default},actions:t.actions,next:t.event}:{rule:{operator:"any",default:!0},actions:t.actions,next:t.event}}))})]):t}),[]);return[].concat(Object(x.a)(t),[{id:e,start:{actions:[[]],event:a().layer.layers[e].nodes[0]},events:s}])}),[]),console.log(JSON.stringify(r,null,4)),e.next=5,F.a.post("/author/save").set("Content-Type","application/json").send({name:t,layer:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}(e)),N(!1)},m=Object(a.useState)(!1),v=Object(s.a)(m,2),g=v[0],N=v[1],w=Object(a.useState)(""),A=Object(s.a)(w,2),S=A[0],I=A[1],E=Object(a.useState)(""),T=Object(s.a)(E,2),B=T[0],P=T[1];return Object(a.useEffect)((function(){t((function(t){F.a.get("/author/authored").then((function(e){var n=e.body.layers;t(Q(n))}))}));var e,n=new URLSearchParams(window.location.search),a=Object.fromEntries(n.entries()).layers,c=void 0===a?null:a;c&&(t((e=c,function(t){F.a.get("/event/layers").query({layer:e}).then((function(e){var n=(e.body||[]).map((function(t,e){var n=t.events;return{nodes:void 0===n?[]:n,layer:t.layerid||"layer".concat(e)}}));t(q(n))})).catch((function(t){console.log("error resetting events",t)}))})),P(c))}),[]),Object(ut.jsxs)("div",{children:[g&&Object(ut.jsx)("div",{className:"absolute flex w-screen h-screen  items-center justify-center",children:Object(ut.jsxs)("div",{className:"flex flex-col shadow-xl p-4 bg-white rounded flex justify-items-end items-end ",children:[Object(ut.jsx)("button",{onClick:function(){return N(!g)},className:"rounded-full h-6 w-6 bg-pink-500 text-white",children:"x"}),Object(ut.jsxs)("div",{className:" flex flex-row p-4 items-center",children:[Object(ut.jsx)("input",{type:"text",className:"p-4 mr-4",placeholder:"filename",value:S,onChange:function(t){return I(t.target.value)}}),Object(ut.jsx)("button",{onClick:function(){return O(S)},className:"rounded-full h-10 w-10 bg-blue-500 text-white",children:"save"})]})]})}),Object(ut.jsxs)("div",{className:"bg-blue-500 text-white w-screen h-12 fixed flex items-center",children:[Object(ut.jsxs)("div",{className:"flex flex-grow pl-4 text-xs",children:[Object(ut.jsx)("div",{onClick:function(){return N(!g)},children:"SAVE & EXPORT"}),B&&Object(ut.jsx)("a",{className:"flex flex-grow pl-4 text-xs",target:"_blank",href:"../?layers=".concat(B),children:"\u25b6"})]}),Object(ut.jsxs)("div",{className:"flex justify-end items-center mr-8",children:[Object(ut.jsx)("div",{className:"text-xs p-2",children:"LOAD"}),u.map((function(t){return Object(ut.jsx)("a",{className:"p-2 text-white text-xs",href:encodeURI("author?layers=".concat(t)),children:t},t)}))]})]}),function(){var e=j.map((function(e){var n=e===y;return Object(ut.jsx)("div",{className:"p-2 text-xs ".concat(n?"font-bold":"text-gray-400"),onClick:function(){return t(V(e))},children:e},e)}));return Object(ut.jsxs)("div",{className:"h-10 flex flex-row  mt-12 w-screen bg-black text-white  items-center",children:[e,Object(ut.jsx)("div",{className:"ml-4 p-2 text-xs flex items-center justify-center rounded-full bg-white text-black w-4 h-4",onClick:function(){t(H())},children:"+"},"add")]})}(),function(){if(n)return Object(ut.jsx)(Dt,{lookuptable:n,nodes:e,addNew:c,parent:r,child:o,setLookuptable:function(e){return t(function(t){return function(e){e(G(t))}}(e))},toggleAddNew:function(e){return t(h(e))},closeEditAction:function(){return t(k())},setParentToAddTo:function(e){return t(function(t){return function(e){e(K(t))}}(e))},editNode:function(e){return t(function(t){return function(e,n){e(p(t)),e(C(!0))}}(e))},editLink:function(e){return t(k(e))},setParent:function(e){return t(K(e))},setChild:function(e){return t(W(e))}})}()]})};var zt=function(){var t=Object(l.b)(),e=Object(l.c)(L),n=Object(l.c)(A),a=function(){t(h(!1)),t(k())};return Object(ut.jsx)("div",{className:"App w-screen",children:Object(ut.jsxs)("div",{className:"flex flex-row shadow bg-gray-100",children:[n&&Object(ut.jsx)("div",{className:"absolute flex w-screen h-screen  items-center justify-center",style:{zIndex:30},children:Object(ut.jsx)("div",{className:"flex flex-grow absolute shadow-xl p-2 bg-white rounded overflow-auto",style:{maxHeight:"80vh",width:"745px"},children:Object(ut.jsx)(mt,{onClose:a})})}),e&&Object(ut.jsx)("div",{className:"absolute flex w-screen h-screen  items-center justify-center",style:{zIndex:30},children:Object(ut.jsx)("div",{className:"shadow-xl p-2 bg-white rounded overflow-auto",style:{maxHeight:"80vh",width:"900px"},children:Object(ut.jsx)(Ot,{onClose:a})})}),Object(ut.jsx)("div",{className:"flex flex-grow",children:Object(ut.jsx)(Rt,{})})]})})},Jt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,111)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))},Ut=Object(y.a)({reducer:{creator:P,layer:lt}});o.a.render(Object(ut.jsx)(c.a.StrictMode,{children:Object(ut.jsx)(l.a,{store:Ut,children:Object(ut.jsx)(zt,{})})}),document.getElementById("root")),Jt()},79:function(t,e,n){},80:function(t,e,n){},98:function(t,e){}},[[105,1,2]]]);
//# sourceMappingURL=main.b6d09c62.chunk.js.map