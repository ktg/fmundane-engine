(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.OBBEngine=t():e.OBBEngine=t()})(this,function(){var e=Math.PI,t=Math.sqrt,r=Math.LN2,a=Math.log,o=Math.pow,n=Math.abs,i=Math.exp,l=Math.expm1,s=Number.parseInt,u=Math.max,c=Math.floor,d=Math.ceil,p=Math.min;return function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=134)}([function(e,t,r){'use strict';var a=r(2),o=r(21),n=r(12),i=r(13),l=r(18),s='prototype',u=function e(t,r,u){var c=t&e.F,d=t&e.G,p=t&e.S,_=t&e.P,y=t&e.B,v=d?a:p?a[r]||(a[r]={}):(a[r]||{})[s],g=d?o:o[r]||(o[r]={}),m=g[s]||(g[s]={}),f,b,x,h;for(f in d&&(u=r),u)b=!c&&v&&void 0!==v[f],x=(b?v:u)[f],h=y&&b?l(x,a):_&&'function'==typeof x?l(Function.call,x):x,v&&i(v,f,x,t&e.U),g[f]!=x&&n(g,f,h),_&&m[f]!=x&&(m[f]=x)};a.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){'use strict';var a=r(4);e.exports=function(e){if(!a(e))throw TypeError(e+' is not an object!');return e}},function(e){'use strict';var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e){'use strict';e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){'use strict';e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,r){'use strict';var a=r(51)('wks'),o=r(32),n=r(2).Symbol,i='function'==typeof n,l=e.exports=function(e){return a[e]||(a[e]=i&&n[e]||(i?n:o)('Symbol.'+e))};l.store=a},function(e,t,r){'use strict';e.exports=!r(3)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e,t,r){'use strict';var a=r(1),o=r(96),n=r(22),i=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(a(e),t=n(t,!0),a(r),o)try{return i(e,t,r)}catch(t){}if('get'in r||'set'in r)throw TypeError('Accessors not supported!');return'value'in r&&(e[t]=r.value),e}},function(e,t,r){'use strict';var a=r(24);e.exports=function(e){return 0<e?p(a(e),9007199254740991):0}},function(e,t,r){'use strict';var a=r(23);e.exports=function(e){return Object(a(e))}},function(e){'use strict';e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e){'use strict';var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},function(e,t,r){'use strict';var a=r(7),o=r(31);e.exports=r(6)?function(e,t,r){return a.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){'use strict';var a=r(2),o=r(12),n=r(11),i=r(32)('src'),l='toString',s=Function[l],u=(''+s).split(l);r(21).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,l){var s='function'==typeof r;s&&(n(r,'name')||o(r,'name',t));e[t]===r||(s&&(n(r,i)||o(r,i,e[t]?''+e[t]:u.join(t+''))),e===a?e[t]=r:l?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,l,function(){return'function'==typeof this&&this[i]||s.call(this)})},function(e,t,r){'use strict';var a=r(0),o=r(3),n=r(23),i=/"/g,l=function(e,t,r,a){var o=n(e)+'',l='<'+t;return''!==r&&(l+=' '+r+'="'+(a+'').replace(i,'&quot;')+'"'),l+'>'+o+'</'+t+'>'};e.exports=function(e,t){var r={};r[e]=t(l),a(a.P+a.F*o(function(){var t=''[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),'String',r)}},function(e,t,r){'use strict';var a=r(47),o=r(23);e.exports=function(e){return a(o(e))}},function(e,t,r){'use strict';var a=r(48),o=r(31),n=r(15),i=r(22),l=r(11),s=r(96),u=Object.getOwnPropertyDescriptor;t.f=r(6)?u:function(e,t){if(e=n(e),t=i(t,!0),s)try{return u(e,t)}catch(t){}return l(e,t)?o(!a.f.call(e,t),e[t]):void 0}},function(e,t,r){'use strict';var a=r(11),o=r(9),n=r(68)('IE_PROTO'),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),a(e,n)?e[n]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,r){'use strict';var a=r(10);e.exports=function(e,t,r){return(a(e),void 0===t)?e:1===r?function(r){return e.call(t,r)}:2===r?function(r,a){return e.call(t,r,a)}:3===r?function(r,a,o){return e.call(t,r,a,o)}:function(){return e.apply(t,arguments)}}},function(e){'use strict';var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t,r){'use strict';var a=r(3);e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e){'use strict';var t=e.exports={version:'2.5.1'};'number'==typeof __e&&(__e=t)},function(e,t,r){'use strict';var a=r(4);e.exports=function(e,t){if(!a(e))return e;var r,o;if(t&&'function'==typeof(r=e.toString)&&!a(o=r.call(e)))return o;if('function'==typeof(r=e.valueOf)&&!a(o=r.call(e)))return o;if(!t&&'function'==typeof(r=e.toString)&&!a(o=r.call(e)))return o;throw TypeError('Can\'t convert object to primitive value')}},function(e){'use strict';e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e){'use strict';e.exports=function(e){return isNaN(e=+e)?0:(0<e?c:d)(e)}},function(e,t,r){'use strict';var a=r(0),o=r(21),n=r(3);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),a(a.S+a.F*n(function(){r(1)}),'Object',i)}},function(e,t,r){'use strict';var a=r(18),o=r(47),n=r(9),i=r(8),l=r(85);e.exports=function(e,t){var r=1==e,s=4==e,u=6==e,c=t||l;return function(t,l,d){for(var p=n(t),_=o(p),y=a(l,d,3),v=i(_.length),g=0,m=r?c(t,v):2==e?c(t,0):void 0,f,b;v>g;g++)if((5==e||u||g in _)&&(f=_[g],b=y(f,g,p),e))if(r)m[g]=b;else if(b)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:m.push(f);}else if(s)return!1;return u?-1:3==e||s?s:m}}},function(e,t,r){'use strict';if(r(6)){var a=r(33),o=r(2),n=r(3),i=r(0),l=r(61),s=r(91),u=r(18),d=r(39),p=r(31),_=r(12),y=r(41),v=r(24),g=r(8),m=r(122),f=r(35),b=r(22),x=r(11),h=r(49),T=r(4),C=r(9),k=r(82),E=r(36),S=r(17),P=r(37).f,N=r(84),O=r(32),A=r(5),R=r(26),I=r(52),F=r(59),w=r(87),L=r(45),D=r(56),j=r(38),M=r(86),U=r(112),G=r(7),V=r(16),Y=G.f,B=V.f,W=o.RangeError,H=o.TypeError,q=o.Uint8Array,X='ArrayBuffer',K='Shared'+X,z='BYTES_PER_ELEMENT',$='prototype',J=Array[$],Z=s.ArrayBuffer,Q=s.DataView,ee=R(0),te=R(2),re=R(3),ae=R(4),oe=R(5),ne=R(6),ie=I(!0),le=I(!1),se=w.values,ue=w.keys,ce=w.entries,de=J.lastIndexOf,pe=J.reduce,_e=J.reduceRight,ye=J.join,ve=J.sort,ge=J.slice,me=J.toString,fe=J.toLocaleString,be=A('iterator'),xe=A('toStringTag'),he=O('typed_constructor'),Te=O('def_constructor'),Oe=l.CONSTR,Ce=l.TYPED,ke=l.VIEW,Ee='Wrong length!',Se=R(1,function(e,t){return Ie(F(e,e[Te]),t)}),Pe=n(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ne=!!q&&!!q[$].set&&n(function(){new q(1).set({})}),Ae=function(e,t){var r=v(e);if(0>r||r%t)throw W('Wrong offset!');return r},Re=function(e){if(T(e)&&Ce in e)return e;throw H(e+' is not a typed array!')},Ie=function(e,t){if(!(T(e)&&he in e))throw H('It is not a typed array constructor!');return new e(t)},Fe=function(e,t){return we(F(e,e[Te]),t)},we=function(e,t){for(var r=0,a=t.length,o=Ie(e,a);a>r;)o[r]=t[r++];return o},Le=function(e,t,r){Y(e,t,{get:function(){return this._d[r]}})},De=function(e){var t=C(e),r=arguments.length,a=1<r?arguments[1]:void 0,o=a!==void 0,n=N(t),l,i,s,c,d,p;if(n!=void 0&&!k(n)){for(p=n.call(t),s=[],l=0;!(d=p.next()).done;l++)s.push(d.value);t=s}for(o&&2<r&&(a=u(a,arguments[2],2)),l=0,i=g(t.length),c=Ie(this,i);i>l;l++)c[l]=o?a(t[l],l):t[l];return c},je=function(){for(var e=0,t=arguments.length,r=Ie(this,t);t>e;)r[e]=arguments[e++];return r},Me=!!q&&n(function(){fe.call(new q(1))}),Ue=function(){return fe.apply(Me?ge.call(Re(this)):Re(this),arguments)},Ge={copyWithin:function(e,t){return U.call(Re(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return ae(Re(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return M.apply(Re(this),arguments)},filter:function(e){return Fe(this,te(Re(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return oe(Re(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ne(Re(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){ee(Re(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return le(Re(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ie(Re(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return ye.apply(Re(this),arguments)},lastIndexOf:function(){return de.apply(Re(this),arguments)},map:function(e){return Se(Re(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return pe.apply(Re(this),arguments)},reduceRight:function(){return _e.apply(Re(this),arguments)},reverse:function(){for(var e=this,t=Re(e).length,r=c(t/2),a=0,o;a<r;)o=e[a],e[a++]=e[--t],e[t]=o;return e},some:function(e){return re(Re(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return ve.call(Re(this),e)},subarray:function(e,t){var r=Re(this),a=r.length,o=f(e,a);return new(F(r,r[Te]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,g((t===void 0?a:f(t,a))-o))}},Ve=function(e,t){return Fe(this,ge.call(Re(this),e,t))},Ye=function(e){Re(this);var t=Ae(arguments[1],1),r=this.length,a=C(e),o=g(a.length),n=0;if(o+t>r)throw W(Ee);for(;n<o;)this[t+n]=a[n++]},Be={entries:function(){return ce.call(Re(this))},keys:function(){return ue.call(Re(this))},values:function(){return se.call(Re(this))}},We=function(e,t){return T(e)&&e[Ce]&&'symbol'!=typeof t&&t in e&&+t+''==t+''},He=function(e,t){return We(e,t=b(t,!0))?p(2,e[t]):B(e,t)},qe=function(e,t,r){return We(e,t=b(t,!0))&&T(r)&&x(r,'value')&&!x(r,'get')&&!x(r,'set')&&!r.configurable&&(!x(r,'writable')||r.writable)&&(!x(r,'enumerable')||r.enumerable)?(e[t]=r.value,e):Y(e,t,r)};Oe||(V.f=He,G.f=qe),i(i.S+i.F*!Oe,'Object',{getOwnPropertyDescriptor:He,defineProperty:qe}),n(function(){me.call({})})&&(me=fe=function(){return ye.call(this)});var Xe=y({},Ge);y(Xe,Be),_(Xe,be,Be.values),y(Xe,{slice:Ve,set:Ye,constructor:function(){},toString:me,toLocaleString:Ue}),Le(Xe,'buffer','b'),Le(Xe,'byteOffset','o'),Le(Xe,'byteLength','l'),Le(Xe,'length','e'),Y(Xe,xe,{get:function(){return this[Ce]}}),e.exports=function(e,t,r,s){s=!!s;var u=e+(s?'Clamped':'')+'Array',c=o[u],p=c||{},y=c&&S(c),v=!c||!l.ABV,f={},b=c&&c[$],x=function(r,a){var o=r._d;return o.v['get'+e](a*t+o.o,Pe)},O=function(r,a,o){var n=r._d;s&&(o=0>(o=Math.round(o))?0:255<o?255:255&o),n.v['set'+e](a*t+n.o,o,Pe)},C=function(e,t){Y(e,t,{get:function(){return x(this,t)},set:function(e){return O(this,t,e)},enumerable:!0})};v?(c=r(function(e,r,a,o){d(e,c,u,'_d');var n=0,i=0,l,s,p,y;if(!T(r))p=m(r),s=p*t,l=new Z(s);else if(r instanceof Z||(y=h(r))==X||y==K){l=r,i=Ae(a,t);var v=r.byteLength;if(void 0===o){if(v%t)throw W(Ee);if(s=v-i,0>s)throw W(Ee)}else if(s=g(o)*t,s+i>v)throw W(Ee);p=s/t}else return Ce in r?we(c,r):De.call(c,r);for(_(e,'_d',{b:l,o:i,l:s,e:p,v:new Q(l)});n<p;)C(e,n++)}),b=c[$]=E(Xe),_(b,'constructor',c)):(!n(function(){c(1)})||!n(function(){new c(-1)})||!D(function(e){new c,new c(null),new c(1.5),new c(e)},!0))&&(c=r(function(e,r,a,o){d(e,c,u);var n;return T(r)?r instanceof Z||(n=h(r))==X||n==K?void 0===o?void 0===a?new p(r):new p(r,Ae(a,t)):new p(r,Ae(a,t),o):Ce in r?we(c,r):De.call(c,r):new p(m(r))}),ee(y===Function.prototype?P(p):P(p).concat(P(y)),function(e){e in c||_(c,e,p[e])}),c[$]=b,!a&&(b.constructor=c));var k=b[be],N=!!k&&('values'==k.name||k.name==void 0),A=Be.values;_(c,he,!0),_(b,Ce,u),_(b,ke,!0),_(b,Te,c),(s?new c(1)[xe]!=u:!(xe in b))&&Y(b,xe,{get:function(){return u}}),f[u]=c,i(i.G+i.W+i.F*(c!=p),f),i(i.S,u,{BYTES_PER_ELEMENT:t}),i(i.S+i.F*n(function(){p.of.call(c,1)}),u,{from:De,of:je}),z in b||_(b,z,t),i(i.P,u,Ge),j(u),i(i.P+i.F*Ne,u,{set:Ye}),i(i.P+i.F*!N,u,Be),a||b.toString==me||(b.toString=me),i(i.P+i.F*n(function(){new c(1).slice()}),u,{slice:Ve}),i(i.P+i.F*(n(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!n(function(){b.toLocaleString.call([1,2])})),u,{toLocaleString:Ue}),L[u]=N?k:A,a||N||_(b,be,A)}}else e.exports=function(){}},function(e,t,r){'use strict';var a=r(117),o=r(0),n=r(51)('metadata'),i=n.store||(n.store=new(r(120))),l=function(e,t,r){var o=i.get(e);if(!o){if(!r)return;i.set(e,o=new a)}var n=o.get(t);if(!n){if(!r)return;o.set(t,n=new a)}return n};e.exports={store:i,map:l,has:function(e,t,r){var a=l(t,r,!1);return a!==void 0&&a.has(e)},get:function(e,t,r){var a=l(t,r,!1);return a===void 0?void 0:a.get(e)},set:function(e,t,r,a){l(r,a,!0).set(e,t)},keys:function(e,t){var r=l(e,t,!1),a=[];return r&&r.forEach(function(e,t){a.push(t)}),a},key:function(e){return e===void 0||'symbol'==typeof e?e:e+''},exp:function(e){o(o.S,'Reflect',e)}}},function(e,t,r){'use strict';var a=r(32)('meta'),o=r(4),n=r(11),i=r(7).f,l=0,s=Object.isExtensible||function(){return!0},u=!r(3)(function(){return s(Object.preventExtensions({}))}),c=function(e){i(e,a,{value:{i:'O'+ ++l,w:{}}})},d=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!o(e))return'symbol'==typeof e?e:('string'==typeof e?'S':'P')+e;if(!n(e,a)){if(!s(e))return'F';if(!t)return'E';c(e)}return e[a].i},getWeak:function(e,t){if(!n(e,a)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[a].w},onFreeze:function(e){return u&&d.NEED&&s(e)&&!n(e,a)&&c(e),e}}},function(e,t,r){'use strict';var a=r(5)('unscopables'),o=Array.prototype;o[a]==void 0&&r(12)(o,a,{}),e.exports=function(e){o[a][e]=!0}},function(e){'use strict';e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){'use strict';var t=0,r=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+r).toString(36))}},function(e){'use strict';e.exports=!1},function(e,t,r){'use strict';var a=r(98),o=r(69);e.exports=Object.keys||function(e){return a(e,o)}},function(e,t,r){'use strict';var a=r(24);e.exports=function(e,t){return e=a(e),0>e?u(e+t,0):p(e,t)}},function(e,t,r){'use strict';var a=r(1),o=r(99),n=r(69),i=r(68)('IE_PROTO'),l=function(){},s='prototype',u=function(){var e=r(66)('iframe'),t=n.length,a='<',o='>',i;for(e.style.display='none',r(70).appendChild(e),e.src='javascript:',i=e.contentWindow.document,i.open(),i.write(a+'script'+o+'document.F=Object'+a+'/script'+o),i.close(),u=i.F;t--;)delete u[s][n[t]];return u()};e.exports=Object.create||function(e,t){var r;return null===e?r=u():(l[s]=a(e),r=new l,l[s]=null,r[i]=e),void 0===t?r:o(r,t)}},function(e,t,r){'use strict';var a=r(98),o=r(69).concat('length','prototype');t.f=Object.getOwnPropertyNames||function(e){return a(e,o)}},function(e,t,r){'use strict';var a=r(2),o=r(7),n=r(6),i=r(5)('species');e.exports=function(e){var t=a[e];n&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},function(e){'use strict';e.exports=function(e,t,r,a){if(!(e instanceof t)||a!==void 0&&a in e)throw TypeError(r+': incorrect invocation!');return e}},function(e,t,r){'use strict';var a=r(18),o=r(110),n=r(82),i=r(1),l=r(8),s=r(84),u={},c={},d=e.exports=function(e,t,r,d,p){var _=p?function(){return e}:s(e),y=a(r,d,t?2:1),v=0,g,m,f,b;if('function'!=typeof _)throw TypeError(e+' is not iterable!');if(n(_)){for(g=l(e.length);g>v;v++)if(b=t?y(i(m=e[v])[0],m[1]):y(e[v]),b===u||b===c)return b;}else for(f=_.call(e);!(m=f.next()).done;)if(b=o(f,y,m.value,t),b===u||b===c)return b};d.BREAK=u,d.RETURN=c},function(e,t,r){'use strict';var a=r(13);e.exports=function(e,t,r){for(var o in t)a(e,o,t[o],r);return e}},function(e,t,r){'use strict';(function(){function e(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),a={NARRATIVE_OBJECT:'NarrativeObject',ATOM:'Atom',GROUP:'Group',LAYERED:'Layered'};t.NarrativeObjectTypes=a;var o={OUTPUT_SELECTION:'Output Selection',GROUP_SELECTION:'Group Selection',LAYER_SELECTION:'Layer Selection',INTERACTION:'Interaction'};t.FunctionTypes=o;var n=function(){function t(){var r=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];e(this,t),this.id=this.generateId(),this.type=a.NARRATIVE_OBJECT,this.annotations={},this.inputs=[],this.outputs=[],this.data=r,this.defaultOutput=void 0,this.setDefaultOutput(),this.hasPlayed=!1,this.outputSelectionFunction=void 0,this.sequencerTimes=[],t.instances.push(this)}return r(t,[{key:'destroy',value:function(){var e=t.instances.indexOf(this);-1!=e&&t.instances.splice(e,1)}},{key:'setId',value:function(e){this.id=e}},{key:'generateId',value:function(){for(var e=-1,r=0;r<t.instances.length;r++){var a=t.instances[r].id.split(t.idPrefix),o=s(a[a.length-1]);o>e&&(e=o)}return t.idPrefix+(e+1)}},{key:'addInput',value:function(e){-1==this.inputs.indexOf(e.id)&&this.inputs.push(e.id)}},{key:'removeInput',value:function(e){var t=this.inputs.indexOf(e.id);-1!=t&&(this.inputs.splice(t,1),e.removeOutput(this))}},{key:'addOutput',value:function(e){-1==this.outputs.indexOf(e.id)&&(this.outputs.push(e.id),this.setDefaultOutput(),e.addInput(this))}},{key:'removeOutput',value:function(e){var t=this.outputs.indexOf(e.id);-1!=t&&(this.outputs.splice(t,1),e.removeInput(this)),this.setDefaultOutput()}},{key:'getOutputIds',value:function(){return this.outputs}},{key:'setDefaultOutput',value:function(){var e=0>=arguments.length||void 0===arguments[0]?void 0:arguments[0];if(void 0!=e){var r=this.outputs.indexOf(e.id);if(-1!=r)return void(this.defaultOutput=e.id)}this.defaultOutput=0<this.outputs.length?this.outputs[0]:t.terminate}},{key:'getDefaultOutput',value:function(){return this.defaultOutput}},{key:'getNonDefaultOutputs',value:function(){var e=this;return 1<this.outputs.length?this.outputs.filter(function(t){return t!=e.defaultOutput}):[t.terminate]}},{key:'setOutputSelectionFunction',value:function(e,t){void 0!=e&&(this.outputSelectionFunction=e.bind(this)),this.data[o.OUTPUT_SELECTION]=t}},{key:'resetOutputSelectionFunction',value:function(){this.outputSelectionFunction=void 0,this.data[o.OUTPUT_SELECTION]=void 0}},{key:'selectOutput',value:function(e){var t=this.defaultOutput;if(void 0!=this.outputSelectionFunction){var r=this.outputSelectionFunction(e,this,this.defaultOutput,this.outputs),a=e.getNarrativeObject(r);void 0!=a&&(t=r)}return t}},{key:'addAnnotation',value:function(e,t,r){this.annotations.hasOwnProperty(e)||(this.annotations[e]={}),this.annotations[e][t]=r}},{key:'removeAnnotation',value:function(e,t){this.annotations.hasOwnProperty(e)&&(this.annotations[e].hasOwnProperty(t)&&delete this.annotations[e][t],0==Object.keys(this.annotations[e]).length&&delete this.annotations[e])}},{key:'hasAnnotation',value:function(e,t){return this.annotations.hasOwnProperty(e)&&this.annotations[e].hasOwnProperty(t)}},{key:'getAnnotationValue',value:function(e,t){return this.hasAnnotation(e,t)?this.annotations[e][t]:0}},{key:'getAnnotationValues',value:function(e,t){for(var r=[],a=0;a<t.length;a++)r.push(this.getAnnotationValue(e,t[a]));return r}},{key:'initialise',value:function(){alert('Not Implemented')}},{key:'process',value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt('return',new Promise(function(e){alert('Not Implemented'),e()}));case 1:case'end':return e.stop();}},e,this)})},{key:'wait',value:function(e){return new Promise(function(t){setTimeout(function(){e(),t()},0)})}}]),t}();t['default']=n,n.terminate='terminate',n.instances=[],n.idPrefix='no:'}).call(t,r(65))},function(e,t,r){'use strict';var a=r(7).f,o=r(11),n=r(5)('toStringTag');e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,n)&&a(e,n,{configurable:!0,value:t})}},function(e,t,r){'use strict';var a=r(0),o=r(23),n=r(3),i=r(72),l='['+i+']',s='\u200B\x85',u=RegExp('^'+l+l+'*'),c=RegExp(l+l+'*$'),d=function(e,t,r){var o={},l=n(function(){return!!i[e]()||s[e]()!=s}),u=o[e]=l?t(p):i[e];r&&(o[r]=u),a(a.P+a.F*l,'String',o)},p=d.trim=function(e,t){return e=o(e)+'',1&t&&(e=e.replace(u,'')),2&t&&(e=e.replace(c,'')),e};e.exports=d},function(e){'use strict';e.exports={}},function(e,t,r){'use strict';var a=r(4);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError('Incompatible receiver, '+t+' required!');return e}},function(e,t,r){'use strict';var a=r(19);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==a(e)?e.split(''):Object(e)}},function(e,t){'use strict';t.f={}.propertyIsEnumerable},function(e,t,r){'use strict';var a=r(19),o=r(5)('toStringTag'),n='Arguments'==a(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,r,l;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(r=i(t=Object(e),o))?r:n?a(t):'Object'==(l=a(t))&&'function'==typeof t.callee?'Arguments':l}},function(e,t,r){'use strict';(function(){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},s=r(42),c=a(s),d=r(92),_=a(d),y=1,v=function(e){function t(e){var r=1>=arguments.length||void 0===arguments[1]?0:arguments[1],a=2>=arguments.length||void 0===arguments[2]?void 0:arguments[2],n=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];o(this,t),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,n),this.type=s.NarrativeObjectTypes.ATOM,this.flowPackage=e,this.interactions=[],this.startTime=r,this.endTime=a,this.duration=void 0,this.waitBeforeStartDuration=0}return n(t,e),i(t,[{key:'initialise',value:function(){void 0==this.flowPackage?console.log('Flow Package is undefined. All atoms must have a flow package.'):(this.startTime=p(this.startTime,this.flowPackage.duration),this.endTime=void 0==this.endTime?this.flowPackage.duration:p(this.endTime,this.flowPackage.duration),this.duration=this.endTime-this.startTime)}},{key:'process',value:regeneratorRuntime.mark(function e(t,r,a,o){var n=4>=arguments.length||void 0===arguments[4]||arguments[4],l,i,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log('Process Atom Started'),this.hasPlayed=!0,a(this,o),l=0;l<this.interactions.length;l++)this.interactions[l].resetOutcomeOnStart&&this.interactions[l].resetOutcome();if(!(n&&this.hasInteractions())){e.next=13;break}console.log('Atom Wait For Interaction Start'),i=this.getFinalInteractionId();case 7:if(r.getInteraction(i).isComplete()){e.next=12;break}return e.next=10,this.wait(t);case 10:e.next=7;break;case 12:console.log('Atom Wait For Interaction Finish');case 13:if(!r.graph.processedMaxNarrativeObjects()){e.next=17;break}return r.graph.resetProcessCount(),e.next=17,this.wait(t);case 17:if(s=this.selectOutput(r),s==c['default'].terminate){e.next=22;break}if(u=r.getNarrativeObject(s),void 0==u){e.next=22;break}return e.delegateYield(u.process(t,r,a,o),'t0',22);case 22:console.log('Process Atom Finished');case 23:case'end':return e.stop();}},e,this)})},{key:'getFlowPackage',value:function(){return this.flowPackage}},{key:'setInPointTime',value:function(e){e>this.endTime&&(e=this.endTime),this.startTime=e}},{key:'setOutPointTime',value:function(e){e<this.startTime&&(e=this.startTime),this.endTime=e}},{key:'addInteraction',value:function(e,t,r,a){t>this.duration-y&&(t=this.duration-y);var o=u(e,t),n=new _['default'](e,o-e,r,a);return this.interactions.push(n),this.interactions.sort(function(e,t){return e.endTime()>t.endTime()?1:e.endTime()<t.endTime()?-1:0}),n}},{key:'removeInteraction',value:function(e){var t=this.interactions.indexOf(e);return-1!=t&&(this.interactions.splice(t,1),!0)}},{key:'getInteraction',value:function(e){for(var t=0;t<this.interactions.length;t++)if(this.interactions[t].id==e)return this.interactions[t]}},{key:'hasInteractions',value:function(){return 0<this.interactions.length}},{key:'getInteractions',value:function(){return this.interactions}},{key:'getFinalInteractionId',value:function(){return this.hasInteractions()?this.interactions[this.interactions.length-1].id:-1}},{key:'setWaitBeforeStartDuration',value:function(e){this.waitBeforeStartDuration=u(0,e)}}]),t}(c['default']);t['default']=v,e.exports=t['default']}).call(t,r(65))},function(e,t,r){'use strict';var a=r(2),o='__core-js_shared__',n=a[o]||(a[o]={});e.exports=function(e){return n[e]||(n[e]={})}},function(e,t,r){'use strict';var a=r(15),o=r(8),n=r(35);e.exports=function(e){return function(t,r,i){var l=a(t),s=o(l.length),u=n(i,s),c;if(e&&r!=r){for(;s>u;)if(c=l[u++],c!=c)return!0;}else for(;s>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}}},function(e,t){'use strict';t.f=Object.getOwnPropertySymbols},function(e,t,r){'use strict';var a=r(19);e.exports=Array.isArray||function(e){return'Array'==a(e)}},function(e,t,r){'use strict';var a=r(4),o=r(19),n=r(5)('match');e.exports=function(e){var t;return a(e)&&((t=e[n])===void 0?'RegExp'==o(e):!!t)}},function(e,t,r){'use strict';var a=r(5)('iterator'),o=!1;try{var n=[7][a]();n['return']=function(){o=!0},Array.from(n,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:r=!0}},n[a]=function(){return i},e(n)}catch(t){}return r}},function(e,t,r){'use strict';var a=r(1);e.exports=function(){var e=a(this),t='';return e.global&&(t+='g'),e.ignoreCase&&(t+='i'),e.multiline&&(t+='m'),e.unicode&&(t+='u'),e.sticky&&(t+='y'),t}},function(e,t,r){'use strict';var a=r(12),o=r(13),n=r(3),i=r(23),l=r(5);e.exports=function(e,t,r){var s=l(e),u=r(i,s,''[e]),c=u[0],d=u[1];n(function(){var t={};return t[s]=function(){return 7},7!=''[e](t)})&&(o(String.prototype,e,c),a(RegExp.prototype,s,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,r){'use strict';var a=r(1),o=r(10),n=r(5)('species');e.exports=function(e,t){var r=a(e).constructor,i;return r===void 0||(i=a(r)[n])==void 0?t:o(i)}},function(e,t,r){'use strict';var a=r(2),o=r(0),n=r(13),i=r(41),l=r(29),s=r(40),u=r(39),c=r(4),d=r(3),p=r(56),_=r(43),y=r(73);e.exports=function(e,t,r,v,g,m){var f=a[e],b=f,x=g?'set':'add',h=b&&b.prototype,T={},O=function(e){var t=h[e];n(h,e,'delete'==e?function(e){return m&&!c(e)?!1:t.call(this,0===e?0:e)}:'has'==e?function(e){return m&&!c(e)?!1:t.call(this,0===e?0:e)}:'get'==e?function(e){return m&&!c(e)?void 0:t.call(this,0===e?0:e)}:'add'==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if('function'!=typeof b||!(m||h.forEach&&!d(function(){new b().entries().next()})))b=v.getConstructor(t,e,g,x),i(b.prototype,r),l.NEED=!0;else{var k=new b,E=k[x](m?{}:-0,1)!=k,S=d(function(){k.has(1)}),P=p(function(e){new b(e)}),N=!m&&d(function(){for(var e=new b,t=5;t--;)e[x](t,t);return!e.has(-0)});P||(b=t(function(t,r){u(t,b,e);var a=y(new f,t,b);return void 0!=r&&s(r,g,a[x],a),a}),b.prototype=h,h.constructor=b),(S||N)&&(O('delete'),O('has'),g&&O('get')),(N||E)&&O(x),m&&h.clear&&delete h.clear}return _(b,e),T[e]=b,o(o.G+o.W+o.F*(b!=f),T),m||v.setStrong(b,e,g),b}},function(e,t,r){'use strict';for(var a=r(2),o=r(12),n=r(32),l=n('typed_array'),s=n('view'),u=!!(a.ArrayBuffer&&a.DataView),c=u,d=0,i=['Int8Array','Uint8Array','Uint8ClampedArray','Int16Array','Uint16Array','Int32Array','Uint32Array','Float32Array','Float64Array'],p;d<9;)(p=a[i[d++]])?(o(p.prototype,l,!0),o(p.prototype,s,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:l,VIEW:s}},function(e,t,r){'use strict';e.exports=r(33)||!r(3)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(2)[e]})},function(e,t,r){'use strict';var a=r(0);e.exports=function(e){a(a.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){'use strict';var a=r(0),o=r(10),i=r(18),l=r(40);e.exports=function(e){a(a.S,e,{from:function(e){var t=arguments[1],r,a,s,n;return(o(this),r=void 0!==t,r&&o(t),void 0==e)?new this:(a=[],r?(s=0,n=i(t,arguments[2],2),l(e,!1,function(e){a.push(n(e,s++))})):l(e,!1,a.push,a),new this(a))}})}},function(e){'use strict';function t(){throw new Error('setTimeout has not been defined')}function r(){throw new Error('clearTimeout has not been defined')}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function n(){_&&v&&(_=!1,v.length?p=v.concat(p):y=-1,p.length&&l())}function l(){if(!_){var e=a(n);_=!0;for(var t=p.length;t;){for(v=p,p=[];++y<t;)v&&v[y].run();y=-1,t=p.length}v=null,_=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function i(){}var u=e.exports={},c,d;(function(){try{c='function'==typeof setTimeout?setTimeout:t}catch(r){c=t}try{d='function'==typeof clearTimeout?clearTimeout:r}catch(t){d=r}})();var p=[],_=!1,y=-1,v;u.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new s(e,t)),1!==p.length||_||a(l)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title='browser',u.browser=!0,u.env={},u.argv=[],u.version='',u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.prependListener=i,u.prependOnceListener=i,u.listeners=function(){return[]},u.binding=function(){throw new Error('process.binding is not supported')},u.cwd=function(){return'/'},u.chdir=function(){throw new Error('process.chdir is not supported')},u.umask=function(){return 0}},function(e,t,r){'use strict';var a=r(4),o=r(2).document,n=a(o)&&a(o.createElement);e.exports=function(e){return n?o.createElement(e):{}}},function(e,t,r){'use strict';var a=r(2),o=r(21),n=r(33),i=r(97),l=r(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=n?{}:a.Symbol||{});'_'==e.charAt(0)||e in t||l(t,e,{value:i.f(e)})}},function(e,t,r){'use strict';var a=r(51)('keys'),o=r(32);e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e){'use strict';e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t,r){'use strict';var a=r(2).document;e.exports=a&&a.documentElement},function(e,t,r){'use strict';var a=r(4),o=r(1),n=function(e,t){if(o(e),!a(t)&&null!==t)throw TypeError(t+': can\'t set as prototype!')};e.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(e,t,a){try{a=r(18)(Function.call,r(16).f(Object.prototype,'__proto__').set,2),a(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:a(e,r),e}}({},!1):void 0),check:n}},function(e){'use strict';e.exports='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF'},function(e,t,r){'use strict';var a=r(4),o=r(71).set;e.exports=function(e,t,r){var n=t.constructor,i;return n!==r&&'function'==typeof n&&(i=n.prototype)!==r.prototype&&a(i)&&o&&o(e,i),e}},function(e,t,r){'use strict';var a=r(24),o=r(23);e.exports=function(e){var t=o(this)+'',r='',i=a(e);if(0>i||i==Infinity)throw RangeError('Count can\'t be negative');for(;0<i;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},function(e){'use strict';e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e){'use strict';var t=l;e.exports=!t||22025.465794806718<t(10)||22025.465794806718>t(10)||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&1e-6>e?e+e*e/2:i(e)-1}:t},function(e,t,r){'use strict';var o=r(24),n=r(23);e.exports=function(e){return function(t,r){var u=n(t)+'',s=o(r),i=u.length,l,a;return 0>s||s>=i?e?'':void 0:(l=u.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=u.charCodeAt(s+1))||57343<a?e?u.charAt(s):l:e?u.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(e,t,r){'use strict';var a=r(33),o=r(0),n=r(13),i=r(12),l=r(11),s=r(45),u=r(79),c=r(43),d=r(17),p=r(5)('iterator'),_=!([].keys&&'next'in[].keys()),y='keys',v='values',g=function(){return this};e.exports=function(e,t,r,m,f,b,x){u(r,t,m);var h=function(e){return!_&&e in k?k[e]:e===y?function(){return new r(this,e)}:e===v?function(){return new r(this,e)}:function(){return new r(this,e)}},T=t+' Iterator',O=f==v,C=!1,k=e.prototype,E=k[p]||k['@@iterator']||f&&k[f],S=E||h(f),P=f?O?h('entries'):S:void 0,N='Array'==t?k.entries||E:E,A,R,I;if(N&&(I=d(N.call(new e)),I!==Object.prototype&&I.next&&(c(I,T,!0),!a&&!l(I,p)&&i(I,p,g))),O&&E&&E.name!==v&&(C=!0,S=function(){return E.call(this)}),(!a||x)&&(_||C||!k[p])&&i(k,p,S),s[t]=S,s[T]=g,f)if(A={values:O?S:h(v),keys:b?S:h(y),entries:P},x)for(R in A)R in k||n(k,R,A[R]);else o(o.P+o.F*(_||C),t,A);return A}},function(e,t,r){'use strict';var a=r(36),o=r(31),n=r(43),i={};r(12)(i,r(5)('iterator'),function(){return this}),e.exports=function(e,t,r){e.prototype=a(i,{next:o(1,r)}),n(e,t+' Iterator')}},function(e,t,r){'use strict';var a=r(55),o=r(23);e.exports=function(e,t,r){if(a(t))throw TypeError('String#'+r+' doesn\'t accept regex!');return o(e)+''}},function(e,t,r){'use strict';var a=r(5)('match');e.exports=function(e){var t=/./;try{'/./'[e](t)}catch(r){try{return t[a]=!1,!'/./'[e](t)}catch(e){}}return!0}},function(e,t,r){'use strict';var a=r(45),o=r(5)('iterator'),n=Array.prototype;e.exports=function(e){return e!==void 0&&(a.Array===e||n[o]===e)}},function(e,t,r){'use strict';var a=r(7),o=r(31);e.exports=function(e,t,r){t in e?a.f(e,t,o(0,r)):e[t]=r}},function(e,t,r){'use strict';var a=r(49),o=r(5)('iterator'),n=r(45);e.exports=r(21).getIteratorMethod=function(e){if(e!=void 0)return e[o]||e['@@iterator']||n[a(e)]}},function(e,t,r){'use strict';var a=r(227);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,r){'use strict';var a=r(9),o=r(35),n=r(8);e.exports=function(e){for(var t=a(this),r=n(t.length),i=arguments.length,l=o(1<i?arguments[1]:void 0,r),s=2<i?arguments[2]:void 0,u=void 0===s?r:o(s,r);u>l;)t[l++]=e;return t}},function(e,t,r){'use strict';var a=r(30),o=r(113),n=r(45),i=r(15);e.exports=r(78)(Array,'Array',function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):'keys'==t?o(0,r):'values'==t?o(0,e[r]):o(0,[r,e[r]])},'values'),n.Arguments=n.Array,a('keys'),a('values'),a('entries')},function(e,t,r){'use strict';var a=r(18),o=r(103),n=r(70),i=r(66),l=r(2),s=l.process,u=l.setImmediate,c=l.clearImmediate,d=l.MessageChannel,p=l.Dispatch,_=0,y={},v='onreadystatechange',g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){g.call(e.data)},f,b,x;u&&c||(u=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++_]=function(){o('function'==typeof e?e:Function(e),t)},f(_),_},c=function(e){delete y[e]},'process'==r(19)(s)?f=function(e){s.nextTick(a(g,e,1))}:p&&p.now?f=function(e){p.now(a(g,e,1))}:d?(b=new d,x=b.port2,b.port1.onmessage=m,f=a(x.postMessage,x,1)):l.addEventListener&&'function'==typeof postMessage&&!l.importScripts?(f=function(e){l.postMessage(e+'','*')},l.addEventListener('message',m,!1)):v in i('script')?f=function(e){n.appendChild(i('script'))[v]=function(){n.removeChild(this),g.call(e)}}:f=function(e){setTimeout(a(g,e,1),0)}),e.exports={set:u,clear:c}},function(e,t,r){'use strict';var a=r(2),o=r(88).set,n=a.MutationObserver||a.WebKitMutationObserver,i=a.process,l=a.Promise,s='process'==r(19)(i);e.exports=function(){var e=function(){var e,a;for(s&&(e=i.domain)&&e.exit();t;){a=t.fn,t=t.next;try{a()}catch(a){throw t?u():r=void 0,a}}r=void 0,e&&e.enter()},t,r,u;if(s)u=function(){i.nextTick(e)};else if(n){var c=!0,d=document.createTextNode('');new n(e).observe(d,{characterData:!0}),u=function(){d.data=c=!c}}else if(l&&l.resolve){var p=l.resolve();u=function(){p.then(e)}}else u=function(){o.call(a,e)};return function(e){var a={fn:e,next:void 0};r&&(r.next=a),t||(t=a,u()),r=a}}},function(e,t,r){'use strict';function a(e){var t,r;this.promise=new e(function(e,a){if(t!=void 0||r!=void 0)throw TypeError('Bad Promise constructor');t=e,r=a}),this.resolve=o(t),this.reject=o(r)}var o=r(10);e.exports.f=function(e){return new a(e)}},function(e,t,i){'use strict';function l(t,r,a){var o=Array(a),n=8*a-r-1,l=(1<<n)-1,u=l>>1,d=23===r?q(2,-24)-q(2,-77):0,p=0,i=0>t||0===t&&0>1/t?1:0,s,_,y;for(t=H(t),t!=t||t===B?(_=t==t?0:1,s=l):(s=X(K(t)/z),1>t*(y=q(2,-s))&&(s--,y*=2),t+=1<=s+u?d/y:d*q(2,1-u),2<=t*y&&(s++,y/=2),s+u>=l?(_=0,s=l):1<=s+u?(_=(t*y-1)*q(2,r),s+=u):(_=t*q(2,u-1)*q(2,r),s=0));8<=r;o[p++]=255&_,_/=256,r-=8);for(s=s<<r|_,n+=r;0<n;o[p++]=255&s,s/=256,n-=8);return o[--p]|=128*i,o}function s(t,r,a){var o=8*a-r-1,n=(1<<o)-1,l=n>>1,u=o-7,c=a-1,i=t[c--],s=127&i,e;for(i>>=7;0<u;s=256*s+t[c],c--,u-=8);for(e=s&(1<<-u)-1,s>>=-u,u+=r;0<u;e=256*e+t[c],c--,u-=8);if(0===s)s=1-l;else{if(s===n)return e?NaN:i?-B:B;e+=q(2,r),s-=l}return(i?-1:1)*e*q(2,s-r)}function u(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function d(e){return[255&e]}function p(e){return[255&e,255&e>>8]}function _(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function y(e){return l(e,52,8)}function v(e){return l(e,23,4)}function g(e,t,r){R(e[D],t,{get:function(){return this[r]}})}function m(e,t,r,a){var o=N(+r);if(o+t>e[ee])throw Y(M);var n=e[Q]._b,i=o+e[te],l=n.slice(i,i+t);return a?l:l.reverse()}function f(e,t,r,a,o,n){var l=N(+r);if(l+t>e[ee])throw Y(M);for(var s=e[Q]._b,u=l+e[te],c=a(+o),d=0;d<t;d++)s[u+d]=c[n?d:t-d-1]}var b=i(2),x=i(6),h=i(33),T=i(61),O=i(12),C=i(41),k=i(3),E=i(39),S=i(24),P=i(8),N=i(122),A=i(37).f,R=i(7).f,I=i(86),F=i(43),w='ArrayBuffer',L='DataView',D='prototype',M='Wrong index!',U=b[w],G=b[L],V=b.Math,Y=b.RangeError,B=b.Infinity,W=U,H=n,q=o,X=c,K=a,z=r,$='buffer',J='byteLength',Z='byteOffset',Q=x?'_b':$,ee=x?'_l':J,te=x?'_o':Z;if(!T.ABV)U=function(e){E(this,U,w);var t=N(e);this._b=I.call(Array(t),0),this[ee]=t},G=function(e,t,r){E(this,G,L),E(e,U,L);var a=e[ee],o=S(t);if(0>o||o>a)throw Y('Wrong offset!');if(r=void 0===r?a-o:P(r),o+r>a)throw Y('Wrong length!');this[Q]=e,this[te]=o,this[ee]=r},x&&(g(U,J,'_l'),g(G,$,'_b'),g(G,J,'_l'),g(G,Z,'_o')),C(G[D],{getInt8:function(e){return m(this,1,e)[0]<<24>>24},getUint8:function(e){return m(this,1,e)[0]},getInt16:function(e){var t=m(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=m(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return u(m(this,4,e,arguments[1]))},getUint32:function(e){return u(m(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return s(m(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return s(m(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){f(this,1,e,d,t)},setUint8:function(e,t){f(this,1,e,d,t)},setInt16:function(e,t){f(this,2,e,p,t,arguments[2])},setUint16:function(e,t){f(this,2,e,p,t,arguments[2])},setInt32:function(e,t){f(this,4,e,_,t,arguments[2])},setUint32:function(e,t){f(this,4,e,_,t,arguments[2])},setFloat32:function(e,t){f(this,4,e,v,t,arguments[2])},setFloat64:function(e,t){f(this,8,e,y,t,arguments[2])}});else{if(!k(function(){U(1)})||!k(function(){new U(-1)})||k(function(){return new U,new U(1.5),new U(NaN),U.name!=w})){U=function(e){return E(this,U),new W(N(e))};for(var re=U[D]=W[D],ae=A(W),oe=0,j;ae.length>oe;)(j=ae[oe++])in U||O(U,j,W[j]);h||(re.constructor=U)}var ne=new G(new U(2)),ie=G[D].setInt8;ne.setInt8(0,2147483648),ne.setInt8(1,2147483649),(ne.getInt8(0)||!ne.getInt8(1))&&C(G[D],{setInt8:function(e,t){ie.call(this,e,t<<24>>24)},setUint8:function(e,t){ie.call(this,e,t<<24>>24)}},!0)}F(U,w),F(G,L),O(G[D],T.VIEW,!0),t[w]=U,t[L]=G},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=function(){function e(t,a){var o=2>=arguments.length||void 0===arguments[2]||arguments[2],n=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];r(this,e),this.start=t,this.end=t+a,this.duration=a,this.data=n,this.id=this.generateId(),this.outcome=void 0,this.complete=!1,this.resetOutcomeOnStart=o,e.instances.push(this)}return a(e,[{key:'destroy',value:function(){var t=e.instances.indexOf(this);-1!=t&&e.instances.splice(t,1)}},{key:'generateId',value:function(){for(var t=-1,r=0;r<e.instances.length;r++)e.instances[r].id>t&&(t=e.instances[r].id);return t+1}},{key:'setId',value:function(e){this.id=e}},{key:'isActive',value:function(e,t){return this.start>=e&&this.start+this.duration<=t}},{key:'endTime',value:function(){return this.start+this.duration}},{key:'isComplete',value:function(){return this.complete}},{key:'setOutcome',value:function(e){this.complete=!0,this.outcome=e}},{key:'resetOutcome',value:function(){this.complete=!1,this.outcome=void 0}},{key:'setStartTime',value:function(e){this.start=p(e,this.end),this._setDuration()}},{key:'setEndTime',value:function(e){this.end=u(e,this.start),this._setDuration()}},{key:'_setDuration',value:function(){this.duration=u(0,this.end-this.start)}}]),e}();t['default']=o,o.instances=[],e.exports=t['default']},function(e,t,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(338),l=a(i),s=r(339),u=a(s),c=r(340),d=a(c),p=r(42),_=a(p),y=r(50),v=a(y),g=r(132),m=a(g),f=r(94),b=a(f),x=r(341),h=a(x),T=r(92),O=a(T),C={UNDEFINED:'undefined',VIDEO:'video',IMAGE:'image',UNSUPPORTED:'unsupported'};t.MediaTypes=C;var k={OUTPUT_SELECTION:'Output Selection',GROUP_SELECTION:'Group Selection',LAYER_SELECTION:'Layer Selection',INTERACTION:'Interaction'};t.FunctionTypes=k;t.TerminationFunctionTypes={ALL_PLAYED:'allPlayed',PLAY_COUNT:'playCount',IMMEDIATELY:'immediately'};var E=function(){function e(){o(this,e),this.reset()}return n(e,[{key:'reset',value:function(){for(var e in this.anos_played=[],this.data={},this.ontology=new l['default'],this.graph=new u['default'],this.initialisingFlowPackages={},this.flowPackages={},this.interactions={},this.contextVariables={},this.processingStarted=!1,this.onProcessingStartedCallback=function(){},this.functions={},k)this.functions[k[e]]={}}},{key:'resetGraph',value:function(){this.graph.reset()}},{key:'resetSequencer',value:function(){this.graph.resetSequencer()}},{key:'setRootNarrativeObject',value:function(e){this.graph.setRoot(e)}},{key:'setRootNarrativeObjectFromId',value:function(e){this.graph.setRootFromId(e)}},{key:'getRootNarrativeObject',value:function(){return this.graph.getRoot()}},{key:'resetRootNarrativeObject',value:function(){this.graph.resetRoot()}},{key:'getNarrativeObject',value:function(e){return this.graph.getNarrativeObject(e)}},{key:'getNarrativeObjects',value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.graph.getNarrativeObject(e[r]));return t}},{key:'getAllNarrativeObjects',value:function(){return this.graph.getAllNarrativeObjects()}},{key:'setNarrativeObjectId',value:function(e,t){return this.graph.setNarrativeObjectId(e,t)}},{key:'initialiseFlowPackage',value:function(e){var t=this;t.initialisingFlowPackages[e.url]=e;var r=document.createElement('video');r.src=e.url,r.addEventListener('loadedmetadata',function(){e.duration=r.duration,t.onFlowPackageLoadedSuccess(e)}),r.addEventListener('error',function(){t.onFlowPackageLoadedFailure(e)}),r.remove()}},{key:'createFlowPackage',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?void 0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?C.UNDEFINED:arguments[2];if(!this.hasFlowPackage(e)){var a=new d['default'](e,t,r);if(void 0==t)return this.initialiseFlowPackage(a,this.onFlowPackageLoadedSuccess,this.onFlowPackageLoadedFailure),a;this.flowPackages[e]=a}return this.flowPackages[e]}},{key:'removeFlowPackage',value:function(e){return!!this.hasFlowPackage(e.url)&&(delete this.flowPackages[e.url],!0)}},{key:'hasFlowPackage',value:function(e){return this.flowPackages.hasOwnProperty(e)}},{key:'getFlowPackageByUrl',value:function(e){return this.hasFlowPackage(e)?this.flowPackages[e]:void 0}},{key:'getAllFlowPackages',value:function(){return this.flowPackages}},{key:'createAtom',value:function(e,t,r,a){var o=new v['default'](e,t,r,a);return this.graph.addNarrativeObject(o),o}},{key:'removeAtom',value:function(e){return void 0!=e&&this.graph.removeNarrativeObject(e)}},{key:'setAtomInPoint',value:function(e,t){var r=this.getNarrativeObject(e);r.setInPointTime(t)}},{key:'setAtomOutPoint',value:function(e,t){var r=this.getNarrativeObject(e);r.setOutPointTime(t)}},{key:'createGroup',value:function(e){var t=new m['default'](e);return this.graph.addNarrativeObject(t),t}},{key:'removeGroup',value:function(e){return void 0!=e&&this.graph.removeNarrativeObject(e)}},{key:'createLayered',value:function(e){var t=1>=arguments.length||void 0===arguments[1]||arguments[1],r=new h['default'](e,t);return this.graph.addNarrativeObject(r),r}},{key:'removeLayered',value:function(e){return void 0!=e&&this.graph.removeNarrativeObject(e)}},{key:'addInteraction',value:function(e,t,r,a){var o=e.addInteraction(t,r,a);return this.interactions[o.id]=o,o.id}},{key:'addInteractionAndSetId',value:function(e,t,r,a,o,n){var i=e.addInteraction(r,a,o,n);return i.setId(t),this.interactions[t]=i,i.id}},{key:'removeInteraction',value:function(e,t){return!!this.hasInteraction(t)&&(e.removeInteraction(this.interactions[t]),this.interactions[t].destroy(),delete this.interactions[t],!0)}},{key:'hasInteraction',value:function(e){return this.interactions.hasOwnProperty(e)}},{key:'getInteraction',value:function(e){return this.hasInteraction(e)?this.interactions[e]:void 0}},{key:'getInteractionOutcome',value:function(e){return this.interactions.hasOwnProperty(e)?this.interactions[e].outcome:void 0}},{key:'setInteractionComplete',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?void 0:arguments[1];return!!this.interactions.hasOwnProperty(e)&&(this.interactions[e].setOutcome(t),!0)}},{key:'resetInteractionComplete',value:function(e){this.interactions.hasOwnProperty(e)&&this.interactions[e].resetOutcome()}},{key:'addFunction',value:function(e,t,r){this.functions.hasOwnProperty(e)||(this.functions[e]={}),this.functions[e][t]=r}},{key:'getFunction',value:function(e,t){return this.functions.hasOwnProperty(e)&&this.functions[e].hasOwnProperty(t)?this.functions[e][t]:void 0}},{key:'removeFunction',value:function(e,t){return this.functions.hasOwnProperty(e)&&this.functions[e].hasOwnProperty(t)&&(delete this.functions[e][t],!0)}},{key:'getOntologyMatches',value:function(e,t){var r=[];for(var a in e)for(var o=0,n;o<e[a].length;o++){n=this.ontology.getNarrativeObjectsInClassInstance(a,e[a][o]);for(var i=0;i<n.length;i++)for(var l=0;l<t.length;l++)t[l]==n[i].id&&r.push(t[l])}return r}},{key:'loadDefaultOntologyClasses',value:function(){this.ontology.loadDefaultClasses();for(var e=this.ontology.getClassNames(),t=0;t<e.length;t++)this.addOntologyClass(e[t])}},{key:'addOntologyClass',value:function(e){this.ontology.addClass(e)}},{key:'removeOntologyClass',value:function(e){this.ontology.removeClass(e)}},{key:'addInstanceToOntologyClass',value:function(e,t){this.ontology.addInstanceToClass(e,t),this.addContextVariable(e,t)}},{key:'removeInstanceFromOntologyClass',value:function(e,t){this.ontology.removeInstanceFromClass(e,t),this.removeContextVariable(e,t)}},{key:'addNarrativeObjectToOntologyClassInstance',value:function(e,t,r,a){this.ontology.addNarrativeObjectToInstance(e,t,r,a)}},{key:'removeNarrativeObjectFromOntologyClassInstance',value:function(e,t,r){this.ontology.removeNarrativeObjectFromInstance(e,t,r)}},{key:'addContextVariable',value:function(e,t){this.contextVariables.hasOwnProperty(e)||(this.contextVariables[e]={}),this.contextVariables[e].hasOwnProperty(t)||(this.contextVariables[e][t]=0)}},{key:'removeContextVariable',value:function(e,t){this.contextVariables.hasOwnProperty(e)&&(this.contextVariables[e].hasOwnProperty(t)&&delete this.contextVariables[e][t],0==Object.keys(this.contextVariables[e]).length&&delete this.contextVariables[e])}},{key:'getContextVariable',value:function(e,t){return this.hasContextVariable(e,t)?this.contextVariables[e][t]:void 0}},{key:'setContextVariable',value:function(e,t,r){this.hasContextVariable(e,t)&&(this.contextVariables[e][t]=r)}},{key:'hasContextVariable',value:function(e,t){return this.contextVariables.hasOwnProperty(e)&&this.contextVariables[e].hasOwnProperty(t)}},{key:'callRenderUpdate',value:function(){this.graph.callRenderUpdate()}},{key:'setRenderUpdate',value:function(e){this.graph.setRenderUpdate(e)}},{key:'updateClock',value:function(e){this.graph.sequencer.playhead_clock=e}},{key:'onFlowPackageLoadedSuccess',value:function(e){delete this.initialisingFlowPackages[e.url],this.flowPackages[e.url]=e,this.checkStartProcessing()}},{key:'onFlowPackageLoadedFailure',value:function(e){delete this.initialisingFlowPackages[e.url],this.checkStartProcessing()}},{key:'checkStartProcessing',value:function(){if(this.processingStarted&&0==Object.keys(this.initialisingFlowPackages).length){this.graph.initialise(this),void 0!=this.onProcessingStartedCallback&&this.onProcessingStartedCallback(),this.graph.stop=!1,this.graph.currentNarrativeObject=this.graph.getRoot();this.graph.startProcessing(this)}}},{key:'startProcessing',value:function(e){this.processingStarted=!0,this.onProcessingStartedCallback=e,this.checkStartProcessing()}},{key:'createSequencerThread',value:function(e){return this.graph.sequencer.createThread(e)}}]),e}();t['default']=E},function(e,t,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(42),l=a(i),s=r(50),u=a(s),c=r(132),d=a(c),p={DEFAULT:'Default',MASTER:'Master'};t.LayerType=p;var _=function(){function e(){var t=0>=arguments.length||void 0===arguments[0]?p.DEFAULT:arguments[0];o(this,e),this.id=this.generateId(),this.layerType=t,this.narrativeObjects={},this.rootNarrativeObjectID=void 0,e.instances.push(this)}return n(e,[{key:'destroy',value:function(){var t=e.instances.indexOf(this);-1!=t&&e.instances.splice(t,1)}},{key:'generateId',value:function(){for(var t=-1,r=0;r<e.instances.length;r++)e.instances[r].id>t&&(t=e.instances[r].id);return t+1}},{key:'setId',value:function(e){this.id=e}},{key:'isEmpty',value:function(){return 0==Object.keys(this.narrativeObjects).length}},{key:'setLayerType',value:function(e){this.layerType=e}},{key:'resetLayerType',value:function(){this.layerType=p.DEFAULT}},{key:'getLayerType',value:function(){return this.layerType}},{key:'isMasterLayer',value:function(){return this.layerType==p.MASTER}},{key:'getAllNarrativeObjectIds',value:function(){var e=Object.keys(this.narrativeObjects);return e}},{key:'addAtom',value:function(e){this._addNarrativeObject(e)}},{key:'removeAtom',value:function(e){return this.removeNarrativeObject(e)}},{key:'addGroup',value:function(e){this._addNarrativeObject(e)}},{key:'removeGroup',value:function(e){return this.removeNarrativeObject(e)}},{key:'_addNarrativeObject',value:function(e){this.narrativeObjects.hasOwnProperty(e.id)||(this.narrativeObjects[e.id]=e.id)}},{key:'removeNarrativeObject',value:function(e){return!!this.narrativeObjects.hasOwnProperty(e.id)&&(delete this.narrativeObjects[e.id],!0)}},{key:'getNarrativeObject',value:function(e){return this.narrativeObjects.hasOwnProperty(e)?this.narrativeObjects[e]:void 0}},{key:'hasNarrativeObject',value:function(e){return!!this.narrativeObjects.hasOwnProperty(e.id)}},{key:'setRootNarrativeObject',value:function(e){return void 0!=e&&this.narrativeObjects.hasOwnProperty(e.id)&&(this.rootNarrativeObjectID=this.narrativeObjects[e.id],!0)}},{key:'getRootNarrativeObjectId',value:function(){return this.rootNarrativeObjectID}},{key:'resetRootNarrativeObject',value:function(){this.rootNarrativeObjectID=void 0}},{key:'hasRootNarrativeObject',value:function(){return void 0!=this.rootNarrativeObjectID}},{key:'initialise',value:function(e){for(var t in this.narrativeObjects){var r=e.getNarrativeObject(t);void 0!=r&&r.initialise(e)}}}]),e}();t['default']=_,_.instances=[]},function(e){'use strict';var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(r){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,r){'use strict';e.exports=!r(6)&&!r(3)(function(){return 7!=Object.defineProperty(r(66)('div'),'a',{get:function(){return 7}}).a})},function(e,t,r){'use strict';t.f=r(5)},function(e,t,r){'use strict';var a=r(11),o=r(15),n=r(52)(!1),i=r(68)('IE_PROTO');e.exports=function(e,t){var r=o(e),l=0,s=[],u;for(u in r)u!=i&&a(r,u)&&s.push(u);for(;t.length>l;)a(r,u=t[l++])&&(~n(s,u)||s.push(u));return s}},function(e,t,r){'use strict';var a=r(7),o=r(1),n=r(34);e.exports=r(6)?Object.defineProperties:function(e,t){o(e);for(var r=n(t),l=r.length,s=0,i;l>s;)a.f(e,i=r[s++],t[i]);return e}},function(e,t,r){'use strict';var a=r(15),o=r(37).f,n={}.toString,i='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&'[object Window]'==n.call(e)?l(e):o(a(e))}},function(e,t,r){'use strict';var a=r(34),o=r(53),n=r(48),i=r(9),l=r(47),s=Object.assign;e.exports=!s||r(3)(function(){var e={},t={},r=Symbol(),a='abcdefghijklmnopqrst';return e[r]=7,a.split('').forEach(function(e){t[e]=e}),7!=s({},e)[r]||Object.keys(s({},t)).join('')!=a})?function(e){for(var t=i(e),r=arguments.length,s=1,u=o.f,c=n.f;r>s;)for(var d=l(arguments[s++]),p=u?a(d).concat(u(d)):a(d),_=p.length,y=0,v;_>y;)c.call(d,v=p[y++])&&(t[v]=d[v]);return t}:s},function(e,t,r){'use strict';var a=r(10),o=r(4),n=r(103),i=[].slice,l={},s=function(e,t,r){if(!(t in l)){for(var a=[],o=0;o<t;o++)a[o]='a['+o+']';l[t]=Function('F,a','return new F('+a.join(',')+')')}return l[t](e,r)};e.exports=Function.bind||function(e){var t=a(this),r=i.call(arguments,1),l=function a(){var o=r.concat(i.call(arguments));return this instanceof a?s(t,o.length,o):n(t,o,e)};return o(t.prototype)&&(l.prototype=t.prototype),l}},function(e){'use strict';e.exports=function(e,t,r){var a=r===void 0;switch(t.length){case 0:return a?e():e.call(r);case 1:return a?e(t[0]):e.call(r,t[0]);case 2:return a?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3]);}return e.apply(r,t)}},function(e,t,r){'use strict';var a=r(2).parseInt,o=r(44).trim,n=r(72),i=/^[-+]?0[xX]/;e.exports=8!==a(n+'08')||22!==a(n+'0x16')?function(e,t){var r=o(e+'',3);return a(r,t>>>0||(i.test(r)?16:10))}:a},function(e,t,r){'use strict';var a=r(2).parseFloat,o=r(44).trim;e.exports=1/a(r(72)+'-0')==-Infinity?a:function(e){var t=o(e+'',3),r=a(t);return 0===r&&'-'==t.charAt(0)?-0:r}},function(e,t,r){'use strict';var a=r(19);e.exports=function(e,t){if('number'!=typeof e&&'Number'!=a(e))throw TypeError(t);return+e}},function(e,t,r){'use strict';var a=r(4);e.exports=function(e){return!a(e)&&isFinite(e)&&c(e)===e}},function(e){'use strict';e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&1e-8>e?e-e*e/2:a(1+e)}},function(e,t,r){'use strict';var i=r(75),a=o,l=a(2,-52),s=a(2,-23),u=a(2,127)*(2-s),c=a(2,-126),d=function(e){return e+1/l-1/l};e.exports=Math.fround||function(e){var t=n(e),r=i(e),o,a;return t<c?r*d(t/c/s)*c*s:(o=(1+s/l)*t,a=o-(o-t),a>u||a!=a?r*Infinity:r*a)}},function(e,t,r){'use strict';var a=r(1);e.exports=function(t,e,r,o){try{return o?e(a(r)[0],r[1]):e(r)}catch(r){var n=t['return'];throw void 0!==n&&a(n.call(t)),r}}},function(e,t,r){'use strict';var a=r(10),o=r(9),n=r(47),l=r(8);e.exports=function(e,t,r,s,u){a(t);var c=o(e),d=n(c),p=l(c.length),_=u?p-1:0,y=u?-1:1;if(2>r)for(;;){if(_ in d){s=d[_],_+=y;break}if(_+=y,u?0>_:p<=_)throw TypeError('Reduce of empty array with no initial value')}for(;u?0<=_:p>_;_+=y)_ in d&&(s=t(s,d[_],_,c));return s}},function(e,t,r){'use strict';var a=r(9),o=r(35),n=r(8);e.exports=[].copyWithin||function(e,t){var r=a(this),i=n(r.length),l=o(e,i),s=o(t,i),u=2<arguments.length?arguments[2]:void 0,c=p((u===void 0?i:o(u,i))-s,i-l),d=1;for(s<l&&l<s+c&&(d=-1,s+=c-1,l+=c-1);0<c--;)s in r?r[l]=r[s]:delete r[l],l+=d,s+=d;return r}},function(e){'use strict';e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){'use strict';r(6)&&'g'!=/./g.flags&&r(7).f(RegExp.prototype,'flags',{configurable:!0,get:r(57)})},function(e){'use strict';e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,r){'use strict';var a=r(1),o=r(4),n=r(90);e.exports=function(e,t){if(a(e),o(t)&&t.constructor===e)return t;var r=n.f(e),i=r.resolve;return i(t),r.promise}},function(e,t,r){'use strict';var a=r(118),o=r(46),n='Map';e.exports=r(60)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=a.getEntry(o(this,n),e);return t&&t.v},set:function(e,t){return a.def(o(this,n),0===e?0:e,t)}},a,!0)},function(e,t,r){'use strict';var a=r(7).f,o=r(36),n=r(41),i=r(18),l=r(39),s=r(40),u=r(78),c=r(113),d=r(38),p=r(6),_=r(29).fastKey,y=r(46),v=p?'_s':'size',g=function(e,t){var r=_(t),a;if('F'!==r)return e._i[r];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,r,u){var c=e(function(e,a){l(e,c,t,'_i'),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=a&&s(a,r,e[u],e)});return n(c.prototype,{clear:function(){for(var e=y(this,t),r=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete r[a.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=y(this,t),a=g(r,e);if(a){var o=a.n,n=a.p;delete r._i[a.i],a.r=!0,n&&(n.n=o),o&&(o.p=n),r._f==a&&(r._f=o),r._l==a&&(r._l=n),r[v]--}return!!a},forEach:function(e){y(this,t);for(var r=i(e,1<arguments.length?arguments[1]:void 0,3),a;a=a?a.n:this._f;)for(r(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!g(y(this,t),e)}}),p&&a(c.prototype,'size',{get:function(){return y(this,t)[v]}}),c},def:function(e,t,r){var a=g(e,t),o,n;return a?a.v=r:(e._l=a={i:n=_(t,!0),k:t,v:r,p:o=e._l,n:void 0,r:!1},!e._f&&(e._f=a),o&&(o.n=a),e[v]++,'F'!==n&&(e._i[n]=a)),e},getEntry:g,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=y(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?'keys'==t?c(0,r.k):'values'==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?'entries':'values',!r,!0),d(t)}}},function(e,t,r){'use strict';var a=r(118),o=r(46),n='Set';e.exports=r(60)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return a.def(o(this,n),e=0===e?0:e,e)}},a)},function(e,t,r){'use strict';var a=r(26)(0),o=r(13),n=r(29),i=r(101),l=r(121),s=r(4),u=r(3),c=r(46),d='WeakMap',p=n.getWeak,_=Object.isExtensible,y=l.ufstore,v={},g=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},m={get:function(e){if(s(e)){var t=p(e);return!0===t?y(c(this,d)).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(c(this,d),e,t)}},f=e.exports=r(60)(d,g,m,l,!0,!0),x;u(function(){return 7!=new f().set((Object.freeze||Object)(v),7).get(v)})&&(x=l.getConstructor(g,d),i(x.prototype,m),n.NEED=!0,a(['delete','has','get','set'],function(e){var t=f.prototype,r=t[e];o(t,e,function(t,a){if(s(t)&&!_(t)){this._f||(this._f=new x);var o=this._f[e](t,a);return'set'==e?this:o}return r.call(this,t,a)})}))},function(e,t,r){'use strict';var a=r(41),o=r(29).getWeak,n=r(1),i=r(4),l=r(39),s=r(40),u=r(26),c=r(11),d=r(46),p=u(5),_=u(6),y=0,v=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},m=function(e,t){return p(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var r=m(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=_(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var u=e(function(e,a){l(e,u,t,'_i'),e._t=t,e._i=y++,e._l=void 0,void 0!=a&&s(a,r,e[n],e)});return a(u.prototype,{delete:function(e){if(!i(e))return!1;var r=o(e);return!0===r?v(d(this,t))['delete'](e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=o(e);return!0===r?v(d(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var a=o(n(t),!0);return!0===a?v(e).set(t,r):a[e._i]=r,e},ufstore:v}},function(e,t,r){'use strict';var a=r(24),o=r(8);e.exports=function(e){if(e===void 0)return 0;var t=a(e),r=o(t);if(t!==r)throw RangeError('Wrong length!');return r}},function(e,t,r){'use strict';var a=r(37),o=r(53),n=r(1),i=r(2).Reflect;e.exports=i&&i.ownKeys||function(e){var t=a.f(n(e)),r=o.f;return r?t.concat(r(e)):t}},function(e,t,r){'use strict';function a(e,t,r,u,c,d,p,_){for(var y=c,v=0,g=!!p&&l(p,_,3),m,f;v<u;){if(v in r){if(m=g?g(r[v],v,t):r[v],f=!1,n(m)&&(f=m[s],f=void 0===f?o(m):!!f),f&&0<d)y=a(e,t,m,i(m.length),y,d-1)-1;else{if(9007199254740991<=y)throw TypeError();e[y]=m}y++}v++}return y}var o=r(54),n=r(4),i=r(8),l=r(18),s=r(5)('isConcatSpreadable');e.exports=a},function(e,t,r){'use strict';var a=r(8),o=r(74),n=r(23);e.exports=function(e,t,r,i){var l=n(e)+'',s=l.length,u=void 0===r?' ':r+'',c=a(t);if(c<=s||''==u)return l;var p=c-s,_=o.call(u,d(p/u.length));return _.length>p&&(_=_.slice(0,p)),i?_+l:l+_}},function(e,t,r){'use strict';var a=r(34),o=r(15),n=r(48).f;e.exports=function(e){return function(t){for(var r=o(t),l=a(r),s=l.length,u=0,i=[],c;s>u;)n.call(r,c=l[u++])&&i.push(e?[c,r[c]]:r[c]);return i}}},function(e,t,r){'use strict';var a=r(49),o=r(128);e.exports=function(e){return function(){if(a(this)!=e)throw TypeError(e+'#toJSON isn\'t generic');return o(this)}}},function(e,t,r){'use strict';var a=r(40);e.exports=function(e,t){var r=[];return a(e,!1,r.push,r,t),r}},function(e){'use strict';e.exports=Math.scale||function(e,t,r,a,o){return 0===arguments.length||e!=e||t!=t||r!=r||a!=a||o!=o?NaN:e===Infinity||e===-Infinity?e:(e-t)*(o-a)/(r-t)+a}},function(e,t,r){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(50),i=function(e){return e&&e.__esModule?e:{default:e}}(n),l=0,s=function(){function e(){a(this,e),this.currently_processing=!1,this.playhead_clock=0,this.next_sequence_time=0,this.sequence=[],this.threads={},this.mainThreadId=this._createMainThread(),this.startNewSequence()}return o(e,[{key:'startNewSequence',value:function(){this.current_sequence={videos:[],interactions:[]}}},{key:'endCurrentSequence',value:function(){this.sequence.push(this.current_sequence),this.startNewSequence()}},{key:'processAtom',value:function(e,t){var r=this.threads[t];if(r.addTime(e.waitBeforeStartDuration),!r.atMaxTime()){this.startNewSequence();var a=r.time,o=p(a+e.duration,r.maxTime);this.current_sequence.videos.push({id:e.id,url:e.flowPackage.url,type:e.flowPackage.mediaType,data:e.data,start:a,end:o,offset:e.startTime}),e.hasInteractions()&&this.processInteractions(e,t),r.addTime(e.duration),this.endCurrentSequence()}}},{key:'processInteractions',value:function(e,t){for(var r=0,a;r<e.interactions.length;r++)if(a=e.interactions[r],a.isActive(e.startTime,e.endTime)){var o=this.threads[t].time+a.start,n=this.threads[t].time+a.start+a.duration;this.current_sequence.interactions.push({type:'start',time:o,data:a.data,id:a.id}),this.current_sequence.interactions.push({type:'end',time:n,data:a.data,id:a.id})}}},{key:'mostRecentSequence',value:function(){return 0<this.sequence.length?this.sequence[this.sequence.length-1]:''}},{key:'_createMainThread',value:function(){return this._createThreadInternal(0,Number.MAX_VALUE)}},{key:'_createThreadInternal',value:function(e,t){var r=l++;return this.threads[r]={time:e,maxTime:e+t,addTime:function(e){this.time=p(this.maxTime,this.time+e)},atMaxTime:function(){return this.time>=this.maxTime},getRemainingTime:function(){return this.maxTime-this.time}},r}},{key:'createThread',value:function(){var e=0>=arguments.length||void 0===arguments[0]?Number.MAX_VALUE:arguments[0];return this._createThreadInternal(this.threads[this.mainThreadId].time,e)}},{key:'sendToThread',value:function(e,t){this.threads.hasOwnProperty(t)&&this.processAtom(e,t)}},{key:'getMainThreadId',value:function(){return this.mainThreadId}},{key:'lockProcessing',value:function(){this.currently_processing=!0}},{key:'unlockProcessing',value:function(){this.currently_processing=!1}},{key:'isUnlocked',value:function(){return!this.currently_processing}}]),e}();t['default']=s,e.exports=t['default']},function(e,t){'use strict';function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n={error:!0,warning:!0,info:!0,alert:!0};t.LogType={ERROR:'error',WARNING:'warning',INFO:'info',ALERT:'alert'};var i=function(){function e(){a(this,e)}return o(e,null,[{key:'Log',value:function(e,t){!0==n[e]&&console.log(r({},e,t))}},{key:'SetLogType',value:function(e,t){n[e]=t}},{key:'addEventHandler',value:function(t,r){_hasEventHandler(t)||(e.prototype.eventHandlers[t]=[]),e.prototype.eventHandlers[t].push(r)}},{key:'removeEventHandler',value:function(t,r){if(_hasEventHandler(t)){var a=e.prototype.eventHandlers[t].indexOf(r);if(-1!=a)return e.prototype.eventHandlers[t].splice(a,1),!0}return!1}},{key:'_invokeEventHandler',value:function(t){if(_hasEventHandler(t))for(var r=0;r<e.prototype.eventHandlers[t];r++)e.prototype.eventHandlers[t][r]()}},{key:'_hasEventHandler',value:function(t){return!!e.prototype.eventHandlers.hasOwnProperty(t)}}]),e}();t['default']=i},function(e,t,r){'use strict';(function(){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},s=r(42),u=a(s),c=r(50),d=a(c),p=r(133),_=a(p),y=r(93),v=function(e){function t(){var e=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];o(this,t),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e),this.narrativeObjects=[],this.type=s.NarrativeObjectTypes.GROUP,this.playedNarrativeObjects={},this.terminate_condition=y.TerminationFunctionTypes.ALL_PLAYED,this.count=0,this.playcount=0,this.selectionFunctionCandidates=[],this.selectionFunction=void 0,this.resetSelectionFunction(),this.selectionRules=new _['default']}return n(t,e),i(t,[{key:'addAtom',value:function(e){return this._addNarrativeObject(e)}},{key:'removeAtom',value:function(e){return this.removeNarrativeObject(e)}},{key:'addGroup',value:function(e){return this._addNarrativeObject(e)}},{key:'removeGroup',value:function(e){return this.removeNarrativeObject(e)}},{key:'addLayered',value:function(e){return this._addNarrativeObject(e)}},{key:'removeLayered',value:function(e){return this.removeNarrativeObject(e)}},{key:'_addNarrativeObject',value:function(e){1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return!this.hasNarrativeObject(e)&&(this.narrativeObjects.push(e.id),!0)}},{key:'removeNarrativeObject',value:function(e){var t=this.narrativeObjects.indexOf(e.id);return-1!=t&&(this.hasSelectionFunctionCandidate(e)&&this.removeSelectionFunctionCandidate(e),this.narrativeObjects.splice(t,1),!0)}},{key:'hasNarrativeObject',value:function(e){return-1!=this.narrativeObjects.indexOf(e.id)}},{key:'getAllNarrativeObjectIds',value:function(){return this.narrativeObjects}},{key:'setSelectionFunction',value:function(e,t){void 0!=e&&(this.selectionFunction=e),this.data[s.FunctionTypes.GROUP_SELECTION]=t}},{key:'resetSelectionFunction',value:function(){this.selectionFunction=function(e){return this.selectionRules.randomAtom(e)},this.data[s.FunctionTypes.GROUP_SELECTION]=void 0}},{key:'addSelectionFunctionCandidate',value:function(e){this.hasSelectionFunctionCandidate(e)||this.selectionFunctionCandidates.push(e.id)}},{key:'removeSelectionFunctionCandidate',value:function(e){if(this.hasSelectionFunctionCandidate(e)){var t=this.selectionFunctionCandidates.indexOf(e.id);this.selectionFunctionCandidates.splice(t,1)}}},{key:'hasSelectionFunctionCandidate',value:function(e){return-1!=this.selectionFunctionCandidates.indexOf(e.id)}},{key:'getAllSelectionFunctionCandidateIds',value:function(){return this.selectionFunctionCandidates}},{key:'toggleSelectionFunctionCandidate',value:function(e){this.hasSelectionFunctionCandidate(e)?this.removeSelectionFunctionCandidate(e):this.addSelectionFunctionCandidate(e)}},{key:'setTerminationPlaycount',value:function(e){this.terminate_condition=y.TerminationFunctionTypes.PLAY_COUNT,this.count=0,this.playcount=e}},{key:'terminate',value:function(){switch(this.terminate_condition){case y.TerminationFunctionTypes.ALL_PLAYED:return Object.keys(this.playedNarrativeObjects).length==this.selectionFunctionCandidates.length;case y.TerminationFunctionTypes.PLAY_COUNT:return this.count++,this.count>=this.playcount;case y.TerminationFunctionTypes.IMMEDIATELY:default:return!0;}}},{key:'initialise',value:function(e){for(var t=0;t<this.narrativeObjects.length;t++)e.getNarrativeObject(this.narrativeObjects[t]).initialise(e)}},{key:'process',value:regeneratorRuntime.mark(function e(t,r,a,o){var n,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log('Process Group Started'),console.log('Group Selection Started'),this.hasPlayed=!0,this.playedNarrativeObjects={};case 4:if(this.terminate()){e.next=15;break}if(n=this.selectionFunction(r.getNarrativeObjects(this.selectionFunctionCandidates),r),void 0==n){e.next=12;break}return console.log('Group Selected id: '+n.id),e.delegateYield(n.process(t,r,a,o),'t0',9);case 9:this.playedNarrativeObjects.hasOwnProperty(n.id)||(this.playedNarrativeObjects[n.id]=n),e.next=13;break;case 12:this.terminate_condition=y.TerminationFunctionTypes.IMMEDIATELY;case 13:e.next=4;break;case 15:if(console.log('Group Selection Finished'),!r.graph.processedMaxNarrativeObjects()){e.next=20;break}return r.graph.resetProcessCount(),e.next=20,this.wait(t);case 20:if(i=this.selectOutput(r),i==u['default'].terminate){e.next=25;break}if(l=r.getNarrativeObject(i),void 0==l){e.next=25;break}return e.delegateYield(l.process(t,r,a,o),'t1',25);case 25:console.log('Process Group Finished');case 26:case'end':return e.stop();}},e,this)})}]),t}(u['default']);t['default']=v,e.exports=t['default']}).call(t,r(65))},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=function(){function e(){r(this,e)}return a(e,[{key:'notPlayed',value:function(e){return e.filter(function(e){return!1==e.hasPlayed})}},{key:'randomAtom',value:function(e){var t=c(Math.random()*e.length);return console.log('randomAtom selection : '+t),e[t]}}]),e}();t['default']=o,e.exports=t['default']},function(e,t,r){r(135),e.exports=r(337)},function(e,t,r){'use strict';(function(e){function t(e,t,r){e[t]||Object[a](e,t,{writable:!0,configurable:!0,value:r})}if(r(136),r(333),r(334),e._babelPolyfill)throw new Error('only one instance of babel-polyfill is allowed');e._babelPolyfill=!0;var a='defineProperty';t(String.prototype,'padLeft',''.padStart),t(String.prototype,'padRight',''.padEnd),['pop','reverse','shift','keys','values','entries','indexOf','every','some','forEach','map','filter','find','findIndex','includes','join','slice','concat','push','splice','unshift','sort','lastIndexOf','reduce','reduceRight','copyWithin','fill'].forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,r(95))},function(e,t,r){'use strict';r(137),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(217),r(218),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(228),r(229),r(230),r(231),r(232),r(233),r(234),r(235),r(236),r(237),r(238),r(239),r(240),r(87),r(241),r(242),r(114),r(243),r(244),r(245),r(246),r(247),r(117),r(119),r(120),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(313),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),e.exports=r(21)},function(e,t,r){'use strict';var a=r(2),o=r(11),n=r(6),i=r(0),l=r(13),s=r(29).KEY,u=r(3),c=r(51),d=r(43),p=r(32),_=r(5),y=r(97),v=r(67),g=r(138),m=r(54),f=r(1),b=r(15),x=r(22),h=r(31),T=r(36),O=r(100),C=r(16),E=r(7),S=r(34),P=C.f,N=E.f,A=O.f,R=a.Symbol,I=a.JSON,F=I&&I.stringify,w='prototype',L=_('_hidden'),D=_('toPrimitive'),M={}.propertyIsEnumerable,U=c('symbol-registry'),G=c('symbols'),V=c('op-symbols'),Y=Object[w],B='function'==typeof R,W=a.QObject,H=!W||!W[w]||!W[w].findChild,q=n&&u(function(){return 7!=T(N({},'a',{get:function(){return N(this,'a',{value:7}).a}})).a})?function(e,t,r){var a=P(Y,t);a&&delete Y[t],N(e,t,r),a&&e!==Y&&N(Y,t,a)}:N,X=function(e){var t=G[e]=T(R[w]);return t._k=e,t},K=B&&'symbol'==typeof R.iterator?function(e){return'symbol'==typeof e}:function(e){return e instanceof R},z=function(e,t,r){return e===Y&&z(V,t,r),f(e),t=x(t,!0),f(r),o(G,t)?(r.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),r=T(r,{enumerable:h(0,!1)})):(!o(e,L)&&N(e,L,h(1,{})),e[L][t]=!0),q(e,t,r)):N(e,t,r)},$=function(e,t){f(e);for(var r=g(t=b(t)),a=0,o=r.length,n;o>a;)z(e,n=r[a++],t[n]);return e},J=function(e){var t=M.call(this,e=x(e,!0));return this===Y&&o(G,e)&&!o(V,e)?!1:t||!o(this,e)||!o(G,e)||o(this,L)&&this[L][e]?t:!0},Z=function(e,t){if(e=b(e),t=x(t,!0),e!==Y||!o(G,t)||o(V,t)){var r=P(e,t);return r&&o(G,t)&&!(o(e,L)&&e[L][t])&&(r.enumerable=!0),r}},Q=function(e){for(var t=A(b(e)),r=[],a=0,n;t.length>a;)o(G,n=t[a++])||n==L||n==s||r.push(n);return r},ee=function(e){for(var t=e===Y,r=A(t?V:b(e)),a=[],n=0,i;r.length>n;)o(G,i=r[n++])&&(!t||o(Y,i))&&a.push(G[i]);return a};B||(R=function(){if(this instanceof R)throw TypeError('Symbol is not a constructor!');var e=p(0<arguments.length?arguments[0]:void 0);return n&&H&&q(Y,e,{configurable:!0,set:function t(r){this===Y&&t.call(V,r),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),q(this,e,h(1,r))}}),X(e)},l(R[w],'toString',function(){return this._k}),C.f=Z,E.f=z,r(37).f=O.f=Q,r(48).f=J,r(53).f=ee,n&&!r(33)&&l(Y,'propertyIsEnumerable',J,!0),y.f=function(e){return X(_(e))}),i(i.G+i.W+i.F*!B,{Symbol:R});for(var te=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],re=0;te.length>re;)_(te[re++]);for(var j=S(_.store),ae=0;j.length>ae;)v(j[ae++]);i(i.S+i.F*!B,'Symbol',{for:function(e){return o(U,e+='')?U[e]:U[e]=R(e)},keyFor:function(e){if(!K(e))throw TypeError(e+' is not a symbol!');for(var t in U)if(U[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),i(i.S+i.F*!B,'Object',{create:function(e,t){return t===void 0?T(e):$(T(e),t)},defineProperty:z,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),I&&i(i.S+i.F*(!B||u(function(){var e=R();return'[null]'!=F([e])||'{}'!=F({a:e})||'{}'!=F(Object(e))})),'JSON',{stringify:function(e){if(!(void 0===e||K(e))){for(var t=[e],r=1,a,o;arguments.length>r;)t.push(arguments[r++]);return a=t[1],'function'==typeof a&&(o=a),(o||!m(a))&&(a=function(e,t){if(o&&(t=o.call(this,e,t)),!K(t))return t}),t[1]=a,F.apply(I,t)}}}),R[w][D]||r(12)(R[w],D,R[w].valueOf),d(R,'Symbol'),d(Math,'Math',!0),d(a.JSON,'JSON',!0)},function(e,t,r){'use strict';var a=r(34),o=r(53),n=r(48);e.exports=function(e){var t=a(e),r=o.f;if(r)for(var l=r(e),s=n.f,u=0,i;l.length>u;)s.call(e,i=l[u++])&&t.push(i);return t}},function(e,t,r){'use strict';var a=r(0);a(a.S,'Object',{create:r(36)})},function(e,t,r){'use strict';var a=r(0);a(a.S+a.F*!r(6),'Object',{defineProperty:r(7).f})},function(e,t,r){'use strict';var a=r(0);a(a.S+a.F*!r(6),'Object',{defineProperties:r(99)})},function(e,t,r){'use strict';var a=r(15),o=r(16).f;r(25)('getOwnPropertyDescriptor',function(){return function(e,t){return o(a(e),t)}})},function(e,t,r){'use strict';var a=r(9),o=r(17);r(25)('getPrototypeOf',function(){return function(e){return o(a(e))}})},function(e,t,r){'use strict';var a=r(9),o=r(34);r(25)('keys',function(){return function(e){return o(a(e))}})},function(e,t,r){'use strict';r(25)('getOwnPropertyNames',function(){return r(100).f})},function(e,t,r){'use strict';var a=r(4),o=r(29).onFreeze;r(25)('freeze',function(e){return function(t){return e&&a(t)?e(o(t)):t}})},function(e,t,r){'use strict';var a=r(4),o=r(29).onFreeze;r(25)('seal',function(e){return function(t){return e&&a(t)?e(o(t)):t}})},function(e,t,r){'use strict';var a=r(4),o=r(29).onFreeze;r(25)('preventExtensions',function(e){return function(t){return e&&a(t)?e(o(t)):t}})},function(e,t,r){'use strict';var a=r(4);r(25)('isFrozen',function(e){return function(t){return!a(t)||!!e&&e(t)}})},function(e,t,r){'use strict';var a=r(4);r(25)('isSealed',function(e){return function(t){return!a(t)||!!e&&e(t)}})},function(e,t,r){'use strict';var a=r(4);r(25)('isExtensible',function(e){return function(t){return!!a(t)&&(!e||e(t))}})},function(e,t,r){'use strict';var a=r(0);a(a.S+a.F,'Object',{assign:r(101)})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Object',{is:r(154)})},function(e){'use strict';e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){'use strict';var a=r(0);a(a.S,'Object',{setPrototypeOf:r(71).set})},function(e,t,r){'use strict';var a=r(49);({})[r(5)('toStringTag')]='z',r(13)(Object.prototype,'toString',function(){return'[object '+a(this)+']'},!0)},function(e,t,r){'use strict';var a=r(0);a(a.P,'Function',{bind:r(102)})},function(e,t,r){'use strict';var a=r(7).f,o=Function.prototype,n=/^\s*function ([^ (]*)/,i='name';i in o||r(6)&&a(o,i,{configurable:!0,get:function(){try{return(''+this).match(n)[1]}catch(t){return''}}})},function(e,t,r){'use strict';var a=r(4),o=r(17),n=r(5)('hasInstance'),i=Function.prototype;n in i||r(7).f(i,n,{value:function(e){if('function'!=typeof this||!a(e))return!1;if(!a(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){'use strict';var a=r(0),o=r(104);a(a.G+a.F*(parseInt!=o),{parseInt:o})},function(e,t,r){'use strict';var a=r(0),o=r(105);a(a.G+a.F*(parseFloat!=o),{parseFloat:o})},function(e,t,r){'use strict';var a=r(2),o=r(11),n=r(19),i=r(73),s=r(22),l=r(3),u=r(37).f,c=r(16).f,d=r(7).f,p=r(44).trim,_='Number',y=a[_],v=y,g=y.prototype,m=n(r(36)(g))==_,f='trim'in String.prototype,b=function(e){var t=s(e,!1);if('string'==typeof t&&2<t.length){t=f?t.trim():p(t,3);var r=t.charCodeAt(0),a,o,n;if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN;}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+t;}for(var u=t.slice(2),c=0,i=u.length,l;c<i;c++)if(l=u.charCodeAt(c),48>l||l>n)return NaN;return parseInt(u,o)}}return+t};if(!y(' 0o1')||!y('0b1')||y('+0x1')){y=function(e){var t=1>arguments.length?0:e,r=this;return r instanceof y&&(m?l(function(){g.valueOf.call(r)}):n(r)!=_)?i(new v(b(t)),r,y):b(t)};for(var x=r(6)?u(v):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),h=0,T;x.length>h;h++)o(v,T=x[h])&&!o(y,T)&&d(y,T,c(v,T));y.prototype=g,g.constructor=y,r(13)(a,_,y)}},function(e,t,r){'use strict';var a=r(0),o=r(24),n=r(106),l=r(74),i=1 .toFixed,s=c,u=[0,0,0,0,0,0],d='Number.toFixed: incorrect invocation!',p='0',_=function(e,t){for(var r=-1,a=t;6>++r;)a+=e*u[r],u[r]=a%1e7,a=s(a/1e7)},y=function(e){for(var t=6,r=0;0<=--t;)r+=u[t],u[t]=s(r/e),r=1e7*(r%e)},v=function(){for(var e=6,r='';0<=--e;)if(''!=r||0==e||0!==u[e]){var a=u[e]+'';r=''==r?a:r+l.call(p,7-a.length)+a}return r},g=function(e,t,r){var a=!0;_function:for(;a;){var o=e,i=t,n=r;if(a=!1,0===i)return n;if(1==i%2){e=o,t=i-1,r=n*o,a=!0;continue _function}else{e=o*o,t=i/2,r=n,a=!0;continue _function}}},b=function(e){for(var t=0,r=e;4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t};a(a.P+a.F*('0.000'!==8e-5.toFixed(3)||'1'!==0.9.toFixed(0)||'1.25'!==1.255.toFixed(2)||'1000000000000000128'!==1000000000000000100 .toFixed(0)||!r(3)(function(){i.call({})})),'Number',{toFixed:function(t){var r=n(this,d),a=o(t),i='',s=p,u,c,m,f;if(0>a||20<a)throw RangeError(d);if(r!=r)return'NaN';if(-1e21>=r||1e21<=r)return r+'';if(0>r&&(i='-',r=-r),1e-21<r)if(u=b(r*g(2,69,1))-69,c=0>u?r*g(2,-u,1):r/g(2,u,1),c*=4503599627370496,u=52-u,0<u){for(_(0,c),m=a;7<=m;)_(1e7,0),m-=7;for(_(g(10,m,1),0),m=u-1;23<=m;)y(8388608),m-=23;y(1<<m),_(1,1),y(2),s=v()}else _(0,c),_(1<<-u,0),s=v()+l.call(p,a);return 0<a?(f=s.length,s=i+(f<=a?'0.'+l.call(p,a-f)+s:s.slice(0,f-a)+'.'+s.slice(f-a))):s=i+s,s}})},function(e,t,r){'use strict';var a=r(0),o=r(3),n=r(106),i=1 .toPrecision;a(a.P+a.F*(o(function(){return'1'!==i.call(1,void 0)})||!o(function(){i.call({})})),'Number',{toPrecision:function(e){var t=n(this,'Number#toPrecision: incorrect invocation!');return e===void 0?i.call(t):i.call(t,e)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Number',{EPSILON:2.220446049250313e-16})},function(e,t,r){'use strict';var a=r(0),o=r(2).isFinite;a(a.S,'Number',{isFinite:function(e){return'number'==typeof e&&o(e)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Number',{isInteger:r(107)})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Number',{isNaN:function(e){return e!=e}})},function(e,t,r){'use strict';var a=r(0),o=r(107);a(a.S,'Number',{isSafeInteger:function(e){return o(e)&&9007199254740991>=n(e)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Number',{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Number',{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){'use strict';var a=r(0),o=r(105);a(a.S+a.F*(Number.parseFloat!=o),'Number',{parseFloat:o})},function(e,t,r){'use strict';var a=r(0),o=r(104);a(a.S+a.F*(s!=o),'Number',{parseInt:o})},function(e,o,n){'use strict';var i=n(0),l=n(108),s=t,u=Math.acosh;i(i.S+i.F*!(u&&710==c(u(Number.MAX_VALUE))&&u(Infinity)==Infinity),'Math',{acosh:function(e){return 1>(e=+e)?NaN:94906265.62425156<e?a(e)+r:l(e-1+s(e-1)*s(e+1))}})},function(e,r,o){'use strict';function n(e){return isFinite(e=+e)&&0!=e?0>e?-n(-e):a(e+t(e*e+1)):e}var i=o(0),l=Math.asinh;i(i.S+i.F*!(l&&0<1/l(0)),'Math',{asinh:n})},function(e,t,r){'use strict';var o=r(0),n=Math.atanh;o(o.S+o.F*!(n&&0>1/n(-0)),'Math',{atanh:function(e){return 0==(e=+e)?e:a((1+e)/(1-e))/2}})},function(e,t,r){'use strict';var a=r(0),i=r(75);a(a.S,'Math',{cbrt:function(e){return i(e=+e)*o(n(e),1/3)}})},function(e,t,r){'use strict';var o=r(0);o(o.S,'Math',{clz32:function(e){return(e>>>=0)?31-c(a(e+0.5)*Math.LOG2E):32}})},function(e,t,r){'use strict';var a=r(0),o=i;a(a.S,'Math',{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,r){'use strict';var a=r(0),o=r(76);a(a.S+a.F*(o!=l),'Math',{expm1:o})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{fround:r(109)})},function(e,r,a){'use strict';var o=a(0);o(o.S,'Math',{hypot:function(){for(var e=0,r=0,a=arguments.length,o=0,i,l;r<a;)i=n(arguments[r++]),o<i?(l=o/i,e=e*l*l+1,o=i):0<i?(l=i/o,e+=l*l):e+=i;return o==Infinity?Infinity:o*t(e)}})},function(e,t,r){'use strict';var a=r(0),o=Math.imul;a(a.S+a.F*r(3)(function(){return-5!=o(4294967295,5)||2!=o.length}),'Math',{imul:function(e,t){var r=65535,a=+e,o=+t,n=r&a,i=r&o;return 0|n*i+((r&a>>>16)*i+n*(r&o>>>16)<<16>>>0)}})},function(e,t,r){'use strict';var o=r(0);o(o.S,'Math',{log10:function(e){return a(e)*Math.LOG10E}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{log1p:r(108)})},function(e,t,o){'use strict';var n=o(0);n(n.S,'Math',{log2:function(e){return a(e)/r}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{sign:r(75)})},function(e,t,r){'use strict';var a=r(0),o=r(76),l=i;a(a.S+a.F*r(3)(function(){return!0}),'Math',{sinh:function(e){return 1>n(e=+e)?(o(e)-o(-e))/2:(l(e-1)-l(-e-1))*(Math.E/2)}})},function(e,t,r){'use strict';var a=r(0),o=r(76),n=i;a(a.S,'Math',{tanh:function(e){var t=o(e=+e),r=o(-e);return t==Infinity?1:r==Infinity?-1:(t-r)/(n(e)+n(-e))}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{trunc:function(e){return(0<e?c:d)(e)}})},function(e,t,r){'use strict';var a=r(0),o=r(35),n=String.fromCharCode,i=String.fromCodePoint;a(a.S+a.F*(!!i&&1!=i.length),'String',{fromCodePoint:function(){for(var e=[],t=arguments.length,r=0,a;t>r;){if(a=+arguments[r++],o(a,1114111)!==a)throw RangeError(a+' is not a valid code point');e.push(65536>a?n(a):n(((a-=65536)>>10)+55296,a%1024+56320))}return e.join('')}})},function(e,t,r){'use strict';var a=r(0),o=r(15),n=r(8);a(a.S,'String',{raw:function(e){for(var t=o(e.raw),r=n(t.length),a=arguments.length,l=[],s=0;r>s;)l.push(t[s++]+''),s<a&&l.push(arguments[s]+'');return l.join('')}})},function(e,t,r){'use strict';r(44)('trim',function(e){return function(){return e(this,3)}})},function(e,t,r){'use strict';var a=r(77)(!0);r(78)(String,'String',function(e){this._t=e+'',this._i=0},function(){var e=this._t,t=this._i,r;return t>=e.length?{value:void 0,done:!0}:(r=a(e,t),this._i+=r.length,{value:r,done:!1})})},function(e,t,r){'use strict';var a=r(0),o=r(77)(!1);a(a.P,'String',{codePointAt:function(e){return o(this,e)}})},function(e,t,r){'use strict';var a=r(0),o=r(8),n=r(80),i='endsWith',l=''[i];a(a.P+a.F*r(81)(i),'String',{endsWith:function(e){var t=n(this,e,i),r=1<arguments.length?arguments[1]:void 0,a=o(t.length),l=r===void 0?a:p(o(r),a),s=e+'';return t.slice(l-s.length,l)===s}})},function(e,t,r){'use strict';var a=r(0),o=r(80),n='includes';a(a.P+a.F*r(81)(n),'String',{includes:function(e){return!!~o(this,e,n).indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,r){'use strict';var a=r(0);a(a.P,'String',{repeat:r(74)})},function(e,t,r){'use strict';var a=r(0),o=r(8),n=r(80),i='startsWith',l=''[i];a(a.P+a.F*r(81)(i),'String',{startsWith:function(e){var t=n(this,e,i),r=o(p(1<arguments.length?arguments[1]:void 0,t.length)),a=e+'';return t.slice(r,r+a.length)===a}})},function(e,t,r){'use strict';r(14)('anchor',function(e){return function(t){return e(this,'a','name',t)}})},function(e,t,r){'use strict';r(14)('big',function(e){return function(){return e(this,'big','','')}})},function(e,t,r){'use strict';r(14)('blink',function(e){return function(){return e(this,'blink','','')}})},function(e,t,r){'use strict';r(14)('bold',function(e){return function(){return e(this,'b','','')}})},function(e,t,r){'use strict';r(14)('fixed',function(e){return function(){return e(this,'tt','','')}})},function(e,t,r){'use strict';r(14)('fontcolor',function(e){return function(t){return e(this,'font','color',t)}})},function(e,t,r){'use strict';r(14)('fontsize',function(e){return function(t){return e(this,'font','size',t)}})},function(e,t,r){'use strict';r(14)('italics',function(e){return function(){return e(this,'i','','')}})},function(e,t,r){'use strict';r(14)('link',function(e){return function(t){return e(this,'a','href',t)}})},function(e,t,r){'use strict';r(14)('small',function(e){return function(){return e(this,'small','','')}})},function(e,t,r){'use strict';r(14)('strike',function(e){return function(){return e(this,'strike','','')}})},function(e,t,r){'use strict';r(14)('sub',function(e){return function(){return e(this,'sub','','')}})},function(e,t,r){'use strict';r(14)('sup',function(e){return function(){return e(this,'sup','','')}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Date',{now:function(){return new Date().getTime()}})},function(e,t,r){'use strict';var a=r(0),o=r(9),n=r(22);a(a.P+a.F*r(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(){var e=o(this),t=n(e);return'number'!=typeof t||isFinite(t)?e.toISOString():null}})},function(e,t,r){'use strict';var a=r(0),o=r(216);a(a.P+a.F*(Date.prototype.toISOString!==o),'Date',{toISOString:o})},function(e,t,r){'use strict';var a=r(3),o=Date.prototype.getTime,i=Date.prototype.toISOString,l=function(e){return 9<e?e:'0'+e};e.exports=a(function(){return'0385-07-25T07:06:39.999Z'!=i.call(new Date(-50000000000001))})||!a(function(){i.call(new Date(NaN))})?function(){if(!isFinite(o.call(this)))throw RangeError('Invalid time value');var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),a=0>t?'-':9999<t?'+':'';return a+('00000'+n(t)).slice(a?-6:-4)+'-'+l(e.getUTCMonth()+1)+'-'+l(e.getUTCDate())+'T'+l(e.getUTCHours())+':'+l(e.getUTCMinutes())+':'+l(e.getUTCSeconds())+'.'+(99<r?r:'0'+l(r))+'Z'}:i},function(e,t,r){'use strict';var a=Date.prototype,o='Invalid Date',n='toString',i=a[n],l=a.getTime;new Date(NaN)+''!=o&&r(13)(a,n,function(){var e=l.call(this);return e===e?i.call(this):o})},function(e,t,r){'use strict';var a=r(5)('toPrimitive'),o=Date.prototype;a in o||r(12)(o,a,r(219))},function(e,t,r){'use strict';var a=r(1),o=r(22),n='number';e.exports=function(e){if('string'!==e&&e!==n&&'default'!==e)throw TypeError('Incorrect hint');return o(a(this),e!=n)}},function(e,t,r){'use strict';var a=r(0);a(a.S,'Array',{isArray:r(54)})},function(e,t,r){'use strict';var a=r(18),o=r(0),n=r(9),i=r(110),l=r(82),s=r(8),u=r(83),c=r(84);o(o.S+o.F*!r(56)(function(e){Array.from(e)}),'Array',{from:function(e){var t=n(e),r='function'==typeof this?this:Array,o=arguments.length,d=1<o?arguments[1]:void 0,p=void 0!==d,_=0,y=c(t),v,g,m,f;if(p&&(d=a(d,2<o?arguments[2]:void 0,2)),void 0!=y&&!(r==Array&&l(y)))for(f=y.call(t),g=new r;!(m=f.next()).done;_++)u(g,_,p?i(f,d,[m.value,_],!0):m.value);else for(v=s(t.length),g=new r(v);v>_;_++)u(g,_,p?d(t[_],_):t[_]);return g.length=_,g}})},function(e,t,r){'use strict';var a=r(0),o=r(83);a(a.S+a.F*r(3)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),'Array',{of:function(){for(var e=0,t=arguments.length,r=new('function'==typeof this?this:Array)(t);t>e;)o(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){'use strict';var a=r(0),o=r(15),n=[].join;a(a.P+a.F*(r(47)!=Object||!r(20)(n)),'Array',{join:function(e){return n.call(o(this),e===void 0?',':e)}})},function(e,t,r){'use strict';var a=r(0),o=r(70),n=r(19),l=r(35),s=r(8),u=[].slice;a(a.P+a.F*r(3)(function(){o&&u.call(o)}),'Array',{slice:function(e,t){var r=s(this.length),a=n(this);if(t=void 0===t?r:t,'Array'==a)return u.call(this,e,t);for(var o=l(e,r),c=l(t,r),d=s(c-o),p=Array(d),_=0;_<d;_++)p[_]='String'==a?this.charAt(o+_):this[o+_];return p}})},function(e,t,r){'use strict';var a=r(0),o=r(10),n=r(9),i=r(3),l=[].sort,s=[1,2,3];a(a.P+a.F*(i(function(){s.sort(void 0)})||!i(function(){s.sort(null)})||!r(20)(l)),'Array',{sort:function(e){return e===void 0?l.call(n(this)):l.call(n(this),o(e))}})},function(e,t,r){'use strict';var a=r(0),o=r(26)(0),n=r(20)([].forEach,!0);a(a.P+a.F*!n,'Array',{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(4),o=r(54),n=r(5)('species');e.exports=function(e){var t;return o(e)&&(t=e.constructor,'function'==typeof t&&(t===Array||o(t.prototype))&&(t=void 0),a(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,r){'use strict';var a=r(0),o=r(26)(1);a(a.P+a.F*!r(20)([].map,!0),'Array',{map:function(e){return o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(0),o=r(26)(2);a(a.P+a.F*!r(20)([].filter,!0),'Array',{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(0),o=r(26)(3);a(a.P+a.F*!r(20)([].some,!0),'Array',{some:function(e){return o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(0),o=r(26)(4);a(a.P+a.F*!r(20)([].every,!0),'Array',{every:function(e){return o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(0),o=r(111);a(a.P+a.F*!r(20)([].reduce,!0),'Array',{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){'use strict';var a=r(0),o=r(111);a(a.P+a.F*!r(20)([].reduceRight,!0),'Array',{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){'use strict';var a=r(0),o=r(52)(!1),n=[].indexOf,i=!!n&&0>1/[1].indexOf(1,-0);a(a.P+a.F*(i||!r(20)(n)),'Array',{indexOf:function(e){return i?n.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,r){'use strict';var a=r(0),o=r(15),n=r(24),i=r(8),l=[].lastIndexOf,s=!!l&&0>1/[1].lastIndexOf(1,-0);a(a.P+a.F*(s||!r(20)(l)),'Array',{lastIndexOf:function(e){if(s)return l.apply(this,arguments)||0;var t=o(this),r=i(t.length),a=r-1;for(1<arguments.length&&(a=p(a,n(arguments[1]))),0>a&&(a=r+a);0<=a;a--)if(a in t&&t[a]===e)return a||0;return-1}})},function(e,t,r){'use strict';var a=r(0);a(a.P,'Array',{copyWithin:r(112)}),r(30)('copyWithin')},function(e,t,r){'use strict';var a=r(0);a(a.P,'Array',{fill:r(86)}),r(30)('fill')},function(e,t,r){'use strict';var a=r(0),o=r(26)(5),n='find',i=!0;n in[]&&[,][n](function(){i=!1}),a(a.P+a.F*i,'Array',{find:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}}),r(30)(n)},function(e,t,r){'use strict';var a=r(0),o=r(26)(6),n='findIndex',i=!0;n in[]&&[,][n](function(){i=!1}),a(a.P+a.F*i,'Array',{findIndex:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}}),r(30)(n)},function(e,t,r){'use strict';r(38)('Array')},function(e,t,r){'use strict';var a=r(2),o=r(73),n=r(7).f,l=r(37).f,s=r(55),u=r(57),c=a.RegExp,d=c,_=c.prototype,p=/a/g,y=/a/g,v=new c(p)!==p;if(r(6)&&(!v||r(3)(function(){return y[r(5)('match')]=!1,c(p)!=p||c(y)==y||'/a/i'!=c(p,'i')}))){c=function(e,t){var r=this instanceof c,a=s(e),n=t===void 0;return!r&&a&&e.constructor===c&&n?e:o(v?new d(a&&!n?e.source:e,t):d((a=e instanceof c)?e.source:e,a&&n?u.call(e):t),r?this:_,c)};for(var g=function(e){(e in c)||n(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},m=l(d),f=0;m.length>f;)g(m[f++]);_.constructor=c,c.prototype=_,r(13)(a,'RegExp',c)}r(38)('RegExp')},function(e,t,r){'use strict';r(114);var a=r(1),o=r(57),n=r(6),i='toString',l=/./[i],s=function(e){r(13)(RegExp.prototype,i,e,!0)};r(3)(function(){return'/a/b'!=l.call({source:'a',flags:'b'})})?s(function(){var e=a(this);return'/'.concat(e.source,'/','flags'in e?e.flags:!n&&e instanceof RegExp?o.call(e):void 0)}):l.name!=i&&s(function(){return l.call(this)})},function(e,t,r){'use strict';r(58)('match',1,function(e,t,r){return[function(r){var a=e(this),o=r==void 0?void 0:r[t];return o===void 0?new RegExp(r)[t](a+''):o.call(r,a)},r]})},function(e,t,r){'use strict';r(58)('replace',2,function(e,t,r){return[function(a,o){var n=e(this),i=a==void 0?void 0:a[t];return i===void 0?r.call(n+'',a,o):i.call(a,n,o)},r]})},function(e,t,r){'use strict';r(58)('search',1,function(e,t,r){return[function(r){var a=e(this),o=r==void 0?void 0:r[t];return o===void 0?new RegExp(r)[t](a+''):o.call(r,a)},r]})},function(e,t,r){'use strict';r(58)('split',2,function(e,t,a){var o=r(55),n=a,l=[].push,i='split',s='length',u='lastIndex';if('c'=='abbc'[i](/(b)*/)[1]||4!='test'[i](/(?:)/,-1)[s]||2!='ab'[i](/(?:ab)*/)[s]||4!='.'[i](/(.?)(.?)/)[s]||1<'.'[i](/()()/)[s]||''[i](/.?/)[s]){var c=/()??/.exec('')[1]===void 0;a=function(e,t){var r=this+'';if(void 0===e&&0===t)return[];if(!o(e))return n.call(r,e,t);var a=[],d=(e.ignoreCase?'i':'')+(e.multiline?'m':'')+(e.unicode?'u':'')+(e.sticky?'y':''),p=0,_=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,d+'g'),v,g,m,f,b;for(c||(v=new RegExp('^'+y.source+'$(?!\\s)',d));(g=y.exec(r))&&(m=g.index+g[0][s],!(m>p&&(a.push(r.slice(p,g.index)),!c&&1<g[s]&&g[0].replace(v,function(){for(b=1;b<arguments[s]-2;b++)void 0===arguments[b]&&(g[b]=void 0)}),1<g[s]&&g.index<r[s]&&l.apply(a,g.slice(1)),f=g[0][s],p=m,a[s]>=_)));)y[u]===g.index&&y[u]++;return p===r[s]?(f||!y.test(''))&&a.push(''):a.push(r.slice(p)),a[s]>_?a.slice(0,_):a}}else'0'[i](void 0,0)[s]&&(a=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)});return[function(r,o){var n=e(this),i=r==void 0?void 0:r[t];return i===void 0?a.call(n+'',r,o):i.call(r,n,o)},a]})},function(e,t,r){'use strict';var a=r(33),o=r(2),n=r(18),i=r(49),l=r(0),s=r(4),u=r(10),c=r(39),d=r(40),p=r(59),_=r(88).set,y=r(89)(),v=r(90),g=r(115),m=r(116),f='Promise',b=o.TypeError,x=o.process,h=o[f],T='process'==i(x),O=function(){},k=w=v.f,C=!!function(){try{var e=h.resolve(1),t=(e.constructor={})[r(5)('species')]=function(e){e(O,O)};return(T||'function'==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(t){}}(),E=function(e){var t;return s(e)&&'function'==typeof(t=e.then)&&t},S=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var a=e._v,o=1==e._s,n=0,i=function(t){var r=o?t.ok:t.fail,n=t.resolve,i=t.reject,l=t.domain,s,u;try{r?(!o&&(2==e._h&&A(e),e._h=1),!0===r?s=a:(l&&l.enter(),s=r(a),l&&l.exit()),s===t.promise?i(b('Promise-chain cycle')):(u=E(s))?u.call(s,n,i):n(s)):i(a)}catch(t){i(t)}};r.length>n;)i(r[n++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){_.call(o,function(){var t=e._v,r=N(e),a,n,i;if(r&&(a=g(function(){T?x.emit('unhandledRejection',t,e):(n=o.onunhandledrejection)?n({promise:e,reason:t}):(i=o.console)&&i.error&&i.error('Unhandled promise rejection',t)}),e._h=T||N(e)?2:1),e._a=void 0,r&&a.e)throw a.v})},N=function e(t){if(1==t._h)return!1;for(var r=t._a||t._c,a=0,o;r.length>a;)if(o=r[a++],o.fail||!e(o.promise))return!1;return!0},A=function(e){_.call(o,function(){var t;T?x.emit('rejectionHandled',e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),S(t,!0))},I=function e(t){var r=this,a;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw b('Promise can\'t be resolved itself');(a=E(t))?y(function(){var o={_w:r,_d:!1};try{a.call(t,n(e,o,1),n(R,o,1))}catch(t){R.call(o,t)}}):(r._v=t,r._s=1,S(r,!1))}catch(t){R.call({_w:r,_d:!1},t)}}},F,w,L,D;C||(h=function(e){c(this,h,f,'_h'),u(e),F.call(this);try{e(n(I,this,1),n(R,this,1))}catch(e){R.call(this,e)}},F=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},F.prototype=r(41)(h.prototype,{then:function(e,t){var r=k(p(this,h));return r.ok='function'!=typeof e||e,r.fail='function'==typeof t&&t,r.domain=T?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&S(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),L=function(){var e=new F;this.promise=e,this.resolve=n(I,e,1),this.reject=n(R,e,1)},v.f=k=function(e){return e===h||e===D?new L(e):w(e)}),l(l.G+l.W+l.F*!C,{Promise:h}),r(43)(h,f),r(38)(f),D=r(21)[f],l(l.S+l.F*!C,f,{reject:function(e){var t=k(this),r=t.reject;return r(e),t.promise}}),l(l.S+l.F*(a||!C),f,{resolve:function(e){return m(a&&this===D?h:this,e)}}),l(l.S+l.F*!(C&&r(56)(function(e){h.all(e)['catch'](O)})),f,{all:function(e){var t=this,r=k(t),a=r.resolve,o=r.reject,n=g(function(){var r=[],n=0,i=1;d(e,!1,function(e){var l=n++,s=!1;r.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,r[l]=e,--i||a(r))},o)}),--i||a(r)});return n.e&&o(n.v),r.promise},race:function(e){var t=this,r=k(t),a=r.reject,o=g(function(){d(e,!1,function(e){t.resolve(e).then(r.resolve,a)})});return o.e&&a(o.v),r.promise}})},function(e,t,r){'use strict';var a=r(121),o=r(46),n='WeakSet';r(60)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return a.def(o(this,n),e,!0)}},a,!1,!0)},function(e,t,r){'use strict';var a=r(0),o=r(61),n=r(91),i=r(1),l=r(35),s=r(8),u=r(4),c=r(2).ArrayBuffer,d=r(59),p=n.ArrayBuffer,_=n.DataView,y=o.ABV&&c.isView,v=p.prototype.slice,g=o.VIEW,m='ArrayBuffer';a(a.G+a.W+a.F*(c!==p),{ArrayBuffer:p}),a(a.S+a.F*!o.CONSTR,m,{isView:function(e){return y&&y(e)||u(e)&&g in e}}),a(a.P+a.U+a.F*r(3)(function(){return!new p(2).slice(1,void 0).byteLength}),m,{slice:function(e,t){if(v!==void 0&&t===void 0)return v.call(i(this),e);for(var r=i(this).byteLength,a=l(e,r),o=l(void 0===t?r:t,r),n=new(d(this,p))(s(o-a)),u=new _(this),c=new _(n),y=0;a<o;)c.setUint8(y++,u.getUint8(a++));return n}}),r(38)(m)},function(e,t,r){'use strict';var a=r(0);a(a.G+a.W+a.F*!r(61).ABV,{DataView:r(91).DataView})},function(e,t,r){'use strict';r(27)('Int8',1,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Uint8',1,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Uint8',1,function(e){return function(t,r,a){return e(this,t,r,a)}},!0)},function(e,t,r){'use strict';r(27)('Int16',2,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Uint16',2,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Int32',4,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Uint32',4,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Float32',4,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';r(27)('Float64',8,function(e){return function(t,r,a){return e(this,t,r,a)}})},function(e,t,r){'use strict';var a=r(0),o=r(10),n=r(1),i=(r(2).Reflect||{}).apply,l=Function.apply;a(a.S+a.F*!r(3)(function(){i(function(){})}),'Reflect',{apply:function(e,t,r){var a=o(e),s=n(r);return i?i(a,t,s):l.call(a,t,s)}})},function(e,t,r){'use strict';var a=r(0),o=r(36),n=r(10),i=r(1),l=r(4),s=r(3),u=r(102),c=(r(2).Reflect||{}).construct,d=s(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),p=!s(function(){c(function(){})});a(a.S+a.F*(d||p),'Reflect',{construct:function(e,t){n(e),i(t);var r=3>arguments.length?e:n(arguments[2]);if(p&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);}var a=[null];return a.push.apply(a,t),new(u.apply(e,a))}var s=r.prototype,_=o(l(s)?s:Object.prototype),y=Function.apply.call(e,_,t);return l(y)?y:_}})},function(e,t,r){'use strict';var a=r(7),o=r(0),n=r(1),i=r(22);o(o.S+o.F*r(3)(function(){Reflect.defineProperty(a.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(e,t,r){n(e),t=i(t,!0),n(r);try{return a.f(e,t,r),!0}catch(t){return!1}}})},function(e,t,r){'use strict';var a=r(0),o=r(16).f,n=r(1);a(a.S,'Reflect',{deleteProperty:function(e,t){var r=o(n(e),t);return r&&!r.configurable?!1:delete e[t]}})},function(e,t,r){'use strict';var a=r(0),o=r(1),n=function(e){this._t=o(e),this._i=0;var t=this._k=[],r;for(r in e)t.push(r)};r(79)(n,'Object',function(){var e=this,t=e._k,r;do if(e._i>=t.length)return{value:void 0,done:!0};while(!((r=t[e._i++])in e._t));return{value:r,done:!1}}),a(a.S,'Reflect',{enumerate:function(e){return new n(e)}})},function(e,t,r){'use strict';var a=r(16),o=r(17),n=r(11),i=r(0),l=r(4),s=r(1);i(i.S,'Reflect',{get:function(e,t){var r=arguments,i=!0;_function:for(;i;){var u=e,c=t;i=!1;var d=3>r.length?u:r[2],p,_;if(s(u)===d)return u[c];if(p=a.f(u,c))return n(p,'value')?p.value:void 0===p.get?void 0:p.get.call(d);if(l(_=o(u))){r=[e=_,t=c,d],i=!0,d=p=_=void 0;continue _function}}}})},function(e,t,r){'use strict';var a=r(16),o=r(0),n=r(1);o(o.S,'Reflect',{getOwnPropertyDescriptor:function(e,t){return a.f(n(e),t)}})},function(e,t,r){'use strict';var a=r(0),o=r(17),n=r(1);a(a.S,'Reflect',{getPrototypeOf:function(e){return o(n(e))}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Reflect',{has:function(e,t){return t in e}})},function(e,t,r){'use strict';var a=r(0),o=r(1),n=Object.isExtensible;a(a.S,'Reflect',{isExtensible:function(e){return o(e),!n||n(e)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Reflect',{ownKeys:r(123)})},function(e,t,r){'use strict';var a=r(0),o=r(1),n=Object.preventExtensions;a(a.S,'Reflect',{preventExtensions:function(e){o(e);try{return n&&n(e),!0}catch(t){return!1}}})},function(e,t,r){'use strict';var a=r(7),o=r(16),n=r(17),i=r(11),l=r(0),s=r(31),u=r(1),c=r(4);l(l.S,'Reflect',{set:function(e,t,r){var l=arguments,d=!0;_function:for(;d;){var p=e,_=t,y=r;d=!1;var v=4>l.length?p:l[3],g=o.f(u(p),_),m,f;if(!g){if(c(f=n(p))){l=[e=f,t=_,r=y,v],d=!0,v=g=m=f=void 0;continue _function}g=s(0)}return i(g,'value')?!1!==g.writable&&c(v)&&(m=o.f(v,_)||s(0),m.value=y,a.f(v,_,m),!0):void 0!==g.set&&(g.set.call(v,y),!0)}}})},function(e,t,r){'use strict';var a=r(0),o=r(71);o&&a(a.S,'Reflect',{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(t){return!1}}})},function(e,t,r){'use strict';var a=r(0),o=r(52)(!0);a(a.P,'Array',{includes:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}}),r(30)('includes')},function(e,t,r){'use strict';var a=r(0),o=r(124),n=r(9),i=r(8),l=r(10),s=r(85);a(a.P,'Array',{flatMap:function(e){var t=n(this),r,a;return l(e),r=i(t.length),a=s(t,0),o(a,t,t,r,0,1,e,arguments[1]),a}}),r(30)('flatMap')},function(e,t,r){'use strict';var a=r(0),o=r(124),n=r(9),i=r(8),l=r(24),s=r(85);a(a.P,'Array',{flatten:function(){var e=arguments[0],t=n(this),r=i(t.length),a=s(t,0);return o(a,t,t,r,0,void 0===e?1:l(e)),a}}),r(30)('flatten')},function(e,t,r){'use strict';var a=r(0),o=r(77)(!0);a(a.P,'String',{at:function(e){return o(this,e)}})},function(e,t,r){'use strict';var a=r(0),o=r(125);a(a.P,'String',{padStart:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,r){'use strict';var a=r(0),o=r(125);a(a.P,'String',{padEnd:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,r){'use strict';r(44)('trimLeft',function(e){return function(){return e(this,1)}},'trimStart')},function(e,t,r){'use strict';r(44)('trimRight',function(e){return function(){return e(this,2)}},'trimEnd')},function(e,t,r){'use strict';var a=r(0),o=r(23),n=r(8),i=r(55),l=r(57),s=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};r(79)(u,'RegExp String',function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),a(a.P,'String',{matchAll:function(e){if(o(this),!i(e))throw TypeError(e+' is not a regexp!');var t=this+'',r='flags'in s?e.flags+'':l.call(e),a=new RegExp(e.source,~r.indexOf('g')?r:'g'+r);return a.lastIndex=n(e.lastIndex),new u(a,t)}})},function(e,t,r){'use strict';r(67)('asyncIterator')},function(e,t,r){'use strict';r(67)('observable')},function(e,t,r){'use strict';var a=r(0),o=r(123),n=r(15),l=r(16),s=r(83);a(a.S,'Object',{getOwnPropertyDescriptors:function(e){for(var t=n(e),r=l.f,a=o(t),u={},c=0,i,d;a.length>c;)d=r(t,i=a[c++]),void 0!==d&&s(u,i,d);return u}})},function(e,t,r){'use strict';var a=r(0),o=r(126)(!1);a(a.S,'Object',{values:function(e){return o(e)}})},function(e,t,r){'use strict';var a=r(0),o=r(126)(!0);a(a.S,'Object',{entries:function(e){return o(e)}})},function(e,t,r){'use strict';var a=r(0),o=r(9),n=r(10),i=r(7);r(6)&&a(a.P+r(62),'Object',{__defineGetter__:function(e,t){i.f(o(this),e,{get:n(t),enumerable:!0,configurable:!0})}})},function(e,t,r){'use strict';var a=r(0),o=r(9),n=r(10),i=r(7);r(6)&&a(a.P+r(62),'Object',{__defineSetter__:function(e,t){i.f(o(this),e,{set:n(t),enumerable:!0,configurable:!0})}})},function(e,t,r){'use strict';var a=r(0),o=r(9),n=r(22),i=r(17),l=r(16).f;r(6)&&a(a.P+r(62),'Object',{__lookupGetter__:function(e){var t=o(this),r=n(e,!0),a;do if(a=l(t,r))return a.get;while(t=i(t))}})},function(e,t,r){'use strict';var a=r(0),o=r(9),n=r(22),i=r(17),l=r(16).f;r(6)&&a(a.P+r(62),'Object',{__lookupSetter__:function(e){var t=o(this),r=n(e,!0),a;do if(a=l(t,r))return a.set;while(t=i(t))}})},function(e,t,r){'use strict';var a=r(0);a(a.P+a.R,'Map',{toJSON:r(127)('Map')})},function(e,t,r){'use strict';var a=r(0);a(a.P+a.R,'Set',{toJSON:r(127)('Set')})},function(e,t,r){'use strict';r(63)('Map')},function(e,t,r){'use strict';r(63)('Set')},function(e,t,r){'use strict';r(63)('WeakMap')},function(e,t,r){'use strict';r(63)('WeakSet')},function(e,t,r){'use strict';r(64)('Map')},function(e,t,r){'use strict';r(64)('Set')},function(e,t,r){'use strict';r(64)('WeakMap')},function(e,t,r){'use strict';r(64)('WeakSet')},function(e,t,r){'use strict';var a=r(0);a(a.G,{global:r(2)})},function(e,t,r){'use strict';var a=r(0);a(a.S,'System',{global:r(2)})},function(e,t,r){'use strict';var a=r(0),o=r(19);a(a.S,'Error',{isError:function(e){return'Error'===o(e)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{clamp:function(e,t,r){return p(r,u(t,e))}})},function(t,r,a){'use strict';var o=a(0);o(o.S,'Math',{DEG_PER_RAD:e/180})},function(t,r,a){'use strict';var o=a(0);o(o.S,'Math',{degrees:function(t){return t*(180/e)}})},function(e,t,r){'use strict';var a=r(0),o=r(129),n=r(109);a(a.S,'Math',{fscale:function(e,t,r,a,i){return n(o(e,t,r,a,i))}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{iaddh:function(e,t,r,a){var o=e>>>0,n=r>>>0;return 0|(t>>>0)+(a>>>0)+((o&n|(o|n)&~(o+n>>>0))>>>31)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{isubh:function(e,t,r,a){var o=e>>>0,n=r>>>0;return 0|(t>>>0)-(a>>>0)-((~o&n|~(o^n)&o-n>>>0)>>>31)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{imulh:function(e,r){var a=65535,o=+e,n=+r,i=o&a,l=n&a,s=o>>16,c=n>>16,d=(s*l>>>0)+(i*l>>>16);return s*c+(d>>16)+((i*c>>>0)+(d&a)>>16)}})},function(t,r,a){'use strict';var o=a(0);o(o.S,'Math',{RAD_PER_DEG:180/e})},function(t,r,a){'use strict';var o=a(0);o(o.S,'Math',{radians:function(t){return t*(e/180)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{scale:r(129)})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{umulh:function(e,r){var a=65535,o=+e,n=+r,i=o&a,l=n&a,s=o>>>16,c=n>>>16,d=(s*l>>>0)+(i*l>>>16);return s*c+(d>>>16)+((i*c>>>0)+(d&a)>>>16)}})},function(e,t,r){'use strict';var a=r(0);a(a.S,'Math',{signbit:function(e){return(e=+e)==e?0==e?1/e==Infinity:0<e:e}})},function(e,t,r){'use strict';var a=r(0),o=r(21),n=r(2),i=r(59),l=r(116);a(a.P+a.R,'Promise',{finally:function(t){var r=i(this,o.Promise||n.Promise),e='function'==typeof t;return this.then(e?function(e){return l(r,t()).then(function(){return e})}:t,e?function(a){return l(r,t()).then(function(){throw a})}:t)}})},function(e,t,r){'use strict';var a=r(0),o=r(90),n=r(115);a(a.S,'Promise',{try:function(e){var t=o.f(this),r=n(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=a.key,i=a.set;a.exp({defineMetadata:function(e,t,r,a){i(e,t,o(r),n(a))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=a.key,i=a.map,l=a.store;a.exp({deleteMetadata:function(e,t){var r=3>arguments.length?void 0:n(arguments[2]),a=i(o(t),r,!1);if(void 0===a||!a['delete'](e))return!1;if(a.size)return!0;var s=l.get(t);return s['delete'](r),!!s.size||l['delete'](t)}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=r(17),i=a.has,l=a.get,s=a.key,u=function(e,t,r){var a=!0;_function:for(;a;){var o=e,s=t,u=r;a=!1;var c=i(o,s,u);if(c)return l(o,s,u);var d=n(s);if(null!==d){e=o,t=d,r=u,a=!0,c=d=void 0;continue _function}else return}};a.exp({getMetadata:function(e,t){return u(e,o(t),3>arguments.length?void 0:s(arguments[2]))}})},function(e,t,r){'use strict';var a=r(119),o=r(128),n=r(28),i=r(1),l=r(17),s=n.keys,u=n.key,c=function e(t,r){var n=s(t,r),i=l(t);if(null===i)return n;var u=e(i,r);return u.length?n.length?o(new a(n.concat(u))):u:n};n.exp({getMetadataKeys:function(e){return c(i(e),2>arguments.length?void 0:u(arguments[1]))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=a.get,i=a.key;a.exp({getOwnMetadata:function(e,t){return n(e,o(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=a.keys,i=a.key;a.exp({getOwnMetadataKeys:function(e){return n(o(e),2>arguments.length?void 0:i(arguments[1]))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=r(17),i=a.has,l=a.key,s=function(e,t,r){var a=!0;_function:for(;a;){var o=e,l=t,s=r;a=!1;var u=i(o,l,s);if(u)return!0;var c=n(l);if(null!==c){e=o,t=c,r=s,a=!0,u=c=void 0;continue _function}else return!1}};a.exp({hasMetadata:function(e,t){return s(e,o(t),3>arguments.length?void 0:l(arguments[2]))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=a.has,i=a.key;a.exp({hasOwnMetadata:function(e,t){return n(e,o(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,r){'use strict';var a=r(28),o=r(1),n=r(10),i=a.key,l=a.set;a.exp({metadata:function(e,t){return function(r,a){l(e,t,(a===void 0?n:o)(r),i(a))}}})},function(e,t,r){'use strict';var a=r(0),o=r(89)(),n=r(2).process,i='process'==r(19)(n);a(a.G,{asap:function(e){var t=i&&n.domain;o(t?t.bind(e):e)}})},function(e,t,r){'use strict';var a=r(0),o=r(2),n=r(21),i=r(89)(),l=r(5)('observable'),s=r(10),u=r(1),c=r(39),d=r(41),p=r(12),_=r(40),y=_.RETURN,v=function(e){return null==e?void 0:s(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},f=function(e){return e._o===void 0},m=function(e){f(e)||(e._o=void 0,g(e))},b=function(t,e){u(t),this._c=void 0,this._o=t,t=new x(this);try{var r=e(t),a=r;null!=r&&('function'==typeof r.unsubscribe?r=function(){a.unsubscribe()}:s(r),this._c=r)}catch(r){return void t.error(r)}f(this)&&g(this)};b.prototype=d({},{unsubscribe:function(){m(this)}});var x=function(e){this._s=e};x.prototype=d({},{next:function(e){var t=this._s;if(!f(t)){var r=t._o;try{var a=v(r.next);if(a)return a.call(r,e)}catch(r){try{m(t)}finally{throw r}}}},error:function(e){var t=this._s;if(f(t))throw e;var r=t._o;t._o=void 0;try{var a=v(r.error);if(!a)throw e;e=a.call(r,e)}catch(r){try{g(t)}finally{throw r}}return g(t),e},complete:function(e){var t=this._s;if(!f(t)){var r=t._o;t._o=void 0;try{var a=v(r.complete);e=a?a.call(r,e):void 0}catch(r){try{g(t)}finally{throw r}}return g(t),e}}});var h=function(e){c(this,h,'Observable','_f')._f=s(e)};d(h.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(n.Promise||o.Promise)(function(r,a){s(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(t){a(t),o.unsubscribe()}},error:a,complete:r})})}}),d(h,{from:function(e){var t='function'==typeof this?this:h,r=v(u(e)[l]);if(r){var a=u(r.call(e));return a.constructor===t?a:new t(function(e){return a.subscribe(e)})}return new t(function(t){var r=!1;return i(function(){if(!r){try{if(_(e,!1,function(e){if(t.next(e),r)return y})===y)return}catch(a){if(r)throw a;return void t.error(a)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new('function'==typeof this?this:h)(function(e){var t=!1;return i(function(){if(!t){for(var a=0;a<r.length;++a)if(e.next(r[a]),t)return;e.complete()}}),function(){t=!0}})}}),p(h.prototype,l,function(){return this}),a(a.G,{Observable:h}),r(38)('Observable')},function(e,t,r){'use strict';var a=r(2),o=r(0),n=a.navigator,i=[].slice,l=!!n&&/MSIE .\./.test(n.userAgent),s=function(e){return function(t,r){var a=2<arguments.length,o=!!a&&i.call(arguments,2);return e(a?function(){('function'==typeof t?t:Function(t)).apply(this,o)}:t,r)}};o(o.G+o.B+o.F*l,{setTimeout:s(a.setTimeout),setInterval:s(a.setInterval)})},function(e,t,r){'use strict';var a=r(0),o=r(88);a(a.G+a.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,r){'use strict';for(var a=r(87),o=r(34),n=r(13),l=r(2),s=r(12),u=r(45),c=r(5),d=c('iterator'),p=c('toStringTag'),_=u.Array,y={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=o(y),g=0;g<v.length;g++){var i=v[g],m=y[i],f=l[i],b=f&&f.prototype,x;if(b&&(b[d]||s(b,d,_),b[p]||s(b,p,i),u[i]=_,m))for(x in a)b[x]||n(b,x,a[x],!0)}},function(e,t,r){'use strict';(function(t){!function(t){function r(e,t,r,a){var n=t&&t.prototype instanceof o?t:o,i=Object.create(n.prototype),l=new _(a||[]);return i._invoke=u(e,r,l),i}function a(e,t,r){try{return{type:'normal',arg:e.call(t,r)}}catch(e){return{type:'throw',arg:e}}}function o(){}function n(){}function i(){}function l(e){['next','throw','return'].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function r(t,o,n,i){var l=a(e[t],e,o);if('throw'===l.type)i(l.arg);else{var s=l.arg,u=s.value;return u&&'object'==typeof u&&m.call(u,'__await')?Promise.resolve(u.__await).then(function(e){r('next',e,n,i)},function(e){r('throw',e,n,i)}):Promise.resolve(u).then(function(e){s.value=e,n(s)},i)}}'object'==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var o;this._invoke=function(e,t){function a(){return new Promise(function(a,o){r(e,t,a,o)})}return o=o?o.then(a,a):a()}}function u(e,t,r){var o=C;return function(n,i){if(o==E)throw new Error('Generator is already running');if(o==S){if('throw'===n)throw i;return v()}for(r.method=n,r.arg=i;;){var l=r.delegate;if(l){var s=c(l,r);if(s){if(s===P)continue;return s}}if('next'===r.method)r.sent=r._sent=r.arg;else if('throw'===r.method){if(o==C)throw o=S,r.arg;r.dispatchException(r.arg)}else'return'===r.method&&r.abrupt('return',r.arg);o=E;var u=a(e,t,r);if('normal'===u.type){if(o=r.done?S:k,u.arg===P)continue;return{value:u.arg,done:r.done}}'throw'===u.type&&(o=S,r.method='throw',r.arg=u.arg)}}}function c(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,'throw'===t.method){if(e.iterator['return']&&(t.method='return',t.arg=void 0,c(e,t),'throw'===t.method))return P;t.method='throw',t.arg=new TypeError('The iterator does not provide a \'throw\' method')}return P}var o=a(r,e.iterator,t.arg);if('throw'===o.type)return t.method='throw',t.arg=o.arg,t.delegate=null,P;var n=o.arg;if(!n)return t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,P;if(n.done)t[e.resultName]=n.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=void 0);else return n;return t.delegate=null,P}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(d,this),this.reset(!0)}function y(e){if(e){var t=e[b];if(t)return t.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(m.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:v}}function v(){return{value:void 0,done:!0}}var g=Object.prototype,m=g.hasOwnProperty,f='function'==typeof Symbol?Symbol:{},b=f.iterator||'@@iterator',x=f.asyncIterator||'@@asyncIterator',h=f.toStringTag||'@@toStringTag',T='object'==typeof e,O=t.regeneratorRuntime;if(O)return void(T&&(e.exports=O));O=t.regeneratorRuntime=T?e.exports:{},O.wrap=r;var C='suspendedStart',k='suspendedYield',E='executing',S='completed',P={},N={};N[b]=function(){return this};var A=Object.getPrototypeOf,R=A&&A(A(y([])));R&&R!==g&&m.call(R,b)&&(N=R);var I=i.prototype=o.prototype=Object.create(N);n.prototype=I.constructor=i,i.constructor=n,i[h]=n.displayName='GeneratorFunction',O.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===n||'GeneratorFunction'===(t.displayName||t.name))},O.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,!(h in e)&&(e[h]='GeneratorFunction')),e.prototype=Object.create(I),e},O.awrap=function(e){return{__await:e}},l(s.prototype),s.prototype[x]=function(){return this},O.AsyncIterator=s,O.async=function(e,t,a,o){var n=new s(r(e,t,a,o));return O.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},l(I),I[h]='Generator',I[b]=function(){return this},I.toString=function(){return'[object Generator]'},O.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},O.values=y,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(p),!e)for(var t in this)'t'===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if('throw'===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return n.type='throw',n.arg=e,r.next=t,a&&(r.method='next',r.arg=void 0),!!a}if(this.done)throw e;for(var r=this,a=this.tryEntries.length-1;0<=a;--a){var o=this.tryEntries[a],n=o.completion;if('root'===o.tryLoc)return t('end');if(o.tryLoc<=this.prev){var i=m.call(o,'catchLoc'),l=m.call(o,'finallyLoc');if(i&&l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);}else if(!l)throw new Error('try statement without catch or finally');else if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1,a;0<=r;--r)if(a=this.tryEntries[r],a.tryLoc<=this.prev&&m.call(a,'finallyLoc')&&this.prev<a.finallyLoc){var o=a;break}o&&('break'===e||'continue'===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var n=o?o.completion:{};return n.type=e,n.arg=t,o?(this.method='next',this.next=o.finallyLoc,P):this.complete(n)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1,r;0<=t;--t)if(r=this.tryEntries[t],r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),P},catch:function(e){for(var t=this.tryEntries.length-1,r;0<=t;--t)if(r=this.tryEntries[t],r.tryLoc===e){var a=r.completion;if('throw'===a.type){var o=a.arg;p(r)}return o}throw new Error('illegal catch attempt')},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},'next'===this.method&&(this.arg=void 0),P}}}('object'==typeof t?t:'object'==typeof window?window:'object'==typeof self?self:void 0)}).call(t,r(95))},function(e,t,r){'use strict';r(335),e.exports=r(21).RegExp.escape},function(e,t,r){'use strict';var a=r(0),o=r(336)(/[\\^$*+?.()|[\]{}]/g,'\\$&');a(a.S,'RegExp',{escape:function(e){return o(e)}})},function(e){'use strict';e.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return(t+'').replace(e,r)}}},function(e,t,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(92),l=a(i),s=r(130),u=a(s),c=r(93),d=a(c),p=r(131),_=a(p),y=r(133),v=a(y),g=r(94),m=r(342),f=a(m),b=r(42),x={FLOW_PACKAGES:'flowPackages',NARRATIVE_OBJECTS:'narrativeObjects',ROOT_NARRATIVE_OBJECT_ID:'rootNarrativeObjectId'},h=function(){function e(){o(this,e),this.worldContext=new d['default'],this.selectionRules=new v['default']}return n(e,[{key:'initRendererWithCanvas',value:function(e){this.renderer=new f['default'](this,e)}},{key:'getRenderer',value:function(){return void 0==this.renderer?void Messagenger.Log(p.LogType.WARNING,'renderer not initialised'):this.renderer}},{key:'GetSelectionRules',value:function(){return this.selectionRules}},{key:'resetGraph',value:function(){this.worldContext.resetGraph()}},{key:'setRootNarrativeObject',value:function(e){this.worldContext.setRootNarrativeObject(e)}},{key:'setRootNarrativeObjectFromId',value:function(e){this.worldContext.setRootNarrativeObjectFromId(e)}},{key:'getRootNarrativeObject',value:function(){return this.worldContext.getRootNarrativeObject()}},{key:'getNarrativeObject',value:function(e){return this.worldContext.getNarrativeObject(e)}},{key:'getNarrativeObjects',value:function(e){return this.worldContext.getNarrativeObjects(e)}},{key:'getAllNarrativeObjects',value:function(){return this.worldContext.getAllNarrativeObjects()}},{key:'setNarrativeObjectId',value:function(e,t){return this.worldContext.setNarrativeObjectId(e,t)}},{key:'resetRootNarrativeObject',value:function(){this.worldContext.resetRootNarrativeObject()}},{key:'createFlowPackage',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?void 0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?c.MediaTypes.UNDEFINED:arguments[2];return this.worldContext.createFlowPackage(e,t,r)}},{key:'removeFlowPackage',value:function(e){return this.worldContext.removeFlowPackage(e)}},{key:'getFlowPackageByUrl',value:function(e){return this.worldContext.getFlowPackageByUrl(e)}},{key:'getAllFlowPackages',value:function(){return this.worldContext.getAllFlowPackages()}},{key:'createAtom',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?void 0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?void 0:arguments[2],a=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];return this.worldContext.createAtom(e,t,r,a)}},{key:'removeAtom',value:function(e){return this.worldContext.removeAtom(e)}},{key:'removeAtomById',value:function(e){var t=this.worldContext.getNarrativeObject(e);return void 0!=t&&this.removeAtom(t)}},{key:'setAtomInPoint',value:function(e,t){this.worldContext.setAtomInPoint(e,t)}},{key:'setAtomOutPoint',value:function(e,t){this.worldContext.setAtomOutPoint(e,t)}},{key:'createGroup',value:function(){var e=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];return this.worldContext.createGroup(e)}},{key:'removeGroup',value:function(e){return this.worldContext.removeGroup(e)}},{key:'removeGroupById',value:function(e){var t=this.worldContext.getNarrativeObject(e);return void 0!=t&&this.removeGroup(t)}},{key:'createLayered',value:function(){var e=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],t=1>=arguments.length||void 0===arguments[1]||arguments[1];return this.worldContext.createLayered(e,t)}},{key:'removeLayered',value:function(e){return this.worldContext.removeLayered(e)}},{key:'removeLayeredById',value:function(e){var t=this.worldContext.getNarrativeObject(e);return void 0!=t&&this.removeLayered(t)}},{key:'addInteraction',value:function(e,t,r,a){return this.worldContext.addInteraction(e,t,r,a)}},{key:'removeInteraction',value:function(e,t){return this.worldContext.removeInteraction(e,t)}},{key:'hasInteraction',value:function(e){return this.worldContext.hasInteraction(e)}},{key:'getInteraction',value:function(e){return this.worldContext.getInteraction(e)}},{key:'addFunction',value:function(e,t,r){this.worldContext.addFunction(e,t,r)}},{key:'getFunction',value:function(e,t){return this.worldContext.getFunction(e,t)}},{key:'removeFunction',value:function(e,t){return this.worldContext.removeFunction(e,t)}},{key:'loadDefaultOntologyClasses',value:function(){this.worldContext.loadDefaultOntologyClasses()}},{key:'addOntologyClass',value:function(e){this.worldContext.addOntologyClass(e)}},{key:'removeOntologyClass',value:function(e){this.worldContext.removeOntologyClass(e)}},{key:'addInstanceToOntologyClass',value:function(e,t){this.worldContext.addInstanceToOntologyClass(e,t)}},{key:'removeInstanceFromOntologyClass',value:function(e,t){this.worldContext.removeInstanceFromOntologyClass(e,t)}},{key:'addNarrativeObjectToOntologyClassInstance',value:function(e,t,r,a){this.worldContext.addNarrativeObjectToOntologyClassInstance(e,t,r,a)}},{key:'removeNarrativeObjectFromOntologyClassInstance',value:function(e,t,r){this.worldContext.removeNarrativeObjectFromOntologyClassInstance(e,t,r)}},{key:'addContextVariable',value:function(e,t){this.worldContext.addContextVariable(e,t)}},{key:'removeContextVariable',value:function(e,t){this.worldContext.removeContextVariable(e,t)}},{key:'getContextVariable',value:function(e,t){return this.worldContext.getContextVariable(e,t)}},{key:'setContextVariable',value:function(e,t,r){this.worldContext.setContextVariable(e,t,r)}},{key:'restoreEngine',value:function(e){this.restoreFlowPackages(e[x.FLOW_PACKAGES]),this.restoreNarrativeObjects(e[x.NARRATIVE_OBJECTS]),this.setRootNarrativeObjectFromId(e[x.ROOT_NARRATIVE_OBJECT_ID])}},{key:'restoreFunctions',value:function(e){console.log('');var t=this.getAllNarrativeObjects();for(var r in t){var a=t[r],o=a.data[c.FunctionTypes.OUTPUT_SELECTION];switch(void 0!=o&&e.hasOwnProperty(c.FunctionTypes.OUTPUT_SELECTION)&&e[c.FunctionTypes.OUTPUT_SELECTION].hasOwnProperty(o)&&a.setOutputSelectionFunction(e[c.FunctionTypes.OUTPUT_SELECTION][o],o),a.type){case b.NarrativeObjectTypes.GROUP:var n=a.data[c.FunctionTypes.GROUP_SELECTION];void 0!=n&&e.hasOwnProperty(c.FunctionTypes.GROUP_SELECTION)&&e[c.FunctionTypes.GROUP_SELECTION].hasOwnProperty(n)&&a.setSelectionFunction(e[c.FunctionTypes.GROUP_SELECTION][n],n);break;case b.NarrativeObjectTypes.LAYERED:var i=a.data[c.FunctionTypes.LAYER_SELECTION];void 0!=i&&e.hasOwnProperty(c.FunctionTypes.LAYER_SELECTION)&&e[c.FunctionTypes.LAYER_SELECTION].hasOwnProperty(i)&&a.setSelectionFunction(e[c.FunctionTypes.LAYER_SELECTION][i],i);}}}},{key:'restoreFlowPackages',value:function(e){for(var t in e)this.createFlowPackage(e[t].url,e[t].duration,e[t].mediaType)}},{key:'restoreNarrativeObjects',value:function(e){var t={};for(var r in e){var a=e[r];if(a.type==b.NarrativeObjectTypes.ATOM){var o=this.getFlowPackageByUrl(a.flowPackage.url),n=this.createAtom(o,a.startTime,a.endTime,a.data);this.setNarrativeObjectId(n,a.id);for(var l=0,i;l<a.interactions.length;l++)i=a.interactions[l],this.worldContext.addInteractionAndSetId(n,i.id,i.start,i.end,i.resetOutcomeOnStart,i.data);t[n.id]=n}}for(var r in e){var a=e[r];if(a.type==b.NarrativeObjectTypes.LAYERED){var n=this.createLayered(a.data,!1);for(var s in this.setNarrativeObjectId(n,a.id),a.layers){var u=a.layers[s],c=n.addLayer(u.layerType);for(var d in c.setId(u.id),u.narrativeObjects)c.addAtom(t[d]);c.setRootNarrativeObject(t[u.rootNarrativeObjectID])}t[n.id]=n}}for(var r in e){var a=e[r];if(a.type==b.NarrativeObjectTypes.GROUP){var n=this.createGroup(a.data);this.setNarrativeObjectId(n,a.id),t[n.id]=n}}for(var r in e){var a=e[r];if(a.type==b.NarrativeObjectTypes.GROUP)for(var n=t[a.id],l=0,p;l<a.narrativeObjects.length;l++)switch(p=t[a.narrativeObjects[l]],p.type){case b.NarrativeObjectTypes.ATOM:n.addAtom(p);break;case b.NarrativeObjectTypes.GROUP:n.addGroup(p);break;case b.NarrativeObjectTypes.LAYERED:n.addLayered(p);}}for(var r in e){var a=e[r];if(a.type==b.NarrativeObjectTypes.GROUP)for(var n=t[a.id],l=0,_;l<a.selectionFunctionCandidates.length;l++)_=a.selectionFunctionCandidates[l],n.addSelectionFunctionCandidate(t[_])}for(var r in e){for(var a=e[r],n=t[a.id],l=0;l<a.outputs.length;l++)n.addOutput(this.worldContext.getNarrativeObject(a.outputs[l]));for(var y in n.setDefaultOutput(t[a.defaultOutput]),a.annotations)for(var v in a.annotations[y])this.addNarrativeObjectToOntologyClassInstance(y,v,a.annotations[y][v],n)}}},{key:'resetWorldContext',value:function(){this.worldContext.reset()}},{key:'resetSequencer',value:function(){this.worldContext.resetSequencer()}},{key:'updateClock',value:function(e){this.worldContext.updateClock(e)}},{key:'setRenderUpdate',value:function(e){this.worldContext.setRenderUpdate(e)}},{key:'callRenderUpdate',value:function(){this.worldContext.callRenderUpdate()}},{key:'initialise',value:function(e){this.worldContext.startProcessing(e)}}],[{key:'GetFunctionTypes',get:function(){return c.FunctionTypes}},{key:'LayerTypes',get:function(){return g.LayerType}},{key:'MediaTypes',get:function(){return c.MediaTypes}}]),e}();t['default']=h,e.exports=t['default']},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();t.LogicalEntity=function e(t,a){r(this,e),this['class']=t,this.instance=a};var o=function(){function e(){r(this,e),this.reset()}return a(e,[{key:'reset',value:function(){this.root={}}},{key:'loadDefaultClasses',value:function(){this.addClass('Action'),this.addClass('Genre'),this.addClass('Location'),this.addClass('Prop'),this.addClass('Subject'),this.addClass('Time'),this.addClass('Topic')}},{key:'addClass',value:function(e){return!this.hasClass(e)&&(this.root[e]={},!0)}},{key:'removeClass',value:function(e){if(this.hasClass(e)){for(var t in this.root[e]){this.root[e][t];this.removeInstanceFromClass(e,t)}return delete this.root[e],!0}return!1}},{key:'hasClass',value:function(e){return this.root.hasOwnProperty(e)}},{key:'getClassNames',value:function(){var e=[];for(var t in this.root)e.push(t);return e}},{key:'addInstanceToClass',value:function(e,t){return this.hasClass(e)&&!this.hasInstanceOfClass(e,t)&&(this.root[e][t]=[],!0)}},{key:'removeInstanceFromClass',value:function(e,t){if(this.hasClass(e)&&this.hasInstanceOfClass(e,t)){for(var r=this.root[e][t],a=0,o;a<r.length;a++)o=r[a],o.removeAnnotation(e,t);return delete this.root[e][t],!0}return!1}},{key:'hasInstanceOfClass',value:function(e,t){return this.root[e].hasOwnProperty(t)}},{key:'addNarrativeObjectToInstance',value:function(e,t,r,a){return this.hasClass(e)&&this.hasInstanceOfClass(e,t)&&(this.root[e][t].push(a),a.addAnnotation(e,t,r),!0)}},{key:'removeNarrativeObjectFromInstance',value:function(e,t,r){if(this.hasClass(e)&&this.hasInstanceOfClass(e,t)){var a=this.root[e][t].indexOf(r);if(-1!=a)return this.root[e][t].splice(a,1),r.removeAnnotation(e,t),!0}return!1}},{key:'getNarrativeObjectsInClassInstance',value:function(e,t){return this.hasClass(e)&&this.hasInstanceOfClass(e,t)?this.root[e][t]:[]}},{key:'matchesOR',value:function(e,t){var r=this;return t.filter(function(t){var a=!1,o=!0,n=!1,i;try{for(var l=e[Symbol.iterator](),s;!(o=(s=l.next()).done);o=!0){var u=s.value,c=r.getNarrativeObjectsInClassInstance(u['class'],u.instance);-1!=c.indexOf(t)&&(a=!0)}}catch(e){n=!0,i=e}finally{try{!o&&l['return']&&l['return']()}finally{if(n)throw i}}return a})}},{key:'matches',value:function(e,t){var r=this;return t.filter(function(t){var a=r.getNarrativeObjectsInClassInstance(e['class'],e.instance);return-1!=a.indexOf(t)})}}]),e}();t['default']=o},function(e,t,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){var r=[],a=!0,o=!1,n;try{for(var i=e[Symbol.iterator](),l;!(a=(l=i.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i['return']&&i['return']()}finally{if(o)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),i=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=r(131),s=a(l),u=r(130),c=a(u),d=r(42),p=function(){function e(){o(this,e),this.narrativeObjects={},this.rootNO=e.noRoot,this.sequencer=new c['default'],this.stop=!0,this.renderUpdate=void 0,this.currentNarrativeObject=void 0,this.processStepCount=0,this.maxProcessingSteps=20,this.reset()}return i(e,[{key:'setRoot',value:function(e){return void 0!=e&&this.setRootFromId(e.id)}},{key:'setRootFromId',value:function(e){return!!this.hasNarrativeObject(e)&&(this.rootNO=e,!0)}},{key:'getRoot',value:function(){return this.hasRoot()?this.narrativeObjects[this.rootNO]:void 0}},{key:'hasRoot',value:function(){return this.rootNO!=e.noRoot}},{key:'resetRoot',value:function(){this.rootNO=e.noRoot}},{key:'setRootToDefault',value:function(){var e=Object.keys(this.narrativeObjects);0<e.length?this.setRoot(this.narrativeObjects[e[0]]):this.resetRoot()}},{key:'addNarrativeObject',value:function(e){return!this.hasNarrativeObject(e.id)&&(this.narrativeObjects[e.id]=e,!0)}},{key:'removeNarrativeObject',value:function(e){if(this.hasNarrativeObject(e.id)){var t=this.narrativeObjects[e.id];for(var r in this.narrativeObjects)if(this.narrativeObjects[r]!=t)switch(this.narrativeObjects[r].type){case d.NarrativeObjectTypes.GROUP:var a=this.narrativeObjects[r];a.removeNarrativeObject(t);break;case d.NarrativeObjectTypes.LAYERED:var o=this.narrativeObjects[r];o.removeNarrativeObjectFromLayers(t);}for(var n=t.outputs.length-1;0<=n;n--)this.hasNarrativeObject(t.outputs[n])&&t.removeOutput(this.narrativeObjects[t.outputs[n]]);for(var n=t.inputs.length-1;0<=n;n--)this.hasNarrativeObject(t.inputs[n])&&t.removeInput(this.narrativeObjects[t.inputs[n]]);return t.destroy(),delete this.narrativeObjects[e.id],this.rootNO==e.id&&this.setRootToDefault(),!0}return!1}},{key:'getNarrativeObject',value:function(e){return this.hasNarrativeObject(e)?this.narrativeObjects[e]:void 0}},{key:'hasNarrativeObject',value:function(e){return!!this.narrativeObjects.hasOwnProperty(e)}},{key:'getAllNarrativeObjects',value:function(){return this.narrativeObjects}},{key:'setNarrativeObjectId',value:function(e,t){return!this.hasNarrativeObject(t)&&(this.hasNarrativeObject(e.id)&&(this.narrativeObjects[t]=e,delete this.narrativeObjects[e.id]),e.setId(t),!0)}},{key:'reset',value:function(){this.narrativeObjects={},this.resetRoot(),this.resetProcessingVariables()}},{key:'resetSequencer',value:function(){this.processCount=0,this.sequencer=new c['default'],this.resetProcessingVariables()}},{key:'_resetPlayed',value:function(){var e=!0,t=!1,r;try{for(var a=Object.entries(this.narrativeObjects)[Symbol.iterator](),o;!(e=(o=a.next()).done);e=!0){var i=n(o.value,2),l=i[0],s=i[1];s.hasPlayed=!1}}catch(e){t=!0,r=e}finally{try{!e&&a['return']&&a['return']()}finally{if(t)throw r}}}},{key:'initialise',value:function(e){for(var t in this.narrativeObjects){var r=this.narrativeObjects[t];r.initialise(e)}}},{key:'startProcessing',value:function(e){this._resetPlayed();var t=this.startProcessingGenerator(function(){t.next()},e);console.log('Iterator Started'),t.next(),console.log('Iterator Finished')}},{key:'startProcessingGenerator',value:regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log('Processing Started'),void 0==this.currentNarrativeObject){e.next=3;break}return e.delegateYield(this.currentNarrativeObject.process(t,r,this.sendToSequencer.bind(this),this.sequencer.getMainThreadId()),'t0',3);case 3:console.log('Processing Complete');case 4:case'end':return e.stop();}},e,this)})},{key:'sendToSequencer',value:function(e,t){console.log('Pushing to sequencer: '+e.flowPackage.url),this.processCount++,this.sequencer.sendToThread(e,t),this.callRenderUpdate()}},{key:'resetProcessCount',value:function(){this.processCount=0}},{key:'processedMaxNarrativeObjects',value:function(){return this.processCount>=this.maxProcessingSteps}},{key:'stopGraphProcessing',value:function(){this.sequencer.endCurrentSequence(),this.callRenderUpdate(),this.stop=!0,this.resetProcessingVariables()}},{key:'resetProcessingVariables',value:function(){this.processCount=0,this.narrativeObjectsWithNoProcessOutput=[]}},{key:'setRenderUpdate',value:function(e){this.renderUpdate=e}},{key:'callRenderUpdate',value:function(){this.renderUpdate(this.sequencer.playhead_clock,this.sequencer.mostRecentSequence())}}]),e}();t['default']=p,p.noRoot='none',e.exports=t['default']},function(e,t,r){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(93),i=function(){function e(t){var r=1>=arguments.length||void 0===arguments[1]?void 0:arguments[1],o=2>=arguments.length||void 0===arguments[2]?n.MediaTypes.UNDEFINED:arguments[2];a(this,e),this.url=t,this.duration=r,this.mediaType=o}return o(e,[{key:'isImage',value:function(){return this.mediaType==n.MediaTypes.IMAGE}},{key:'isVideo',value:function(){return this.mediaType==n.MediaTypes.VIDEO}}]),e}();t['default']=i,e.exports=t['default']},function(e,t,r){'use strict';(function(){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},s=r(42),u=a(s),c=r(50),d=a(c),p=r(94),_=a(p),y=function(e){function t(){var e=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],r=1>=arguments.length||void 0===arguments[1]||arguments[1];o(this,t),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e),this.type=s.NarrativeObjectTypes.LAYERED,this.layers={},this.selectionFunction=void 0,this.resetSelectionFunction(),this.selectedLayers=[],r&&this.addLayer(p.LayerType.MASTER)}return n(t,e),i(t,[{key:'hasLayer',value:function(e){return this.layers.hasOwnProperty(e)}},{key:'hasNarrativeObjectInLayers',value:function(e){for(var t in this.layers)if(this.layers[t].hasNarrativeObject(e))return!0;return!1}},{key:'removeNarrativeObjectFromLayers',value:function(e){for(var t in this.layers)this.layers[t].removeNarrativeObject(e)}},{key:'getAllNarrativeObjectIds',value:function(){var e=[];for(var t in this.layers)for(var r=this.layers[t].getAllNarrativeObjectIds(),a=0;a<r.length;a++)e.push(r[a]);return e}},{key:'addLayer',value:function(){var e=0>=arguments.length||void 0===arguments[0]?p.LayerType.DEFAULT:arguments[0];if(e==p.LayerType.masterLayer&&this.hasMasterLayer()){var t=this.getMasterLayer();t.setLayerType(p.LayerType.DEFAULT)}var r=new _['default'](e);return this.layers[r.id]=r,r}},{key:'getLayer',value:function(e){return this.layers.hasOwnProperty(e)?this.layers[e]:void 0}},{key:'removeLayer',value:function(e){return!!this.layers.hasOwnProperty(e.id)&&(this.layers[e.id].destroy(),delete this.layers[e.id],0==Object.keys(this.layers).length&&this.addLayer(p.LayerType.MASTER),!0)}},{key:'hasMasterLayer',value:function(){return void 0!=this.getMasterLayer()}},{key:'getMasterLayer',value:function(){for(var e in this.layers)if(this.layers[e].getLayerType()==p.LayerType.MASTER)return this.layers[e]}},{key:'setMasterLayer',value:function(e){if(this.hasLayer(e)){for(var t in this.layers)this.layers[t].isMasterLayer()&&this.layers[t].setLayerType(p.LayerType.DEFAULT);this.layers[e].setLayerType(p.LayerType.MASTER)}}},{key:'toggleMasterLayer',value:function(e){if(this.hasLayer(e)){if(this.hasMasterLayer()){var t=this.getMasterLayer();if(t.id==e)return void t.setLayerType(p.LayerType.DEFAULT)}this.setMasterLayer(e)}}},{key:'getSlaveLayers',value:function(){var e=[];for(var t in this.layers)this.layers[t].getLayerType()!=p.LayerType.MASTER&&e.push(this.layers[t]);return e}},{key:'setSelectionFunction',value:function(e,t){void 0!=e&&(this.selectionFunction=e),this.data[s.FunctionTypes.LAYER_SELECTION]=t}},{key:'resetSelectionFunction',value:function(){this.selectionFunction=function(e,t){var r=[];for(var a in void 0!=e&&r.push(e),t)r.push(t[a]);return r},this.data[s.FunctionTypes.LAYER_SELECTION]=void 0}},{key:'initialise',value:function(e){for(var t in this.layers)this.layers[t].initialise(e)}},{key:'_sortLayers',value:function(){if(this.masterLayerSelected){for(var e=[],t=0;t<this.selectedLayers.length;t++)t==masterLayerIndex?e.splice(0,0,this.selectedLayers[t]):e.push(this.selectedLayers[t]);this.selectedLayers=e}}},{key:'process',value:regeneratorRuntime.mark(function e(t,r,a,o){var n,l,s,i,c,d,p,_,y,v,g,m,f,b,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.hasPlayed=!0,n=this.getMasterLayer(),l=this.selectionFunction(n,this.getSlaveLayers(),r),s=l.length-1;0<=s;s--)l[s].isEmpty()&&l.splice(s,1);if(i=-1!=l.indexOf(n),c=-1,d=-1,p=0,i)for(c=n.id,_=r.getNarrativeObject(n.getRootNarrativeObjectId());void 0!=_;)p+=_.waitBeforeStartDuration+_.duration,_.hasInteractions()&&(d=_.getFinalInteractionId()),_=r.getNarrativeObject(_.outputs[0]);else{for(y={},s=0;s<l.length;s++)for(v=l[s],y[v.id]=0,_=r.getNarrativeObject(v.getRootNarrativeObjectId());void 0!=_;)y[v.id]+=_.waitBeforeStartDuration+_.duration,_=r.getNarrativeObject(_.outputs[0]);for(g in y)y[g]>p&&(p=y[g],c=g)}if(!(0<p)){e.next=27;break}for(g in m={},l)m[g]=l[g].id==c?o:r.createSequencerThread(p);e.t0=regeneratorRuntime.keys(l);case 13:if((e.t1=e.t0()).done){e.next=20;break}if(g=e.t1.value,!l[g].hasRootNarrativeObject()){e.next=18;break}return f=r.getNarrativeObject(l[g].getRootNarrativeObjectId()),e.delegateYield(f.process(t,r,a,m[g],!1),'t2',18);case 18:e.next=13;break;case 20:if(!i){e.next=27;break}if(-1==d){e.next=27;break}case 22:if(r.getInteraction(d).isComplete()){e.next=27;break}return e.next=25,this.wait(t);case 25:e.next=22;break;case 27:if(!r.graph.processedMaxNarrativeObjects()){e.next=31;break}return r.graph.resetProcessCount(),e.next=31,this.wait(t);case 31:if(b=this.selectOutput(r),b==u['default'].terminate){e.next=36;break}if(x=r.getNarrativeObject(b),void 0==x){e.next=36;break}return e.delegateYield(x.process(t,r,a,o),'t3',36);case 36:case'end':return e.stop();}},e,this)})}]),t}(u['default']);t['default']=y,e.exports=t['default']}).call(t,r(65))},function(e,t,r){'use strict';function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(343),i=function(e){return e&&e.__esModule?e:{default:e}}(n),l=function(){function e(t,r){a(this,e),this.videoContext=new i['default'](r),this.timeline_active=!1,this.engine=t,this.engine.setRenderUpdate(this.renderCallback.bind(this)),this.interactionFunctions=void 0}return o(e,[{key:'getVideoContext',value:function(){return this.videoContext}},{key:'addTimeline',value:function(e){this.timeline_active=!0;var t=e.getBoundingClientRect(),r=t.left+window.pageXOffset-document.documentElement.clientLeft,a=e.clientWidth;this.timeline_canvas=e,this.timeline_canvas.addEventListener('click',function(t){if(void 0!=this.videoContext&&void 0!=t){var e=this.videoContext.duration/a;this.videoContext.currentTime=e*(t.x-r),this.videoContext.pause()}}.bind(this))}},{key:'render',value:function(){this.timeline_active&&i['default'].visualiseVideoContextTimeline(this.videoContext,this.timeline_canvas,this.videoContext.currentTime),requestAnimationFrame(this.render.bind(this)),this.engine.updateClock(this.videoContext.currentTime)}},{key:'start',value:function(){this.videoContext.play(),requestAnimationFrame(this.render.bind(this))}},{key:'renderCallback',value:function(e,t){var r=this;console.log(t);for(var a=0;a<t.videos.length;++a){var o=t.videos[a],n=o.url,i=n.substr(n.lastIndexOf('.')+1);if('jpg'==i||'png'==i){var l=this.videoContext.image(n);l.startAt(o.start),l.stopAt(o.end),l.connect(this.videoContext.destination)}else{var s=this.videoContext.video(n,o.offset);s.startAt(o.start),s.stopAt(o.end),s.connect(this.videoContext.destination)}}var u=!0,c=!1,d;try{for(var p=function(){var e=y.value;void 0==r.interactionFunctions?console.log('interaction functions not loaded!'):function(){var t=e.data.hasOwnProperty('function')?e.data['function']:'Default',a=r.interactionFunctions[t];r.videoContext.registerTimelineCallback(e.time,function(){a(this.engine.worldContext,e,e.data)}.bind(r))}()},_=t.interactions[Symbol.iterator](),y;!(u=(y=_.next()).done);u=!0)p()}catch(e){c=!0,d=e}finally{try{!u&&_['return']&&_['return']()}finally{if(c)throw d}}}},{key:'setInteractionFunctions',value:function(e){this.interactionFunctions=e}},{key:'interactionUpdate',value:function(){console.log('interaction not implemented')}},{key:'getTime',value:function(){return this.videoContext.currentTime}}]),e}();t['default']=l,e.exports=t['default']},function(r,a){'use strict';(function(e,t){r.exports=t()})(void 0,function(){return function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p='',t(0)}([function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(1),l=a(i),s=r(27),u=a(s),c=r(28),d=a(c),p=r(2),_=r(29),y=a(_),v=r(32),g=a(v),m=r(33),f=a(m),b=r(34),x=a(b),h=r(35),T=a(h),O=r(36),C=a(O),k=r(3),E=r(4),S=a(E),P=new k.UpdateablesManager,N=function(){function e(t,r){var a=2>=arguments.length||void 0===arguments[2]?{preserveDrawingBuffer:!0,manualUpdate:!1,endOnLastSourceEnd:!0,useVideoElementCache:!0,videoElementCacheSize:6,webglContextAttributes:{preserveDrawingBuffer:!0,alpha:!1}}:arguments[2];o(this,e),this._canvas=t;var n=!1;this.endOnLastSourceEnd=!0;var i={preserveDrawingBuffer:!0,alpha:!1};return'manualUpdate'in a&&(n=a.manualUpdate),'endOnLastSourceEnd'in a&&(this._endOnLastSourceEnd=a.endOnLastSourceEnd),'webglContextAttributes'in a&&(i=a.webglContextAttributes),void 0===i.alpha&&(i.alpha=!1),!0===i.alpha&&console.error('webglContextAttributes.alpha must be false for correct opeation'),this._gl=t.getContext('experimental-webgl',i),null===this._gl?(console.error('Failed to intialise WebGL.'),void(r&&r())):void(void 0===a.useVideoElementCache&&(a.useVideoElementCache=!0),this._useVideoElementCache=a.useVideoElementCache,this._useVideoElementCache&&(!a.videoElementCacheSize&&(a.videoElementCacheSize=5),this._videoElementCache=new C['default'](a.videoElementCacheSize)),this._canvas.id&&('string'==typeof this._canvas.id||this._canvas.id instanceof String)&&(this._id=t.id),void 0===this._id&&(this._id=(0,k.generateRandomId)()),void 0===window.__VIDEOCONTEXT_REFS__&&(window.__VIDEOCONTEXT_REFS__={}),window.__VIDEOCONTEXT_REFS__[this._id]=this,this._renderGraph=new T['default'],this._sourceNodes=[],this._processingNodes=[],this._timeline=[],this._currentTime=0,this._state=e.STATE.PAUSED,this._playbackRate=1,this._volume=1,this._sourcesPlaying=void 0,this._destinationNode=new g['default'](this._gl,this._renderGraph),this._callbacks=new Map,this._callbacks.set('stalled',[]),this._callbacks.set('update',[]),this._callbacks.set('ended',[]),this._callbacks.set('content',[]),this._callbacks.set('nocontent',[]),this._timelineCallbacks=[],!n&&P.register(this))}return n(e,[{key:'registerTimelineCallback',value:function(e,t){var r=2>=arguments.length||void 0===arguments[2]?0:arguments[2];this._timelineCallbacks.push({time:e,func:t,ordering:r})}},{key:'unregisterTimelineCallback',value:function(e){var t=[],r=!0,a=!1,o;try{for(var n=this._timelineCallbacks[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)l=i.value,l.func===e&&t.push(l)}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}var s=!0,u=!1,c;try{for(var d=t[Symbol.iterator](),p;!(s=(p=d.next()).done);s=!0){var l=p.value,_=this._timelineCallbacks.indexOf(l);this._timelineCallbacks.splice(_,1)}}catch(e){u=!0,c=e}finally{try{!s&&d['return']&&d['return']()}finally{if(u)throw c}}}},{key:'registerCallback',value:function(e,t){return!!this._callbacks.has(e)&&void this._callbacks.get(e).push(t)}},{key:'unregisterCallback',value:function(e){var t=!0,r=!1,a;try{for(var o=this._callbacks.values()[Symbol.iterator](),n;!(t=(n=o.next()).done);t=!0){var i=n.value,l=i.indexOf(e);if(-1!==l)return i.splice(l,1),!0}}catch(e){r=!0,a=e}finally{try{!t&&o['return']&&o['return']()}finally{if(r)throw a}}return!1}},{key:'_callCallbacks',value:function(e){var t=this._callbacks.get(e),r=!0,a=!1,o;try{for(var n=t[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)l=i.value,l(this._currentTime)}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}}},{key:'play',value:function(){return console.debug('VideoContext - playing'),this._videoElementCache&&this._videoElementCache.init(),this._state=e.STATE.PLAYING,!0}},{key:'pause',value:function(){return console.debug('VideoContext - pausing'),this._state=e.STATE.PAUSED,!0}},{key:'video',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?4:arguments[2],a=3>=arguments.length||void 0===arguments[3]?{}:arguments[3],o=new l['default'](e,this._gl,this._renderGraph,this._currentTime,this._playbackRate,t,r,this._videoElementCache,a);return this._sourceNodes.push(o),o}},{key:'createVideoSourceNode',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?4:arguments[2],a=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];return this._depricate('Warning: createVideoSourceNode will be depricated in v1.0, please switch to using VideoContext.video()'),this.video(e,t,r,a)}},{key:'image',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?4:arguments[1],r=2>=arguments.length||void 0===arguments[2]?{}:arguments[2],a=new u['default'](e,this._gl,this._renderGraph,this._currentTime,t,r);return this._sourceNodes.push(a),a}},{key:'createImageSourceNode',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?4:arguments[2],a=3>=arguments.length||void 0===arguments[3]?{}:arguments[3];return this._depricate('Warning: createImageSourceNode will be depricated in v1.0, please switch to using VideoContext.image()'),this.image(e,t,r,a)}},{key:'canvas',value:function(e){var t=new d['default'](e,this._gl,this._renderGraph,this._currentTime);return this._sourceNodes.push(t),t}},{key:'createCanvasSourceNode',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?0:arguments[1],r=2>=arguments.length||void 0===arguments[2]?4:arguments[2];return this._depricate('Warning: createCanvasSourceNode will be depricated in v1.0, please switch to using VideoContext.canvas()'),this.canvas(e,t,r)}},{key:'effect',value:function(e){var t=new f['default'](this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:'createEffectNode',value:function(e){return this._depricate('Warning: createEffectNode will be depricated in v1.0, please switch to using VideoContext.effect()'),this.effect(e)}},{key:'compositor',value:function(e){var t=new y['default'](this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:'createCompositingNode',value:function(e){return this._depricate('Warning: createCompositingNode will be depricated in v1.0, please switch to using VideoContext.compositor()'),this.compositor(e)}},{key:'transition',value:function(e){var t=new x['default'](this._gl,this._renderGraph,e);return this._processingNodes.push(t),t}},{key:'createTransitionNode',value:function(e){return this._depricate('Warning: createTransitionNode will be depricated in v1.0, please switch to using VideoContext.transition()'),this.transition(e)}},{key:'_isStalled',value:function(){for(var e=0,t;e<this._sourceNodes.length;e++)if(t=this._sourceNodes[e],!t._isReady())return!0;return!1}},{key:'update',value:function(e){this._update(e)}},{key:'_update',value:function(r){if(this._sourceNodes=this._sourceNodes.filter(function(e){if(!e.destroyed)return e}),this._processingNodes=this._processingNodes.filter(function(e){if(!e.destroyed)return e}),this._state===e.STATE.PLAYING||this._state===e.STATE.STALLED||this._state===e.STATE.PAUSED){if(this._callCallbacks('update'),this._state!==e.STATE.PAUSED&&(this._isStalled()?(this._callCallbacks('stalled'),this._state=e.STATE.STALLED):this._state=e.STATE.PLAYING),this._state===e.STATE.PLAYING){var a=new Map,o=!0,n=!1,l;try{for(var s=this._timelineCallbacks[Symbol.iterator](),u,c;!(o=(u=s.next()).done);o=!0)c=u.value,c.time>=this.currentTime&&c.time<this._currentTime+r*this._playbackRate&&(!a.has(c.time)&&a.set(c.time,[]),a.get(c.time).push(c))}catch(e){n=!0,l=e}finally{try{!o&&s['return']&&s['return']()}finally{if(n)throw l}}var d=Array.from(a.keys());d.sort(function(e,t){return e-t});var _=!0,y=!1,v;try{for(var g=d[Symbol.iterator](),m;!(_=(m=g.next()).done);_=!0){var f=m.value,t=a.get(f);t.sort(function(e,t){return e.ordering-t.ordering});var b=!0,x=!1,h=void 0;try{for(var O=t[Symbol.iterator](),C,c;!(b=(C=O.next()).done);b=!0)c=C.value,c.func()}catch(e){x=!0,h=e}finally{try{!b&&O['return']&&O['return']()}finally{if(x)throw h}}}}catch(e){y=!0,v=e}finally{try{!_&&g['return']&&g['return']()}finally{if(y)throw v}}if(this._currentTime+=r*this._playbackRate,this._currentTime>this.duration&&this._endOnLastSourceEnd){for(var k=0;k<this._sourceNodes.length;k++)this._sourceNodes[k]._update(this._currentTime);this._state=e.STATE.ENDED,this._callCallbacks('ended')}}for(var i=!1,k=0,E;k<this._sourceNodes.length;k++)E=this._sourceNodes[k],this._state===e.STATE.STALLED&&E._isReady()&&E._state===p.SOURCENODESTATE.playing&&E._pause(),this._state===e.STATE.PAUSED&&E._pause(),this._state===e.STATE.PLAYING&&E._play(),E._update(this._currentTime),(E._state===p.SOURCENODESTATE.paused||E._state===p.SOURCENODESTATE.playing)&&(i=!0);i!==this._sourcesPlaying&&this._state===e.STATE.PLAYING&&(!0==i?this._callCallbacks('content'):this._callCallbacks('nocontent'),this._sourcesPlaying=i);for(var S=[],P=this._renderGraph.connections.slice(),N=T['default'].getInputlessNodes(P),A;0<N.length;){A=N.pop(),S.push(A);var R=!0,I=!1,F=void 0;try{for(var w=T['default'].outputEdgesFor(A,P)[Symbol.iterator](),L;!(R=(L=w.next()).done);R=!0){var D=L.value,j=P.indexOf(D);-1<j&&P.splice(j,1),0===T['default'].inputEdgesFor(D.destination,P).length&&N.push(D.destination)}}catch(e){I=!0,F=e}finally{try{!R&&w['return']&&w['return']()}finally{if(I)throw F}}}var M=!0,U=!1,G;try{for(var V=S[Symbol.iterator](),Y,A;!(M=(Y=V.next()).done);M=!0)A=Y.value,-1===this._sourceNodes.indexOf(A)&&(A._update(this._currentTime),A._render())}catch(e){U=!0,G=e}finally{try{!M&&V['return']&&V['return']()}finally{if(U)throw G}}}}},{key:'reset',value:function(){var t=!0,r=!1,a;try{for(var o=this._callbacks[Symbol.iterator](),n,i;!(t=(n=o.next()).done);t=!0)i=n.value,this.unregisterCallback(i)}catch(e){r=!0,a=e}finally{try{!t&&o['return']&&o['return']()}finally{if(r)throw a}}var l=!0,s=!1,u;try{for(var c=this._sourceNodes[Symbol.iterator](),d,p;!(l=(d=c.next()).done);l=!0)p=d.value,p.destroy()}catch(e){s=!0,u=e}finally{try{!l&&c['return']&&c['return']()}finally{if(s)throw u}}var _=!0,y=!1,v;try{for(var g=this._processingNodes[Symbol.iterator](),m,p;!(_=(m=g.next()).done);_=!0)p=m.value,p.destroy()}catch(e){y=!0,v=e}finally{try{!_&&g['return']&&g['return']()}finally{if(y)throw v}}this._update(0),this._sourceNodes=[],this._processingNodes=[],this._timeline=[],this._currentTime=0,this._state=e.STATE.PAUSED,this._playbackRate=1,this._sourcesPlaying=void 0,this._callbacks.set('stalled',[]),this._callbacks.set('update',[]),this._callbacks.set('ended',[]),this._callbacks.set('content',[]),this._callbacks.set('nocontent',[]),this._timelineCallbacks=[]}},{key:'_depricate',value:function(e){console.log(e)}},{key:'snapshot',value:function(){return(0,k.snapshot)(this)}},{key:'id',get:function(){return this._id},set:function(e){delete window.__VIDEOCONTEXT_REFS__[this._id],void 0!==window.__VIDEOCONTEXT_REFS__[e]&&console.warn('Warning; setting id to that of an existing VideoContext instance.'),window.__VIDEOCONTEXT_REFS__[e]=this,this._id=e}},{key:'element',get:function(){return this._canvas}},{key:'state',get:function(){return this._state}},{key:'currentTime',set:function(t){t<this.duration&&this._state===e.STATE.ENDED&&(this._state=e.STATE.PAUSED),('string'==typeof t||t instanceof String)&&(t=parseFloat(t));for(var r=0;r<this._sourceNodes.length;r++)this._sourceNodes[r]._seek(t);for(var r=0;r<this._processingNodes.length;r++)this._processingNodes[r]._seek(t);this._currentTime=t},get:function(){return this._currentTime}},{key:'duration',get:function(){for(var e=0,t=0;t<this._sourceNodes.length;t++)this._sourceNodes[t].state!==p.SOURCENODESTATE.waiting&&this._sourceNodes[t]._stopTime>e&&(e=this._sourceNodes[t]._stopTime);return e}},{key:'destination',get:function(){return this._destinationNode}},{key:'playbackRate',set:function(e){if(0>=e)throw new RangeError('playbackRate must be greater than 0');var t=!0,r=!1,a;try{for(var o=this._sourceNodes[Symbol.iterator](),n,i;!(t=(n=o.next()).done);t=!0)i=n.value,'VideoNode'===i.constructor.name&&(i._globalPlaybackRate=e,i._playbackRateUpdated=!0)}catch(e){r=!0,a=e}finally{try{!t&&o['return']&&o['return']()}finally{if(r)throw a}}this._playbackRate=e},get:function(){return this._playbackRate}},{key:'volume',set:function(e){var t=!0,r=!1,a;try{for(var o=this._sourceNodes[Symbol.iterator](),n,i;!(t=(n=o.next()).done);t=!0)i=n.value,i instanceof l['default']&&(i.volume=e)}catch(e){r=!0,a=e}finally{try{!t&&o['return']&&o['return']()}finally{if(r)throw a}}this._volume=e},get:function(){return this._volume}}],[{key:'DEFINITIONS',get:function(){return S['default']}}]),e}();t['default']=N,N.STATE={},N.STATE.PLAYING=0,N.STATE.PAUSED=1,N.STATE.STALLED=2,N.STATE.ENDED=3,N.STATE.BROKEN=4,N.visualiseVideoContextTimeline=k.visualiseVideoContextTimeline,N.visualiseVideoContextGraph=k.visualiseVideoContextGraph,N.createControlFormForNode=k.createControlFormForNode,N.createSigmaGraphDataFromRenderGraph=k.createSigmaGraphDataFromRenderGraph,N.exportToJSON=k.exportToJSON,N.updateablesManager=P,N.importSimpleEDL=k.importSimpleEDL,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a,o){var n=Object.getOwnPropertyDescriptor(t,r);if(n===void 0){var i=Object.getPrototypeOf(t);null!==i&&e(i,r,a,o)}else if('value'in n&&n.writable)n.value=a;else{var l=n.set;l!==void 0&&l.call(o,a)}return a},l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},s=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,r,o,n){var i=4>=arguments.length||void 0===arguments[4]?1:arguments[4],s=5>=arguments.length||void 0===arguments[5]?0:arguments[5],u=6>=arguments.length||void 0===arguments[6]?4:arguments[6],c=7>=arguments.length||void 0===arguments[7]?void 0:arguments[7],d=8>=arguments.length||void 0===arguments[8]?{}:arguments[8];a(this,t),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,n),this._preloadTime=u,this._sourceOffset=s,this._globalPlaybackRate=i,this._videoElementCache=c,this._playbackRate=1,this._volume=1,this._playbackRateUpdated=!0,this._attributes=d,this._loopElement=!1,this._isElementPlaying=!1,this._attributes.loop&&(this._loopElement=this._attributes.loop),this._displayName='VideoNode'}return o(t,e),n(t,[{key:'_load',value:function(){var e=this;if(l(Object.getPrototypeOf(t.prototype),'_load',this).call(this),void 0!==this._element){for(var r in this._attributes)this._element[r]=this._attributes[r];return void(3<this._element.readyState&&!this._element.seeking?(!1===this._loopElement&&(this._stopTime===Infinity||void 0==this._stopTime)&&(this._stopTime=this._startTime+this._element.duration,this._triggerCallbacks('durationchange',this.duration)),!0!==this._ready&&(this._triggerCallbacks('loaded'),this._playbackRateUpdated=!0),this._ready=!0):this._state!==s.SOURCENODESTATE.error&&(this._ready=!1))}if(this._isResponsibleForElementLifeCycle)for(var a in this._videoElementCache?this._element=this._videoElementCache.get():(this._element=document.createElement('video'),this._element.setAttribute('crossorigin','anonymous'),this._element.setAttribute('webkit-playsinline',''),this._element.setAttribute('playsinline',''),this._playbackRateUpdated=!0),this._element.volume=this._volume,void 0!==window.MediaStream&&this._elementURL instanceof MediaStream?this._element.srcObject=this._elementURL:this._element.src=this._elementURL,this._attributes)this._element[a]=this._attributes[a];if(this._element){var o=0;this._currentTime>this._startTime&&(o=this._currentTime-this._startTime),this._element.currentTime=this._sourceOffset+o,this._element.onerror=function(){void 0===e._element||(console.debug('Error with element',e._element),e._state=s.SOURCENODESTATE.error,e._ready=!0,e._triggerCallbacks('error'))}}else this._state=s.SOURCENODESTATE.error,this._ready=!0,this._triggerCallbacks('error')}},{key:'_unload',value:function(){if(l(Object.getPrototypeOf(t.prototype),'_unload',this).call(this),this._isResponsibleForElementLifeCycle&&void 0!==this._element){for(var e in this._element.src='',this._element.srcObject=void 0,this._attributes)this._element.removeAttribute(e);this._element=void 0,this._videoElementCache||delete this._element}this._ready=!1,this._isElementPlaying=!1}},{key:'_seek',value:function(e){if(l(Object.getPrototypeOf(t.prototype),'_seek',this).call(this,e),this.state===s.SOURCENODESTATE.playing||this.state===s.SOURCENODESTATE.paused){void 0===this._element&&this._load();var r=this._currentTime-this._startTime+this._sourceOffset;this._element.currentTime=r,this._ready=!1}(this._state===s.SOURCENODESTATE.sequenced||this._state===s.SOURCENODESTATE.ended)&&void 0!==this._element&&this._unload()}},{key:'_update',value:function(e){return(l(Object.getPrototypeOf(t.prototype),'_update',this).call(this,e),void 0!==this._element&&this._element.ended&&(this._state=s.SOURCENODESTATE.ended,this._triggerCallbacks('ended')),this._startTime-this._currentTime<this._preloadTime&&this._state!==s.SOURCENODESTATE.waiting&&this._state!==s.SOURCENODESTATE.ended&&this._load(),this._state===s.SOURCENODESTATE.playing)?(this._playbackRateUpdated&&(this._element.playbackRate=this._globalPlaybackRate*this._playbackRate,this._playbackRateUpdated=!1),this._isElementPlaying||(this._element.play(),this._stretchPaused&&this._element.pause(),this._isElementPlaying=!0),!0):this._state===s.SOURCENODESTATE.paused?(this._element.pause(),this._isElementPlaying=!1,!0):this._state===s.SOURCENODESTATE.ended&&void 0!==this._element?(this._element.pause(),this._isElementPlaying&&this._unload(),!1):void 0}},{key:'clearTimelineState',value:function(){l(Object.getPrototypeOf(t.prototype),'clearTimelineState',this).call(this),void 0!==this._element&&(this._element.pause(),this._isElementPlaying=!1),this._unload()}},{key:'destroy',value:function(){this._element&&this._element.pause(),l(Object.getPrototypeOf(t.prototype),'destroy',this).call(this)}},{key:'playbackRate',set:function(e){this._playbackRate=e,this._playbackRateUpdated=!0},get:function(){return this._playbackRate}},{key:'stretchPaused',set:function(e){i(Object.getPrototypeOf(t.prototype),'stretchPaused',e,this),this._element&&(this._stretchPaused?this._element.pause():this._state===s.SOURCENODESTATE.playing&&this._element.play())},get:function(){return this._stretchPaused}},{key:'elementURL',get:function(){return this._elementURL}},{key:'volume',set:function(e){this._volume=e,void 0!==this._element&&(this._element.volume=this._volume)}}]),t}(u['default']);t['default']=c,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(3),s=r(26),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c={waiting:0,sequenced:1,playing:2,paused:3,ended:4,error:5},d=function(e){function t(e,r,o,n){a(this,t),i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,r,o,[],!0),this._element=void 0,this._elementURL=void 0,this._isResponsibleForElementLifeCycle=!0,'string'==typeof e||void 0!==window.MediaStream&&e instanceof MediaStream?this._elementURL=e:(this._element=e,this._isResponsibleForElementLifeCycle=!1),this._state=c.waiting,this._currentTime=n,this._startTime=NaN,this._stopTime=Infinity,this._ready=!1,this._loadCalled=!1,this._stretchPaused=!1,this._texture=(0,l.createElementTexutre)(r),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this._callbacks=[],this._renderPaused=!1,this._displayName='SourceNode'}return o(t,e),n(t,[{key:'_load',value:function(){this._loadCalled||(this._triggerCallbacks('load'),this._loadCalled=!0)}},{key:'_unload',value:function(){this._triggerCallbacks('destroy'),this._loadCalled=!1}},{key:'registerCallback',value:function(e,t){this._callbacks.push({type:e,func:t})}},{key:'unregisterCallback',value:function(e){var t=[],r=!0,a=!1,o;try{for(var n=this._callbacks[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)l=i.value,void 0===e?t.push(l):l.func===e&&t.push(l)}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}var s=!0,u=!1,c;try{for(var d=t[Symbol.iterator](),p;!(s=(p=d.next()).done);s=!0){var l=p.value,_=this._callbacks.indexOf(l);this._callbacks.splice(_,1)}}catch(e){u=!0,c=e}finally{try{!s&&d['return']&&d['return']()}finally{if(u)throw c}}}},{key:'_triggerCallbacks',value:function(e,t){var r=!0,a=!1,o;try{for(var n=this._callbacks[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)l=i.value,l.type===e&&(void 0===t?l.func(this):l.func(this,t))}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}}},{key:'start',value:function(e){return this._state===c.waiting?(this._startTime=this._currentTime+e,this._state=c.sequenced,!0):(console.debug('SourceNode is has already been sequenced. Can\'t sequence twice.'),!1)}},{key:'startAt',value:function(e){return this._state===c.waiting?(this._startTime=e,this._state=c.sequenced,!0):(console.debug('SourceNode is has already been sequenced. Can\'t sequence twice.'),!1)}},{key:'stop',value:function(e){return this._state===c.ended?(console.debug('SourceNode has already ended. Cannot call stop.'),!1):this._state===c.waiting?(console.debug('SourceNode must have start called before stop is called'),!1):this._currentTime+e<=this._startTime?(console.debug('SourceNode must have a stop time after it\'s start time, not before.'),!1):(this._stopTime=this._currentTime+e,this._stretchPaused=!1,this._triggerCallbacks('durationchange',this.duration),!0)}},{key:'stopAt',value:function(e){return this._state===c.ended?(console.debug('SourceNode has already ended. Cannot call stop.'),!1):this._state===c.waiting?(console.debug('SourceNode must have start called before stop is called'),!1):e<=this._startTime?(console.debug('SourceNode must have a stop time after it\'s start time, not before.'),!1):(this._stopTime=e,this._stretchPaused=!1,this._triggerCallbacks('durationchange',this.duration),!0)}},{key:'_seek',value:function(e){this._renderPaused=!1,this._triggerCallbacks('seek',e),this._state===c.waiting||(e<this._startTime&&((0,l.clearTexture)(this._gl,this._texture),this._state=c.sequenced),e>=this._startTime&&this._state!==c.paused&&(this._state=c.playing),e>=this._stopTime&&((0,l.clearTexture)(this._gl,this._texture),this._triggerCallbacks('ended'),this._state=c.ended),this._currentTime=e)}},{key:'_pause',value:function(){(this._state===c.playing||0===this._currentTime&&0===this._startTime)&&(this._triggerCallbacks('pause'),this._state=c.paused,this._renderPaused=!1)}},{key:'_play',value:function(){this._state===c.paused&&(this._triggerCallbacks('play'),this._state=c.playing)}},{key:'_isReady',value:function(){return this._state===c.playing||this._state===c.paused||this._state===c.error?this._ready:!0}},{key:'_update',value:function(e){var t=1>=arguments.length||void 0===arguments[1]||arguments[1];this._rendered=!0;var r=e-this._currentTime;return(this._currentTime=e,this._state!==c.waiting&&this._state!==c.ended&&this._state!==c.error)&&((this._triggerCallbacks('render',e),e<this._startTime&&((0,l.clearTexture)(this._gl,this._texture),this._state=c.sequenced),e>=this._startTime&&this._state!==c.paused&&this._state!==c.error&&(this._state!==c.playing&&this._triggerCallbacks('play'),this._state=c.playing),e>=this._stopTime&&((0,l.clearTexture)(this._gl,this._texture),this._triggerCallbacks('ended'),this._state=c.ended),void 0===this._element)||(this._renderPaused||this._state!==c.paused||(t&&(0,l.updateTexture)(this._gl,this._texture,this._element),this._renderPaused=!0),this._state===c.playing&&(t&&(0,l.updateTexture)(this._gl,this._texture,this._element),this._stretchPaused&&(this._stopTime+=r)),!0))}},{key:'clearTimelineState',value:function(){this._startTime=NaN,this._stopTime=Infinity,this._state=c.waiting}},{key:'destroy',value:function(){this._unload(),i(Object.getPrototypeOf(t.prototype),'destroy',this).call(this),this.unregisterCallback(),delete this._element,this._elementURL=void 0,this._state=c.waiting,this._currentTime=0,this._startTime=NaN,this._stopTime=Infinity,this._ready=!1,this._loadCalled=!1,this._gl.deleteTexture(this._texture),this._texture=void 0}},{key:'state',get:function(){return this._state}},{key:'element',get:function(){return this._element}},{key:'duration',get:function(){return isNaN(this._startTime)?void 0:this._stopTime===Infinity?Infinity:this._stopTime-this._startTime}},{key:'stretchPaused',set:function(e){this._stretchPaused=e},get:function(){return this._stretchPaused}},{key:'startTime',get:function(){return this._startTime}},{key:'stopTime',get:function(){return this._stopTime}}]),t}(u['default']);t.SOURCENODESTATE=c,t['default']=d},function(r,a,n){function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function l(e){return{currentTime:e.currentTime,duration:e.duration,state:e.state,playbackRate:e.playbackRate}}function s(e){function t(e){var t=document.createElement('a');return t.href=e,t.href}function r(e,t){var r=[],a=!0,o=!1,n;try{for(var i=e.inputs[Symbol.iterator](),l,s;!(a=(l=i.next()).done);a=!0)if(s=l.value,void 0!==s){var u=void 0,c=e.inputs.indexOf(s),d=t._processingNodes.indexOf(s);if(-1<d)u='processor'+d;else{var p=t._sourceNodes.indexOf(s);-1<p?u='source'+p:console.log('Warning, can\'t find input',s)}r.push({id:u,index:c})}}catch(e){o=!0,n=e}finally{try{!a&&i['return']&&i['return']()}finally{if(o)throw n}}return r}var a={},o=[];for(var n in g.SOURCENODESTATE)o[g.SOURCENODESTATE[n]]=n;for(var i in e._sourceNodes){var l=e._sourceNodes[i],s='source'+i,u='';l._isResponsibleForElementLifeCycle?u=t(l._elementURL):(console.debug('Warning - Trying to export source created from an element not a URL. URL of export will be set to the elements src attribute and may be incorrect',l),u=l.element.src);var c={type:l.displayName,url:u,start:l.startTime,stop:l.stopTime,state:o[l.state]};'VideoNode'===c.type&&(c.currentTime=null,l.element&&l.element.currentTime&&(c.currentTime=l.element.currentTime)),l._sourceOffset&&(c.sourceOffset=l._sourceOffset),a[s]=c}for(var i in e._processingNodes){var d=e._processingNodes[i],s='processor'+i,c={type:d.displayName,definition:d._definition,inputs:r(d,e),properties:{}};for(var p in c.definition.properties)c.properties[p]=d[p];'TransitionNode'===c.type&&(c.transitions=d._transitions),a[s]=c}return a.destination={type:'Destination',inputs:r(e.destination,e)},a}function d(e){function t(e){var r=1>=arguments.length||void 0===arguments[1]?0:arguments[1],o=!0,i=!1,l;try{for(var s=e.inputs[Symbol.iterator](),u;!(o=(u=s.next()).done);o=!0){var c=u.value,n=r+1;a.has(c)?n>a.get(c)&&a.set(c,n):a.set(c,n),t(c,a.get(c))}}catch(e){i=!0,l=e}finally{try{!o&&s['return']&&s['return']()}finally{if(i)throw l}}}var r=e.destination,a=new Map;return a.set(r,0),t(r),a}Object.defineProperty(a,'__esModule',{value:!0});var _=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();a.compileShader=function(e,t,r){var a=e.createShader(r);e.shaderSource(a,t),e.compileShader(a);var o=e.getShaderParameter(a,e.COMPILE_STATUS);if(!o)throw'could not compile shader:'+e.getShaderInfoLog(a);return a},a.createShaderProgram=function(e,t,r){var a=e.createProgram();if(e.attachShader(a,t),e.attachShader(a,r),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw{error:4,msg:'Can\'t link shader program for track',toString:function(){return this.msg}};return a},a.createElementTexutre=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),t},a.updateTexture=function(e,t,r){void 0!==r.readyState&&0===r.readyState||(e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r))},a.clearTexture=function(e,t){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))},a.generateRandomId=function(){function e(e){return e[c(Math.random()*e.length)]}var t=e(['adorable','alert','average','beautiful','blonde','bloody','blushing','bright','clean','clear','cloudy','colourful','concerned','crowded','curious','cute','dark','dirty','drab','distinct','dull','elegant','fancy','filthy','glamorous','gleaming','graceful','grotesque','homely','light','misty','motionless','muddy','plain','poised','quaint','scary','shiny','smoggy','sparkling','spotless','stormy','strange','ugly','unsightly','unusual'])+' '+e(['alive','brainy','broken','busy','careful','cautious','clever','crazy','damaged','dead','difficult','easy','fake','false','famous','forward','fragile','guilty','helpful','helpless','important','impossible','infamous','innocent','inquisitive','mad','modern','open','outgoing','outstanding','poor','powerful','puzzled','real','rich','right','robust','sane','scary','shy','sleepy','stupid','super','tame','thick','tired','wild','wrong'])+' '+e(['manatee','gila monster','nematode','seahorse','slug','koala bear','giant tortoise','garden snail','starfish','sloth','american woodcock','coral','swallowtail butterfly','house sparrow','sea anemone']);return t=function(e){return e=e.replace(/\b\w/g,function(e){return e.toUpperCase()}),e}(t),t=t.replace(/ /g,'-'),t},a.exportToJSON=function(e){return console.warn('VideoContext.exportToJSON has been deprecated. Please use VideoContext.snapshot instead.'),JSON.stringify(s(e))},a.snapshot=function(e){return{nodes:s(e),videoContext:l(e)}},a.createControlFormForNode=function(e,t){var r=document.createElement('div');if(t!==void 0){var a=document.createElement('h2');a.innerHTML=t,r.appendChild(a)}var o=function(t){var a=document.createElement('p'),o=document.createElement('h3');o.innerHTML=t,a.appendChild(o);var n=e._properties[t].value;if('number'==typeof n)(function(){var r=document.createElement('input');r.setAttribute('type','range'),r.setAttribute('min','0'),r.setAttribute('max','1'),r.setAttribute('step','0.01'),r.setAttribute('value',n,toString());var o=document.createElement('input');o.setAttribute('type','number'),o.setAttribute('min','0'),o.setAttribute('max','1'),o.setAttribute('step','0.01'),o.setAttribute('value',n,toString());var i=!1;r.onmousedown=function(){i=!0},r.onmouseup=function(){i=!1},r.onmousemove=function(){i&&(e[t]=parseFloat(r.value),o.value=r.value)},r.onchange=function(){e[t]=parseFloat(r.value),o.value=r.value},o.onchange=function(){e[t]=parseFloat(o.value),r.value=o.value},a.appendChild(r),a.appendChild(o)})();else if('[object Array]'===Object.prototype.toString.call(n)){var i=function(){var r=document.createElement('input');r.setAttribute('type','range'),r.setAttribute('min','0'),r.setAttribute('max','1'),r.setAttribute('step','0.01'),r.setAttribute('value',n[l],toString());var o=document.createElement('input');o.setAttribute('type','number'),o.setAttribute('min','0'),o.setAttribute('max','1'),o.setAttribute('step','0.01'),o.setAttribute('value',n,toString());var i=l,s=!1;r.onmousedown=function(){s=!0},r.onmouseup=function(){s=!1},r.onmousemove=function(){s&&(e[t][i]=parseFloat(r.value),o.value=r.value)},r.onchange=function(){e[t][i]=parseFloat(r.value),o.value=r.value},o.onchange=function(){e[t][i]=parseFloat(o.value),r.value=o.value},a.appendChild(r),a.appendChild(o)};for(l=0;l<n.length;l++)i()}r.appendChild(a)};for(var n in e._properties){var l;o(n)}return r},a.visualiseVideoContextGraph=function(r,a){function n(e,t,r,a){var o=t.get(e);t.values();var n=0,i=!0,l=!1,s;try{for(var u=t[Symbol.iterator](),c,d;!(i=(c=u.next()).done)&&(d=c.value,d[0]!==e);i=!0)d[1]===o&&(n+=1)}catch(e){l=!0,s=e}finally{try{!i&&u['return']&&u['return']()}finally{if(l)throw s}}return{x:r*t.get(e),y:1.5*a*n+50}}var l=a.getContext('2d'),s=a.width,c=a.height;l.clearRect(0,0,s,c);var _=d(r),y=_.values();y=Array.from(y).sort(function(e,t){return t-e});for(var v=y[0],g=s/(v+1),m=c/r._sourceNodes.length/3,f=1.618*m,b=0;b<r._renderGraph.connections.length;b++){var i=r._renderGraph.connections[b],x=n(i.source,_,g,m),h=n(i.destination,_,g,m);if(x!==void 0&&h!==void 0){l.beginPath();var T=x.x+f/2,O=x.y+m/2,C=h.x+f/2,k=h.y+m/2,E=e/2-Math.atan2(C-T,k-O),S=t(o(T-C,2)+o(O-k,2)),P=p(T,C)+(u(T,C)-p(T,C))/2,N=p(O,k)+(u(O,k)-p(O,k))/2,A=Math.cos(E+e/2)*S/1.5+P,R=Math.sin(E+e/2)*S/1.5+N;l.arc(A,R,S/1.2,E-e+0.95,E-0.95),l.stroke()}}var I=!0,F=!1,w;try{for(var L=_.keys()[Symbol.iterator](),D;!(I=(D=L.next()).done);I=!0){var j=D.value,M=n(j,_,g,m),U='#AA9639',G='';'CompositingNode'===j.displayName&&(U='#000000'),'DestinationNode'===j.displayName&&(U='#7D9F35',G='Output'),'VideoNode'===j.displayName&&(U='#572A72',G='Video'),'CanvasNode'===j.displayName&&(U='#572A72',G='Canvas'),'ImageNode'===j.displayName&&(U='#572A72',G='Image'),l.beginPath(),l.fillStyle=U,l.fillRect(M.x,M.y,f,m),l.fill(),l.fillStyle='#000',l.textAlign='center',l.font='10px Arial',l.fillText(G,M.x+f/2,M.y+m/2+2.5),l.fill()}}catch(e){F=!0,w=e}finally{try{!I&&L['return']&&L['return']()}finally{if(F)throw w}}},a.createSigmaGraphDataFromRenderGraph=function(e){function t(t){if(-1!==e._sourceNodes.indexOf(t)){var r='source '+t.displayName+' '+e._sourceNodes.indexOf(t);return r}var a='processor '+t.displayName+' '+e._processingNodes.indexOf(t);return a}for(var r={nodes:[{id:t(e.destination),label:'Destination Node',x:2.5,y:0.5,size:2,node:e.destination}],edges:[]},a=0;a<e._sourceNodes.length;a++){var o=e._sourceNodes[a],n=a*(1/e._sourceNodes.length);r.nodes.push({id:t(o),label:'Source '+a.toString(),x:0,y:n,size:2,color:'#572A72',node:o})}for(var a=0,i;a<e._processingNodes.length;a++)i=e._processingNodes[a],r.nodes.push({id:t(i),x:2.5*Math.random(),y:Math.random(),size:2,node:i});for(var a=0,l;a<e._renderGraph.connections.length;a++)l=e._renderGraph.connections[a],r.edges.push({id:'e'+a.toString(),source:t(l.source),target:t(l.destination)});return r},a.importSimpleEDL=function(e,t){var r=e.compositor(v['default'].COMBINE),a=!0,o=!1,n;try{for(var i=t[Symbol.iterator](),l;!(a=(l=i.next()).done);a=!0){var s=l.value,u=void 0;if('video'===s.type)u=e.video(s.src,s.sourceStart);else if('image'===s.type)u=e.image(s.src,s.sourceStart);else{console.debug('Clip type "'+s.type+'" not recognised, skipping.');continue}u.startAt(s.start),u.stopAt(s.start+s.duration),u.connect(r)}}catch(e){o=!0,n=e}finally{try{!a&&i['return']&&i['return']()}finally{if(o)throw n}}return r},a.visualiseVideoContextTimeline=function(e,t,r){var a=t.getContext('2d'),o=t.width,n=t.height,l=n/e._sourceNodes.length,s=e.duration;if(r>s&&!e.endOnLastSourceEnd&&(s=r),e.duration===Infinity){for(var u=0,c=0,i;c<e._sourceNodes.length;c++)i=e._sourceNodes[c],i._stopTime!==Infinity&&(u+=i._stopTime);s=u>e.currentTime?u+5:e.currentTime+5}var d=o/s,p={video:['#572A72','#3C1255'],image:['#7D9F35','#577714'],canvas:['#AA9639','#806D15']};a.clearRect(0,0,o,n),a.fillStyle='#999';var _=!0,y=!1,v;try{for(var g=e._processingNodes[Symbol.iterator](),m,f;!(_=(m=g.next()).done);_=!0)if(f=m.value,'TransitionNode'===f.displayName)for(var b in f._transitions){var x=!0,h=!1,T=void 0;try{for(var O=f._transitions[b][Symbol.iterator](),C;!(x=(C=O.next()).done);x=!0){var k=C.value,E=(k.end-k.start)*d,S=k.start*d;a.fillStyle='rgba(0,0,0, 0.3)',a.fillRect(S,0,E,n),a.fill()}}catch(e){h=!0,T=e}finally{try{!x&&O['return']&&O['return']()}finally{if(h)throw T}}}}catch(e){y=!0,v=e}finally{try{!_&&g['return']&&g['return']()}finally{if(y)throw v}}for(var c=0;c<e._sourceNodes.length;c++){var i=e._sourceNodes[c],P=i._stopTime-i._startTime;P==Infinity&&(P=e.currentTime);var N=i._startTime,A=P*d,R=l*c;a.fillStyle=p.video[c%p.video.length],a.fillRect(N*d,R,A,l),a.fill()}void 0!==r&&(a.fillStyle='#000',a.fillRect(r*d,0,1,n))};var y=n(4),v=function(e){return e&&e.__esModule?e:{default:e}}(y),g=n(2),m=function(){function e(){i(this,e),this._updateables=[],this._useWebworker=!1,this._active=!1,this._previousRAFTime=void 0,this._previousWorkerTime=void 0,this._webWorkerString='\t            var running = false;\t            function tick(){\t                postMessage(Date.now());\t                if (running){\t                    setTimeout(tick, 1000/20);\t                }\t            }\t            self.addEventListener(\'message\',function(msg){\t                var data = msg.data;\t                if (data === \'start\'){\t                    running = true;\t                    tick();\t                }\t                if (data === \'stop\') running = false;\t            });',this._webWorker=void 0}return _(e,[{key:'_initWebWorker',value:function(){var e=this;window.URL=window.URL||window.webkitURL;var t=new Blob([this._webWorkerString],{type:'application/javascript'});this._webWorker=new Worker(URL.createObjectURL(t)),this._webWorker.onmessage=function(t){var r=t.data;e._updateWorkerTime(r)}}},{key:'_lostVisibility',value:function(){this._previousWorkerTime=Date.now(),this._useWebworker=!0,this._webWorker||this._initWebWorker(),this._webWorker.postMessage('start')}},{key:'_gainedVisibility',value:function(){this._useWebworker=!1,this._previousRAFTime=void 0,this._webWorker&&this._webWorker.postMessage('stop'),requestAnimationFrame(this._updateRAFTime.bind(this))}},{key:'_init',value:function(){var e=this;return window.Worker?'undefined'==typeof document.hidden?(window.addEventListener('focus',this._gainedVisibility.bind(this)),void window.addEventListener('blur',this._lostVisibility.bind(this))):void(document.addEventListener('visibilitychange',function(){!0===document.hidden?e._lostVisibility():e._gainedVisibility()},!1),requestAnimationFrame(this._updateRAFTime.bind(this))):void 0}},{key:'_updateWorkerTime',value:function(e){var t=(e-this._previousWorkerTime)/1e3;0!=t&&this._update(t),this._previousWorkerTime=e}},{key:'_updateRAFTime',value:function(e){void 0===this._previousRAFTime&&(this._previousRAFTime=e);var t=(e-this._previousRAFTime)/1e3;0!=t&&this._update(t),this._previousRAFTime=e,this._useWebworker||requestAnimationFrame(this._updateRAFTime.bind(this))}},{key:'_update',value:function(e){for(var t=0;t<this._updateables.length;t++)this._updateables[t]._update(parseFloat(e))}},{key:'register',value:function(e){this._updateables.push(e),!1===this._active&&(this._active=!0,this._init())}}]),e}();a.UpdateablesManager=m},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var o=r(5),n=a(o),i=r(6),l=a(i),s=r(7),u=a(s),c=r(8),d=a(c),p=r(9),_=a(p),y=r(10),v=a(y),g=r(11),m=a(g),f=r(12),b=a(f),x=r(13),h=a(x),T=r(14),O=a(T),C=r(15),k=a(C),E=r(16),S=a(E),P=r(17),N=a(P),A=r(18),R=a(A),I=r(19),F=a(I),w=r(20),L=a(w),D=r(21),j=a(D),M=r(22),U=a(M),G=r(23),V=a(G),Y=r(24),B=a(Y),W=r(25),H=a(W),q={AAF_VIDEO_SCALE:n['default'],CROSSFADE:l['default'],DREAMFADE:V['default'],HORIZONTAL_WIPE:u['default'],VERTICAL_WIPE:d['default'],RANDOM_DISSOLVE:_['default'],STATIC_DISSOLVE:j['default'],STATIC_EFFECT:U['default'],TO_COLOR_AND_BACK:v['default'],STAR_WIPE:m['default'],COMBINE:b['default'],COLORTHRESHOLD:h['default'],MONOCHROME:O['default'],HORIZONTAL_BLUR:k['default'],VERTICAL_BLUR:S['default'],AAF_VIDEO_CROP:L['default'],AAF_VIDEO_POSITION:F['default'],AAF_VIDEO_FLIP:R['default'],AAF_VIDEO_FLOP:N['default'],OPACITY:B['default'],CROP:H['default']};t['default']=q,e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'AAF Video Scale Effect',description:'A scale effect based on the AAF spec.',vertexShader:'\t        attribute vec2 a_position;\t        attribute vec2 a_texCoord;\t        varying vec2 v_texCoord;\t        void main() {\t            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t            v_texCoord = a_texCoord;\t        }',fragmentShader:'\t        precision mediump float;\t        uniform sampler2D u_image;\t        uniform float scaleX;\t        uniform float scaleY;\t        varying vec2 v_texCoord;\t        varying float v_progress;\t        void main(){\t            vec2 pos = vec2(v_texCoord[0]*1.0/scaleX - (1.0/scaleX/2.0 -0.5), v_texCoord[1]*1.0/scaleY - (1.0/scaleY/2.0 -0.5));\t                vec4 color = texture2D(u_image, pos);\t                if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){\t                    color = vec4(0.0,0.0,0.0,0.0);\t                }\t                gl_FragColor = color;\t            }',properties:{scaleX:{type:'uniform',value:1},scaleY:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Cross-Fade',description:'A cross-fade effect. Typically used as a transistion.',vertexShader:'\t    attribute vec2 a_position;\t    attribute vec2 a_texCoord;\t    varying vec2 v_texCoord;\t    void main() {\t        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t        v_texCoord = a_texCoord;\t    }',fragmentShader:'\t    precision mediump float;\t    uniform sampler2D u_image_a;\t    uniform sampler2D u_image_b;\t    uniform float mix;\t    varying vec2 v_texCoord;\t    varying float v_mix;\t    void main(){\t        vec4 color_a = texture2D(u_image_a, v_texCoord);\t        vec4 color_b = texture2D(u_image_b, v_texCoord);\t        color_a[0] *= (1.0 - mix);\t        color_a[1] *= (1.0 - mix);\t        color_a[2] *= (1.0 - mix);\t        color_a[3] *= (1.0 - mix);\t        color_b[0] *= mix;\t        color_b[1] *= mix;\t        color_b[2] *= mix;\t        color_b[3] *= mix;\t        gl_FragColor = color_a + color_b;\t    }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Horizontal Wipe',description:'A horizontal wipe effect. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color_a = texture2D(u_image_a, v_texCoord);\t                vec4 color_b = texture2D(u_image_b, v_texCoord);\t                if (v_texCoord[0] > mix){\t                    gl_FragColor = color_a;\t                } else {\t                    gl_FragColor = color_b;\t                }\t            }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'vertical Wipe',description:'A vertical wipe effect. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color_a = texture2D(u_image_a, v_texCoord);\t                vec4 color_b = texture2D(u_image_b, v_texCoord);\t                if (v_texCoord[1] > mix){\t                    gl_FragColor = color_a;\t                } else {\t                    gl_FragColor = color_b;\t                }\t            }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Random Dissolve',description:'A random dissolve effect. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            float rand(vec2 co){\t               return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\t            }\t            void main(){\t                vec4 color_a = texture2D(u_image_a, v_texCoord);\t                vec4 color_b = texture2D(u_image_b, v_texCoord);\t                if (clamp(rand(v_texCoord),  0.01, 1.001) > mix){\t                    gl_FragColor = color_a;\t                } else {\t                    gl_FragColor = color_b;\t                }\t            }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'To Color And Back Fade',description:'A fade to black and back effect. Setting mix to 0.5 is a fully solid color frame. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            uniform vec4 color;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color_a = texture2D(u_image_a, v_texCoord);\t                vec4 color_b = texture2D(u_image_b, v_texCoord);\t                float mix_amount = (mix *2.0) - 1.0;\t                if(mix_amount < 0.0){\t                    gl_FragColor = abs(mix_amount) * color_a + (1.0 - abs(mix_amount)) * color;\t                } else {\t                    gl_FragColor = mix_amount * color_b + (1.0 - mix_amount) * color;\t                }\t            }',properties:{mix:{type:'uniform',value:0},color:{type:'uniform',value:[0,0,0,0]}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Star Wipe Fade',description:'A classic star wipe transistion. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            float sign (vec2 p1, vec2 p2, vec2 p3){\t                return (p1[0] - p3[0]) * (p2[1] - p3[1]) - (p2[0] - p3[0]) * (p1[1] - p3[1]);\t            }\t            bool pointInTriangle(vec2 pt, vec2 v1, vec2 v2, vec2 v3){\t                bool b1, b2, b3;\t                b1 = sign(pt, v1, v2) < 0.0;\t                b2 = sign(pt, v2, v3) < 0.0;\t                b3 = sign(pt, v3, v1) < 0.0;\t                return ((b1 == b2) && (b2 == b3));\t            }\t            vec2 rotatePointAboutPoint(vec2 point, vec2 pivot, float angle){\t                float s = sin(angle);\t                float c = cos(angle);\t                float x = point[0] - pivot[0];\t                float y = point[1] - pivot[1];\t                float new_x = x * c - y * s;\t                float new_y = x * s + y * c;\t                return vec2(new_x + pivot[0], new_y+pivot[1]);\t            }\t            \t            void main(){\t                vec4 color_a = texture2D(u_image_b, v_texCoord);\t                vec4 color_b = texture2D(u_image_a, v_texCoord);\t                vec2 t0_p0,t0_p1,t0_p2,t1_p0,t1_p1,t1_p2,t2_p0,t2_p1,t2_p2,t3_p0,t3_p1,t3_p2;\t                vec2 t4_p0,t4_p1,t4_p2,t5_p0,t5_p1,t5_p2,t6_p0,t6_p1,t6_p2,t7_p0,t7_p1,t7_p2;\t                \t                \t                t0_p0 = vec2(0.0, 0.25) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);\t                t0_p1 = vec2(0.0, -0.25) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);\t                t0_p2 = vec2(1.0, 0.0) * clamp(mix,0.0,1.0) * 2.0 + vec2(0.5,0.5);\t                \t                t1_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854);\t                t1_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854);\t                t1_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854);\t                \t                t2_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 2.0);\t                t2_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 2.0);\t                t2_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 2.0);\t                \t                t3_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 3.0);\t                t3_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 3.0);\t                t3_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 3.0);\t                \t                t4_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 4.0);\t                t4_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 4.0);\t                t4_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 4.0);\t                \t                t5_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 5.0);\t                t5_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 5.0);\t                t5_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 5.0);\t                \t                t6_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 6.0);\t                t6_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 6.0);\t                t6_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 6.0);\t                \t                t7_p0 = rotatePointAboutPoint(t0_p0, vec2(0.5,0.5), 0.7854 * 7.0);\t                t7_p1 = rotatePointAboutPoint(t0_p1, vec2(0.5,0.5), 0.7854 * 7.0);\t                t7_p2 = rotatePointAboutPoint(t0_p2, vec2(0.5,0.5), 0.7854 * 7.0);\t                \t                if(mix > 0.99){\t                    gl_FragColor = color_a;\t                    return;\t                }\t                if(mix < 0.01){\t                    gl_FragColor = color_b;\t                    return;\t                }\t                if(pointInTriangle(v_texCoord, t0_p0, t0_p1, t0_p2) || pointInTriangle(v_texCoord, t1_p0, t1_p1, t1_p2) || pointInTriangle(v_texCoord, t2_p0, t2_p1, t2_p2) || pointInTriangle(v_texCoord, t3_p0, t3_p1, t3_p2) || pointInTriangle(v_texCoord, t4_p0, t4_p1, t4_p2) || pointInTriangle(v_texCoord, t5_p0, t5_p1, t5_p2) || pointInTriangle(v_texCoord, t6_p0, t6_p1, t6_p2) || pointInTriangle(v_texCoord, t7_p0, t7_p1, t7_p2)){\t                    gl_FragColor = color_a;\t                } else {\t                    gl_FragColor = color_b;\t                }\t            }',properties:{mix:{type:'uniform',value:1}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Combine',description:'A basic effect which renders the input to the output, Typically used as a combine node for layering up media with alpha transparency.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            uniform float a;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color = texture2D(u_image, v_texCoord);\t                gl_FragColor = color;\t            }',properties:{a:{type:'uniform',value:0}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Color Threshold',description:'Turns all pixels with a greater value than the specified threshold transparent.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            uniform float a;\t            uniform vec3 colorAlphaThreshold;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color = texture2D(u_image, v_texCoord);\t                if (color[0] > colorAlphaThreshold[0] && color[1]> colorAlphaThreshold[1] && color[2]> colorAlphaThreshold[2]){\t                    color = vec4(0.0,0.0,0.0,0.0);\t                }\t                gl_FragColor = color;\t            }',properties:{a:{type:'uniform',value:0},colorAlphaThreshold:{type:'uniform',value:[0,0.55,0]}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Monochrome',description:'Change images to a single chroma (e.g can be used to make a black & white filter). Input color mix and output color mix can be adjusted.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            uniform vec3 inputMix;\t            uniform vec3 outputMix;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            void main(){\t                vec4 color = texture2D(u_image, v_texCoord);\t                float mono = color[0]*inputMix[0] + color[1]*inputMix[1] + color[2]*inputMix[2];\t                color[0] = mono * outputMix[0];\t                color[1] = mono * outputMix[1];\t                color[2] = mono * outputMix[2];\t                gl_FragColor = color;\t            }',properties:{inputMix:{type:'uniform',value:[0.4,0.6,0.2]},outputMix:{type:'uniform',value:[1,1,1]}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Horizontal Blur',description:'A horizontal blur effect. Adpated from http://xissburg.com/faster-gaussian-blur-in-glsl/',vertexShader:'\t        attribute vec2 a_position;\t        attribute vec2 a_texCoord;\t        uniform float blurAmount;\t        varying vec2 v_texCoord;\t        varying vec2 v_blurTexCoords[14];\t        void main() {\t            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t            v_texCoord = a_texCoord;\t            v_blurTexCoords[ 0] = v_texCoord + vec2(-0.028 * blurAmount, 0.0);\t            v_blurTexCoords[ 1] = v_texCoord + vec2(-0.024 * blurAmount, 0.0);\t            v_blurTexCoords[ 2] = v_texCoord + vec2(-0.020 * blurAmount, 0.0);\t            v_blurTexCoords[ 3] = v_texCoord + vec2(-0.016 * blurAmount, 0.0);\t            v_blurTexCoords[ 4] = v_texCoord + vec2(-0.012 * blurAmount, 0.0);\t            v_blurTexCoords[ 5] = v_texCoord + vec2(-0.008 * blurAmount, 0.0);\t            v_blurTexCoords[ 6] = v_texCoord + vec2(-0.004 * blurAmount, 0.0);\t            v_blurTexCoords[ 7] = v_texCoord + vec2( 0.004 * blurAmount, 0.0);\t            v_blurTexCoords[ 8] = v_texCoord + vec2( 0.008 * blurAmount, 0.0);\t            v_blurTexCoords[ 9] = v_texCoord + vec2( 0.012 * blurAmount, 0.0);\t            v_blurTexCoords[10] = v_texCoord + vec2( 0.016 * blurAmount, 0.0);\t            v_blurTexCoords[11] = v_texCoord + vec2( 0.020 * blurAmount, 0.0);\t            v_blurTexCoords[12] = v_texCoord + vec2( 0.024 * blurAmount, 0.0);\t            v_blurTexCoords[13] = v_texCoord + vec2( 0.028 * blurAmount, 0.0);\t        }',fragmentShader:'\t        precision mediump float;\t        uniform sampler2D u_image;\t        varying vec2 v_texCoord;\t        varying vec2 v_blurTexCoords[14];\t        void main(){\t            gl_FragColor = vec4(0.0);\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 0])*0.0044299121055113265;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 1])*0.00895781211794;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 2])*0.0215963866053;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 3])*0.0443683338718;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 4])*0.0776744219933;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 5])*0.115876621105;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 6])*0.147308056121;\t            gl_FragColor += texture2D(u_image, v_texCoord         )*0.159576912161;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 7])*0.147308056121;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 8])*0.115876621105;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 9])*0.0776744219933;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[10])*0.0443683338718;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[11])*0.0215963866053;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[12])*0.00895781211794;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[13])*0.0044299121055113265;\t        }',properties:{blurAmount:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Vertical Blur',description:'A vertical blur effect. Adpated from http://xissburg.com/faster-gaussian-blur-in-glsl/',vertexShader:'\t        attribute vec2 a_position;\t        attribute vec2 a_texCoord;\t        varying vec2 v_texCoord;\t        uniform float blurAmount;\t        varying vec2 v_blurTexCoords[14];\t        void main() {\t            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t            v_texCoord = a_texCoord;\t            v_blurTexCoords[ 0] = v_texCoord + vec2(0.0,-0.028 * blurAmount);\t            v_blurTexCoords[ 1] = v_texCoord + vec2(0.0,-0.024 * blurAmount);\t            v_blurTexCoords[ 2] = v_texCoord + vec2(0.0,-0.020 * blurAmount);\t            v_blurTexCoords[ 3] = v_texCoord + vec2(0.0,-0.016 * blurAmount);\t            v_blurTexCoords[ 4] = v_texCoord + vec2(0.0,-0.012 * blurAmount);\t            v_blurTexCoords[ 5] = v_texCoord + vec2(0.0,-0.008 * blurAmount);\t            v_blurTexCoords[ 6] = v_texCoord + vec2(0.0,-0.004 * blurAmount);\t            v_blurTexCoords[ 7] = v_texCoord + vec2(0.0, 0.004 * blurAmount);\t            v_blurTexCoords[ 8] = v_texCoord + vec2(0.0, 0.008 * blurAmount);\t            v_blurTexCoords[ 9] = v_texCoord + vec2(0.0, 0.012 * blurAmount);\t            v_blurTexCoords[10] = v_texCoord + vec2(0.0, 0.016 * blurAmount);\t            v_blurTexCoords[11] = v_texCoord + vec2(0.0, 0.020 * blurAmount);\t            v_blurTexCoords[12] = v_texCoord + vec2(0.0, 0.024 * blurAmount);\t            v_blurTexCoords[13] = v_texCoord + vec2(0.0, 0.028 * blurAmount);\t        }',fragmentShader:'\t        precision mediump float;\t        uniform sampler2D u_image;\t        varying vec2 v_texCoord;\t        varying vec2 v_blurTexCoords[14];\t        void main(){\t            gl_FragColor = vec4(0.0);\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 0])*0.0044299121055113265;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 1])*0.00895781211794;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 2])*0.0215963866053;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 3])*0.0443683338718;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 4])*0.0776744219933;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 5])*0.115876621105;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 6])*0.147308056121;\t            gl_FragColor += texture2D(u_image, v_texCoord         )*0.159576912161;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 7])*0.147308056121;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 8])*0.115876621105;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[ 9])*0.0776744219933;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[10])*0.0443683338718;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[11])*0.0215963866053;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[12])*0.00895781211794;\t            gl_FragColor += texture2D(u_image, v_blurTexCoords[13])*0.0044299121055113265;\t        }',properties:{blurAmount:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'AAF Video Flop Effect',description:'A flop effect based on the AAF spec. Mirrors the image in the y-axis',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            varying vec2 v_texCoord;\t            void main(){\t                vec2 coord = vec2(1.0 - v_texCoord[0] ,v_texCoord[1]);\t                vec4 color = texture2D(u_image, coord);\t                gl_FragColor = color;\t            }',properties:{},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'AAF Video Scale Effect',description:'A flip effect based on the AAF spec. Mirrors the image in the x-axis',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            varying vec2 v_texCoord;\t            void main(){\t                vec2 coord = vec2(v_texCoord[0] ,1.0 - v_texCoord[1]);\t                vec4 color = texture2D(u_image, coord);\t                gl_FragColor = color;\t            }',properties:{},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'AAF Video Position Effect',description:'A position effect based on the AAF spec.',vertexShader:'\t        attribute vec2 a_position;\t        attribute vec2 a_texCoord;\t        varying vec2 v_texCoord;\t        void main() {\t            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t            v_texCoord = a_texCoord;\t        }',fragmentShader:'\t        precision mediump float;\t        uniform sampler2D u_image;\t        uniform float positionOffsetX;\t        uniform float positionOffsetY;\t        varying vec2 v_texCoord;\t        varying float v_progress;\t        void main(){\t            vec2 pos = vec2(v_texCoord[0] - positionOffsetX/2.0, v_texCoord[1] -  positionOffsetY/2.0);\t            vec4 color = texture2D(u_image, pos);\t            if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){\t                color = vec4(0.0,0.0,0.0,0.0);\t            }\t            gl_FragColor = color;\t        }',properties:{positionOffsetX:{type:'uniform',value:0},positionOffsetY:{type:'uniform',value:0}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'AAF Video Crop Effect',description:'A crop effect based on the AAF spec.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            uniform float cropLeft;\t            uniform float cropRight;\t            uniform float cropTop;\t            uniform float cropBottom;\t            varying vec2 v_texCoord;\t            void main(){\t                vec4 color = texture2D(u_image, v_texCoord);\t                if (v_texCoord[0] < (cropLeft+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);\t                if (v_texCoord[0] > (cropRight+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);\t                if (v_texCoord[1] < (-cropBottom+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);\t                if (v_texCoord[1] > (-cropTop+1.0)/2.0) color = vec4(0.0,0.0,0.0,0.0);\t                gl_FragColor = color;\t            }',properties:{cropLeft:{type:'uniform',value:-1},cropRight:{type:'uniform',value:1},cropTop:{type:'uniform',value:-1},cropBottom:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Static Dissolve',description:'A static dissolve effect. Typically used as a transistion.',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image_a;\t            uniform sampler2D u_image_b;\t            uniform float mix;\t            uniform float currentTime;\t            varying vec2 v_texCoord;\t            varying float v_mix;\t            float rand(vec2 co, float currentTime){\t               return fract(sin(dot(co.xy,vec2(12.9898,78.233))+currentTime) * 43758.5453);\t            }\t            void main(){\t                vec4 color_a = texture2D(u_image_a, v_texCoord);\t                vec4 color_b = texture2D(u_image_b, v_texCoord);\t                if (clamp(rand(v_texCoord, currentTime),  0.01, 1.001) > mix){\t                    gl_FragColor = color_a;\t                } else {\t                    gl_FragColor = color_b;\t                }\t            }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Static',description:'A static effect to add pseudo random noise to a video',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            uniform float currentTime;\t            uniform float amount;\t            varying vec2 v_texCoord;\t            uniform vec3 weight;\t            float rand(vec2 co, float currentTime){\t               return fract(sin(dot(co.xy,vec2(12.9898,78.233))+currentTime) * 43758.5453);\t            }\t            void main(){\t                vec4 color = texture2D(u_image, v_texCoord);\t                color[0] = color[0] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[0] * amount;\t                color[1] = color[1] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[1] * amount;\t                color[2] = color[2] + (2.0*(clamp(rand(v_texCoord, currentTime),  0.01, 1.001)-0.5)) * weight[2] *amount;\t                gl_FragColor = color;\t            }',properties:{weight:{type:'uniform',value:[1,1,1]},amount:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Dream-Fade',description:'A wobbly dream effect. Typically used as a transistion.',vertexShader:'\t    attribute vec2 a_position;\t    attribute vec2 a_texCoord;\t    varying vec2 v_texCoord;\t    void main() {\t        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t        v_texCoord = a_texCoord;\t    }',fragmentShader:'\t    precision mediump float;\t    uniform sampler2D u_image_a;\t    uniform sampler2D u_image_b;\t    uniform float mix;\t    varying vec2 v_texCoord;\t    varying float v_mix;\t    void main(){\t        float wobble = 1.0 - abs((mix*2.0)-1.0);\t        vec2 pos = vec2(v_texCoord[0] + ((sin(v_texCoord[1]*(10.0*wobble*3.14) + wobble*10.0)/13.0)), v_texCoord[1]);\t        vec4 color_a = texture2D(u_image_a, pos);\t        vec4 color_b = texture2D(u_image_b, pos);\t        color_a[0] *= (1.0 - mix);\t        color_a[1] *= (1.0 - mix);\t        color_a[2] *= (1.0 - mix);\t        color_a[3] *= (1.0 - mix);\t        color_b[0] *= mix;\t        color_b[1] *= mix;\t        color_b[2] *= mix;\t        color_b[3] *= mix;\t        gl_FragColor = color_a + color_b;\t    }',properties:{mix:{type:'uniform',value:0}},inputs:['u_image_a','u_image_b']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Opacity',description:'Sets the opacity of an input.',vertexShader:'\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    varying vec2 v_texCoord;\n    void main() {\n        gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n        v_texCoord = a_texCoord;\n    }',fragmentShader:'\n    precision mediump float;\n    uniform sampler2D u_image;\n    uniform float opacity;\n    varying vec2 v_texCoord;\n    varying float v_opacity;\n    void main(){\n        vec4 color = texture2D(u_image, v_texCoord);\n        color[3] *= opacity;\n        gl_FragColor = color;\n    }',properties:{opacity:{type:'uniform',value:0.7}},inputs:['u_image']},e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});t['default']={title:'Primer Simple Crop',description:'A simple crop processors for primer',vertexShader:'\t        attribute vec2 a_position;\t        attribute vec2 a_texCoord;\t        varying vec2 v_texCoord;\t        void main() {\t            gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t            v_texCoord = a_texCoord;\t        }',fragmentShader:'\t        precision mediump float;\t        uniform sampler2D u_image;\t        uniform float x;\t        uniform float y;\t        uniform float width;\t        uniform float height;\t        varying vec2 v_texCoord;\t        varying float v_progress;\t        void main(){\t            vec2 pos = (((v_texCoord)*vec2(width, height)) + vec2(0, 1.0-height)) +vec2(x,-y);\t            vec4 color = texture2D(u_image, pos);\t            if (pos[0] < 0.0 || pos[0] > 1.0 || pos[1] < 0.0 || pos[1] > 1.0){\t                color = vec4(0.0,0.0,0.0,0.0);\t            }\t            gl_FragColor = color;\t        }',properties:{x:{type:'uniform',value:0},y:{type:'uniform',value:0},width:{type:'uniform',value:1},height:{type:'uniform',value:1}},inputs:['u_image']},e.exports=t['default']},function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var a=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=function(){function e(t,a,o){var n=3>=arguments.length||void 0===arguments[3]?!1:arguments[3];r(this,e),this._renderGraph=a,this._limitConnections=n,this._inputNames=o,this._destroyed=!1,this._gl=t,this._renderGraph=a,this._rendered=!1,this._displayName='GraphNode'}return a(e,[{key:'connect',value:function(e,t){return this._renderGraph.registerConnection(this,e,t)}},{key:'disconnect',value:function(e){var t=this;if(void 0===e){var r=this._renderGraph.getOutputsForNode(this);return r.forEach(function(e){return t._renderGraph.unregisterConnection(t,e)}),!!(0<r.length)}return this._renderGraph.unregisterConnection(this,e)}},{key:'destroy',value:function(){this.disconnect();var e=!0,t=!1,r;try{for(var a=this.inputs[Symbol.iterator](),o,n;!(e=(o=a.next()).done);e=!0)n=o.value,n.disconnect(this)}catch(e){t=!0,r=e}finally{try{!e&&a['return']&&a['return']()}finally{if(t)throw r}}this._destroyed=!0}},{key:'displayName',get:function(){return this._displayName}},{key:'inputNames',get:function(){return this._inputNames.slice()}},{key:'maximumConnections',get:function(){return!1===this._limitConnections?Infinity:this._inputNames.length}},{key:'inputs',get:function(){var e=this._renderGraph.getInputsForNode(this);return e=e.filter(function(e){return void 0!==e}),e}},{key:'outputs',get:function(){return this._renderGraph.getOutputsForNode(this)}},{key:'destroyed',get:function(){return this._destroyed}}]),e}();t['default']=o,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(2),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(e,r,o,n){var l=4>=arguments.length||void 0===arguments[4]?4:arguments[4],s=5>=arguments.length||void 0===arguments[5]?{}:arguments[5];a(this,t),i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,n),this._preloadTime=l,this._attributes=s,this._textureUploaded=!1,this._displayName='ImageNode'}return o(t,e),n(t,[{key:'_load',value:function(){var e=this;if(void 0!==this._element){for(var r in this._attributes)this._element[r]=this._attributes[r];return}if(this._isResponsibleForElementLifeCycle)for(var a in i(Object.getPrototypeOf(t.prototype),'_load',this).call(this),this._element=new Image,this._element.setAttribute('crossorigin','anonymous'),this._element.src=this._elementURL,this._element.onload=function(){console.log('image loaded!!'),e._ready=!0,e._triggerCallbacks('loaded')},this._element.onerror=function(){console.error('ImageNode failed to load. url:',e._elementURL)},this._attributes)this._element[a]=this._attributes[a];this._element.onerror=function(){console.debug('Error with element',e._element),e._state=l.SOURCENODESTATE.error,e._ready=!0,e._triggerCallbacks('error')}}},{key:'_unload',value:function(){i(Object.getPrototypeOf(t.prototype),'_unload',this).call(this),this._isResponsibleForElementLifeCycle&&(this._element.src='',this._element.onerror=void 0,this._element=void 0,delete this._element),this._ready=!1}},{key:'_seek',value:function(e){i(Object.getPrototypeOf(t.prototype),'_seek',this).call(this,e),(this.state===l.SOURCENODESTATE.playing||this.state===l.SOURCENODESTATE.paused)&&void 0===this._element&&this._load(),(this._state===l.SOURCENODESTATE.sequenced||this._state===l.SOURCENODESTATE.ended)&&void 0!==this._element&&this._unload()}},{key:'_update',value:function(e){return(this._textureUploaded?i(Object.getPrototypeOf(t.prototype),'_update',this).call(this,e,!1):i(Object.getPrototypeOf(t.prototype),'_update',this).call(this,e),this._startTime-this._currentTime<this._preloadTime&&this._state!==l.SOURCENODESTATE.waiting&&this._state!==l.SOURCENODESTATE.ended&&this._load(),this._state===l.SOURCENODESTATE.playing)||this._state===l.SOURCENODESTATE.paused||(this._state===l.SOURCENODESTATE.ended&&void 0!==this._element?(this._unload(),!1):void 0)}},{key:'elementURL',get:function(){return this._elementURL}}]),t}(s['default']);t['default']=u,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(2),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(e,r,o,n){var l=4>=arguments.length||void 0===arguments[4]?4:arguments[4];a(this,t),i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,n),this._preloadTime=l,this._displayName='CanvasNode'}return o(t,e),n(t,[{key:'_load',value:function(){i(Object.getPrototypeOf(t.prototype),'_load',this).call(this),this._ready=!0,this._triggerCallbacks('loaded')}},{key:'_unload',value:function(){i(Object.getPrototypeOf(t.prototype),'_unload',this).call(this),this._ready=!1}},{key:'_seek',value:function(e){i(Object.getPrototypeOf(t.prototype),'_seek',this).call(this,e),(this.state===l.SOURCENODESTATE.playing||this.state===l.SOURCENODESTATE.paused)&&(void 0===this._element&&this._load(),this._ready=!1),(this._state===l.SOURCENODESTATE.sequenced||this._state===l.SOURCENODESTATE.ended)&&void 0!==this._element&&this._unload()}},{key:'_update',value:function(e){return(i(Object.getPrototypeOf(t.prototype),'_update',this).call(this,e),this._startTime-this._currentTime<this._preloadTime&&this._state!==l.SOURCENODESTATE.waiting&&this._state!==l.SOURCENODESTATE.ended&&this._load(),this._state===l.SOURCENODESTATE.playing)||this._state===l.SOURCENODESTATE.paused||(this._state===l.SOURCENODESTATE.ended&&void 0!==this._element?(this._unload(),!1):void 0)}}]),t}(s['default']);t['default']=u,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(30),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=r(3),c=function(e){function t(e,r,o){a(this,t);var n=(0,u.createElementTexutre)(e);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,o.inputs,!1),this._placeholderTexture=n,this._displayName='CompositingNode'}return o(t,e),n(t,[{key:'_render',value:function(){var e=this,r=this._gl;r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this._texture,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),this.inputs.forEach(function(a){if(void 0!==a){i(Object.getPrototypeOf(t.prototype),'_render',e).call(e);var o=a._texture,n=0,l=!0,s=!1,u;try{for(var c=e._inputTextureUnitMapping[Symbol.iterator](),d,p;!(l=(d=c.next()).done);l=!0){p=d.value,r.activeTexture(p.textureUnit);var _=r.getUniformLocation(e._program,p.name);r.uniform1i(_,e._parameterTextureCount+n),n+=1,r.bindTexture(r.TEXTURE_2D,o)}}catch(e){s=!0,u=e}finally{try{!l&&c['return']&&c['return']()}finally{if(s)throw u}}r.drawArrays(r.TRIANGLES,0,6)}}),r.bindFramebuffer(r.FRAMEBUFFER,null)}}]),t}(s['default']);t['default']=c,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(26),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=r(3),c=r(31),d=function(e){function t(e,r,o,n,l){var s=this;for(var d in a(this,t),i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,n,l),this._vertexShader=(0,u.compileShader)(e,o.vertexShader,e.VERTEX_SHADER),this._fragmentShader=(0,u.compileShader)(e,o.fragmentShader,e.FRAGMENT_SHADER),this._definition=o,this._properties={},o.properties){var p=o.properties[d].value;'[object Array]'===Object.prototype.toString.call(p)&&(p=o.properties[d].value.slice());var _=o.properties[d].type;this._properties[d]={type:_,value:p}}this._inputTextureUnitMapping=[],this._maxTextureUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this._boundTextureUnits=0,this._parameterTextureCount=0,this._inputTextureCount=0,this._texture=(0,u.createElementTexutre)(e),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.canvas.width,e.canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,null),this._program=(0,u.createShaderProgram)(e,this._vertexShader,this._fragmentShader),this._framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.bindFramebuffer(e.FRAMEBUFFER,null);var y=function(e){Object.defineProperty(s,e,{get:function(){return this._properties[e].value},set:function(t){this._properties[e].value=t}})};for(var d in this._properties)y(d);for(var d in this._properties){var p=this._properties[d].value;if(p instanceof Image&&(this._properties[d].texture=(0,u.createElementTexutre)(e),this._properties[d].texutreUnit=e.TEXTURE0+this._boundTextureUnits,this._boundTextureUnits+=1,this._parameterTextureCount+=1,this._boundTextureUnits>this._maxTextureUnits))throw new c.RenderException('Trying to bind more than available textures units to shader')}var v=!0,g=!1,m;try{for(var f=o.inputs[Symbol.iterator](),b,x;!(v=(b=f.next()).done);v=!0)if(x=b.value,this._inputTextureUnitMapping.push({name:x,textureUnit:e.TEXTURE0+this._boundTextureUnits}),this._boundTextureUnits+=1,this._inputTextureCount+=1,this._boundTextureUnits>this._maxTextureUnits)throw new c.RenderException('Trying to bind more than available textures units to shader')}catch(e){g=!0,m=e}finally{try{!v&&f['return']&&f['return']()}finally{if(g)throw m}}for(var d in this._properties)'uniform'===this._properties[d].type&&(this._properties[d].location=this._gl.getUniformLocation(this._program,d));this._currentTimeLocation=this._gl.getUniformLocation(this._program,'currentTime'),this._currentTime=0;var h=e.getAttribLocation(this._program,'a_position'),T=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,T),e.enableVertexAttribArray(h),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,1,0,0,1,0,0]),e.STATIC_DRAW);var O=e.getAttribLocation(this._program,'a_texCoord');e.enableVertexAttribArray(O),e.vertexAttribPointer(O,2,e.FLOAT,!1,0,0),this._displayName='ProcessingNode'}return o(t,e),n(t,[{key:'setProperty',value:function(e,t){this._properties[e].value=t}},{key:'getProperty',value:function(e){return this._properties[e].value}},{key:'destroy',value:function(){for(var e in i(Object.getPrototypeOf(t.prototype),'destroy',this).call(this),this._properties){var r=this._properties[e].value;r instanceof Image&&(this._gl.deleteTexture(this._properties[e].texture),this._texture=void 0)}this._gl.deleteTexture(this._texture),this._texture=void 0,this._gl.detachShader(this._program,this._vertexShader),this._gl.detachShader(this._program,this._fragmentShader),this._gl.deleteShader(this._vertexShader),this._gl.deleteShader(this._fragmentShader),this._gl.deleteProgram(this._program),this._gl.deleteFramebuffer(this._framebuffer)}},{key:'_update',value:function(e){this._currentTime=e}},{key:'_seek',value:function(e){this._currentTime=e}},{key:'_render',value:function(){this._rendered=!0;var e=this._gl;e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(this._program),e.uniform1f(this._currentTimeLocation,parseFloat(this._currentTime));var t=0;for(var r in this._properties){var a=this._properties[r].value,o=this._properties[r].type,n=this._properties[r].location;if('uniform'===o)if('number'==typeof a)e.uniform1f(n,a);else if('[object Array]'===Object.prototype.toString.call(a))1===a.length?e.uniform1fv(n,a):2===a.length?e.uniform2fv(n,a):3===a.length?e.uniform3fv(n,a):4===a.length?e.uniform4fv(n,a):console.debug('Shader parameter',r,'is too long an array:',a);else if(a instanceof Image){var i=this._properties[r].texture,l=this._properties[r].texutreUnit;(0,u.updateTexture)(e,i,a),e.activeTexture(l),e.uniform1i(n,t),t+=1,e.bindTexture(e.TEXTURE_2D,i)}else;}}}]),t}(s['default']);t['default']=d,e.exports=t['default']},function(e,t){Object.defineProperty(t,'__esModule',{value:!0}),t.ConnectException=function(e){this.message=e,this.name='ConnectionException'},t.RenderException=function(e){this.message=e,this.name='RenderException'}},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},l=r(30),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(e,r){a(this,t);var o={fragmentShader:'\t            precision mediump float;\t            uniform sampler2D u_image;\t            varying vec2 v_texCoord;\t            varying float v_progress;\t            void main(){\t                gl_FragColor = texture2D(u_image, v_texCoord);\t            }',vertexShader:'\t            attribute vec2 a_position;\t            attribute vec2 a_texCoord;\t            varying vec2 v_texCoord;\t            void main() {\t                gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\t                v_texCoord = a_texCoord;\t            }',properties:{},inputs:['u_image']};i(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,o.inputs,!1),this._displayName='DestinationNode'}return o(t,e),n(t,[{key:'_render',value:function(){var e=this,r=this._gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),this.inputs.forEach(function(a){i(Object.getPrototypeOf(t.prototype),'_render',e).call(e);var o=a._texture,n=0,l=!0,s=!1,u;try{for(var c=e._inputTextureUnitMapping[Symbol.iterator](),d,p;!(l=(d=c.next()).done);l=!0){p=d.value,r.activeTexture(p.textureUnit);var _=r.getUniformLocation(e._program,p.name);r.uniform1i(_,e._parameterTextureCount+n),n+=1,r.bindTexture(r.TEXTURE_2D,o)}}catch(e){s=!0,u=e}finally{try{!l&&c['return']&&c['return']()}finally{if(s)throw u}}r.drawArrays(r.TRIANGLES,0,6)})}}]),t}(s['default']);t['default']=u,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},i=r(30),s=function(e){return e&&e.__esModule?e:{default:e}}(i),u=r(3),c=function(e){function t(e,r,o){a(this,t);var n=(0,u.createElementTexutre)(e);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o,o.inputs,!0),this._placeholderTexture=n,this._displayName='EffectNode'}return o(t,e),n(t,[{key:'_render',value:function(){var e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),l(Object.getPrototypeOf(t.prototype),'_render',this).call(this);for(var r=this._renderGraph.getInputsForNode(this),a=0,o=0;o<this._inputTextureUnitMapping.length;o++){var n=this._placeholderTexture,i=this._inputTextureUnitMapping[o].textureUnit,s=this._inputTextureUnitMapping[o].name;o<r.length&&void 0!==r[o]&&(n=r[o]._texture),e.activeTexture(i);var u=e.getUniformLocation(this._program,s);e.uniform1i(u,this._parameterTextureCount+a),a+=1,e.bindTexture(e.TEXTURE_2D,n)}e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,null)}}]),t}(s['default']);t['default']=c,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t,r){var a=!0;_function:for(;a;){var o=e,n=t,i=r;a=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,n);if(l===void 0){var s=Object.getPrototypeOf(o);if(null===s)return;e=s,t=n,r=i,a=!0,l=s=void 0;continue _function}else{if('value'in l)return l.value;var u=l.get;return void 0===u?void 0:u.call(i)}}},i=r(33),s=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(e){function t(e,r,o){for(var n in a(this,t),l(Object.getPrototypeOf(t.prototype),'constructor',this).call(this,e,r,o),this._transitions={},this._initialPropertyValues={},this._properties)this._initialPropertyValues[n]=this._properties[n].value;this._displayName='TransitionNode'}return o(t,e),n(t,[{key:'_doesTransitionFitOnTimeline',value:function(e){if(void 0===this._transitions[e.property])return!0;var t=!0,r=!1,a;try{for(var o=this._transitions[e.property][Symbol.iterator](),n,i;!(t=(n=o.next()).done);t=!0){if(i=n.value,e.start>i.start&&e.start<i.end)return!1;if(e.end>i.start&&e.end<i.end)return!1;if(i.start>e.start&&i.start<e.end)return!1;if(i.end>e.start&&i.end<e.end)return!1}}catch(e){r=!0,a=e}finally{try{!t&&o['return']&&o['return']()}finally{if(r)throw a}}return!0}},{key:'_insertTransitionInTimeline',value:function(e){void 0===this._transitions[e.property]&&(this._transitions[e.property]=[]),this._transitions[e.property].push(e),this._transitions[e.property].sort(function(e,t){return e.start-t.start})}},{key:'transition',value:function(e,t,r,a){var o=4>=arguments.length||void 0===arguments[4]?'mix':arguments[4],n={start:e+this._currentTime,end:t+this._currentTime,current:r,target:a,property:o};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}},{key:'transitionAt',value:function(e,t,r,a){var o=4>=arguments.length||void 0===arguments[4]?'mix':arguments[4],n={start:e,end:t,current:r,target:a,property:o};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}},{key:'clearTransitions',value:function(e){void 0===e?this._transitions={}:this._transitions[e]=[]}},{key:'clearTransition',value:function(e,t){for(var r=void 0,a=0,o;a<this._transitions[e].length;a++)o=this._transitions[e][a],t>o.start&&t<o.end&&(r=a);return void 0!==r&&(this._transitions[e].splice(r,1),!0)}},{key:'_update',value:function(e){for(var r in l(Object.getPrototypeOf(t.prototype),'_update',this).call(this,e),this._transitions){var a=this[r];0<this._transitions[r].length&&(a=this._transitions[r][0].current);for(var o=!1,n=0,i;n<this._transitions[r].length;n++){if(i=this._transitions[r][n],e>i.end){a=i.target;continue}if(e>i.start&&e<i.end){var s=i.target-i.current,u=(this._currentTime-i.start)/(i.end-i.start);o=!0,this[r]=i.current+s*u;break}}o||(this[r]=a)}}}]),t}(s['default']);t['default']=u,e.exports=t['default']},function(e,t,r){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(31),i=function(){function e(){a(this,e),this.connections=[]}return o(e,[{key:'getOutputsForNode',value:function(e){var t=[];return this.connections.forEach(function(r){r.source===e&&t.push(r.destination)}),t}},{key:'getNamedInputsForNode',value:function(e){var t=[];return this.connections.forEach(function(r){r.destination===e&&'name'===r.type&&t.push(r)}),t}},{key:'getZIndexInputsForNode',value:function(e){var t=[];return this.connections.forEach(function(r){r.destination===e&&'zIndex'===r.type&&t.push(r)}),t.sort(function(e,t){return e.zIndex-t.zIndex}),t}},{key:'getInputsForNode',value:function(e){var t=e.inputNames,r=[],a=this.getNamedInputsForNode(e),o=this.getZIndexInputsForNode(e);if(!0===e._limitConnections){for(var n=0;n<t.length;n++)r[n]=void 0;var i=!0,l=!1,s;try{for(var u=a[Symbol.iterator](),c;!(i=(c=u.next()).done);i=!0){var d=c.value,p=t.indexOf(d.name);r[p]=d.source}}catch(e){l=!0,s=e}finally{try{!i&&u['return']&&u['return']()}finally{if(l)throw s}}for(var _=0,n=0;n<r.length;n++)void 0===r[n]&&void 0!==o[_]&&(r[n]=o[_].source,_+=1)}else{var y=!0,v=!1,g;try{for(var m=a[Symbol.iterator](),f,d;!(y=(f=m.next()).done);y=!0)d=f.value,r.push(d.source)}catch(e){v=!0,g=e}finally{try{!y&&m['return']&&m['return']()}finally{if(v)throw g}}var b=!0,x=!1,h;try{for(var T=o[Symbol.iterator](),O,d;!(b=(O=T.next()).done);b=!0)d=O.value,r.push(d.source)}catch(e){x=!0,h=e}finally{try{!b&&T['return']&&T['return']()}finally{if(x)throw h}}}return r}},{key:'isInputAvailable',value:function(e,t){if(-1===e._inputNames.indexOf(t))return!1;var r=!0,a=!1,o;try{for(var n=this.connections[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)if(l=i.value,'name'===l.type&&l.destination===e&&l.name===t)return!1}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}return!0}},{key:'registerConnection',value:function(e,t,r){if(t.inputs.length>=t.inputNames.length&&!0===t._limitConnections)throw new n.ConnectException('Node has reached max number of inputs, can\'t connect');if('number'==typeof r)this.connections.push({source:e,type:'zIndex',zIndex:r,destination:t});else if(!('string'==typeof r&&t._limitConnections)){var a=this.getZIndexInputsForNode(t),o=0;0<a.length&&(o=a[a.length-1].zIndex+1),this.connections.push({source:e,type:'zIndex',zIndex:o,destination:t})}else if(this.isInputAvailable(t,r))this.connections.push({source:e,type:'name',name:r,destination:t});else throw new n.ConnectException('Port '+r+' is already connected to');return!0}},{key:'unregisterConnection',value:function(e,t){var r=this,a=[];return(this.connections.forEach(function(r){r.source===e&&r.destination===t&&a.push(r)}),0!==a.length)&&(a.forEach(function(e){var t=r.connections.indexOf(e);r.connections.splice(t,1)}),!0)}}],[{key:'outputEdgesFor',value:function(e,t){var r=[],a=!0,o=!1,n;try{for(var i=t[Symbol.iterator](),l,s;!(a=(l=i.next()).done);a=!0)s=l.value,s.source===e&&r.push(s)}catch(e){o=!0,n=e}finally{try{!a&&i['return']&&i['return']()}finally{if(o)throw n}}return r}},{key:'inputEdgesFor',value:function(e,t){var r=[],a=!0,o=!1,n;try{for(var i=t[Symbol.iterator](),l,s;!(a=(l=i.next()).done);a=!0)s=l.value,s.destination===e&&r.push(s)}catch(e){o=!0,n=e}finally{try{!a&&i['return']&&i['return']()}finally{if(o)throw n}}return r}},{key:'getInputlessNodes',value:function(e){var t=[],r=!0,a=!1,o;try{for(var n=e[Symbol.iterator](),i,l;!(r=(i=n.next()).done);r=!0)l=i.value,t.push(l.source)}catch(e){a=!0,o=e}finally{try{!r&&n['return']&&n['return']()}finally{if(a)throw o}}var s=!0,u=!1,c;try{for(var d=e[Symbol.iterator](),p;!(s=(p=d.next()).done);s=!0){var l=p.value,_=t.indexOf(l.destination);-1!==_&&t.splice(_,1)}}catch(e){u=!0,c=e}finally{try{!s&&d['return']&&d['return']()}finally{if(u)throw c}}return t}}]),e}();t['default']=i,e.exports=t['default']},function(e,t){function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e){return''===e.port||void 0===e.port?e.protocol+'//'+e.hostname+e.pathname:e.protocol+'//'+e.hostname+':'+e.port+e.pathname}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var r=0,a;r<t.length;r++)a=t[r],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){var t=0>=arguments.length||void 0===arguments[0]?3:arguments[0];r(this,e),this._elements=[],this._elementsInitialised=!1;for(var a=0,o;a<t;a++)o=this._createElement(),this._elements.push(o)}return o(e,[{key:'_createElement',value:function(){var e=document.createElement('video');return e.setAttribute('crossorigin','anonymous'),e.setAttribute('webkit-playsinline',''),e.setAttribute('playsinline',''),e.src='',e}},{key:'init',value:function(){if(!this._elementsInitialised){var e=!0,t=!1,r;try{for(var a=this._elements[Symbol.iterator](),o,n;!(e=(o=a.next()).done);e=!0){n=o.value;try{n.play().then(function(){},function(t){if('NotSupportedError'!==t.name)throw t})}catch(t){}}}catch(e){t=!0,r=e}finally{try{!e&&a['return']&&a['return']()}finally{if(t)throw r}}}this._elementsInitialised=!0}},{key:'get',value:function(){var e=!0,t=!1,r;try{for(var o=this._elements[Symbol.iterator](),n,i;!(e=(n=o.next()).done);e=!0)if(i=n.value,(''===i.src||void 0===i.src||i.src===a(window.location))&&null==i.srcObject)return i}catch(e){t=!0,r=e}finally{try{!e&&o['return']&&o['return']()}finally{if(t)throw r}}console.debug('No available video element in the cache, creating a new one. This may break mobile, make your initial cache larger.');var l=this._createElement();return this._elements.push(l),this._elementsInitialised=!1,l}},{key:'length',get:function(){return this._elements.length}},{key:'unused',get:function(){var e=0,t=!0,r=!1,o;try{for(var n=this._elements[Symbol.iterator](),i,l;!(t=(i=n.next()).done);t=!0)l=i.value,(''===l.src||void 0===l.src||l.src===a(window.location))&&null==l.srcObject&&(e+=1)}catch(e){r=!0,o=e}finally{try{!t&&n['return']&&n['return']()}finally{if(r)throw o}}return e}}]),e}();t['default']=n,e.exports=t['default']}])})}])});
//# sourceMappingURL=OBBEngine.js.map